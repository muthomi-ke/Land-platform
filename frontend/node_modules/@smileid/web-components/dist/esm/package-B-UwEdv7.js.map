{"version":3,"file":"package-B-UwEdv7.js","sources":["../../lib/domain/constants/src/Constants.js","../../lib/domain/camera/src/SmartCamera.js"],"sourcesContent":["/**\n * The type of image submitted in the job request\n * @readonly\n * @enum {number}\n */\nexport const IMAGE_TYPE = {\n  /** ID_CARD_BACK_IMAGE_BASE64 Base64 encoded back of ID card image (.jpg or .png) */\n  ID_CARD_BACK_IMAGE_BASE64: 7,\n  /** ID_CARD_BACK_IMAGE_FILE Back of ID card image in .png or .jpg file format */\n  ID_CARD_BACK_IMAGE_FILE: 5,\n  /** ID_CARD_IMAGE_BASE64 Base64 encoded ID card image (.png or .jpg) */\n  ID_CARD_IMAGE_BASE64: 3,\n  /** ID_CARD_IMAGE_FILE ID card image in .png or .jpg file format */\n  ID_CARD_IMAGE_FILE: 1,\n  /** LIVENESS_IMAGE_BASE64 Base64 encoded liveness image (.jpg or .png) */\n  LIVENESS_IMAGE_BASE64: 6,\n  /** LIVENESS_IMAGE_FILE Liveness image in .png or .jpg file format */\n  LIVENESS_IMAGE_FILE: 4,\n  /** SELFIE_IMAGE_BASE64 Base64 encoded selfie image (.png or .jpg) */\n  SELFIE_IMAGE_BASE64: 2,\n  /** SELFIE_IMAGE_FILE Selfie image in .png or .jpg file format */\n  SELFIE_IMAGE_FILE: 0,\n};\n\nexport const DEFAULT_NO_OF_LIVENESS_FRAMES = 8;\nexport const PORTRAIT_ID_PREVIEW_WIDTH = 396;\nexport const PORTRAIT_ID_PREVIEW_HEIGHT = 527;\n","class SmartCamera {\n  static stream = null;\n\n  static async getMedia(constraints) {\n    SmartCamera.stream = await navigator.mediaDevices.getUserMedia(constraints);\n    return SmartCamera.stream;\n  }\n\n  static environmentOptions = {\n    facingMode: 'environment',\n    height: {\n      ideal: 1080,\n      max: 1440,\n      min: 720,\n    },\n    width: {\n      ideal: 1920,\n      max: 2560,\n      min: 1280,\n    },\n    // NOTE: Special case for multi-camera Samsung devices (learnt from Acuant)\n    // \"We found out that some triple camera Samsung devices (S10, S20, Note 20, etc) capture images blurry at edges.\n    // Zooming to 2X, matching the telephoto lens, doesn't solve it completely but mitigates it.\"\n    zoom: SmartCamera.isSamsungMultiCameraDevice() ? 2.0 : 1.0,\n  };\n\n  static stopMedia() {\n    if (SmartCamera.stream) {\n      SmartCamera.stream.getTracks().forEach((track) => track.stop());\n      SmartCamera.stream = null;\n    }\n  }\n\n  static async supportsAgentMode() {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const videoDevices = devices.filter(\n        (device) => device.kind === 'videoinput',\n      );\n\n      let hasBackCamera = false;\n\n      videoDevices.forEach((device) => {\n        // Check if the device label or device ID indicates a back camera\n        if (\n          device.label.toLowerCase().includes('back') ||\n          device.label.toLowerCase().includes('rear')\n        ) {\n          hasBackCamera = true;\n          return true;\n        }\n        return false;\n      });\n\n      return hasBackCamera;\n    } catch (error) {\n      console.warn('Error accessing media devices: ', error);\n      return false;\n    }\n  }\n\n  static isSamsungMultiCameraDevice() {\n    const matchedModelNumber = navigator.userAgent.match(/SM-[N|G]\\d{3}/);\n    if (!matchedModelNumber) {\n      return false;\n    }\n\n    const modelNumber = parseInt(matchedModelNumber[0].match(/\\d{3}/)[0], 10);\n    const smallerModelNumber = 970; // S10e\n    return !Number.isNaN(modelNumber) && modelNumber >= smallerModelNumber;\n  }\n\n  static handleCameraError(e) {\n    switch (e.name) {\n      case 'NotAllowedError':\n      case 'SecurityError':\n        return `\n              Looks like camera access was not granted, or was blocked by a browser\n              level setting / extension. Please follow the prompt from the URL bar,\n              or extensions, and enable access.\n              You may need to refresh to start all over again\n            `;\n      case 'AbortError':\n        return `\n              Oops! Something happened, and we lost access to your stream.\n              Please refresh to start all over again\n            `;\n      case 'NotReadableError':\n        return `\n              There seems to be a problem with your device's camera, or its connection.\n              Please check this, and when resolved, try again. Or try another device.\n            `;\n      case 'NotFoundError':\n        return `\n              We are unable to find a video stream.\n              You may need to refresh to start all over again\n            `;\n      case 'TypeError':\n        return `\n              This site is insecure, and as such cannot have access to your camera.\n              Try to navigate to a secure version of this page, or contact the owner.\n            `;\n      default:\n        return e.message;\n    }\n  }\n}\n\nexport default SmartCamera;\n"],"names":["IMAGE_TYPE","SmartCamera","constraints","track","videoDevices","device","hasBackCamera","error","matchedModelNumber","modelNumber"],"mappings":"AAKY,MAACA,IAAa;AAAA;AAAA,EAExB,2BAA2B;AAAA;AAAA,EAE3B,yBAAyB;AAAA;AAAA,EAEzB,sBAAsB;AAAA;AAAA,EAEtB,oBAAoB;AAAA;AAAA,EAEpB,uBAAuB;AAAA;AAAA,EAEvB,qBAAqB;AAAA;AAAA,EAErB,qBAAqB;AAAA;AAAA,EAErB,mBAAmB;AACrB;ACtBA,MAAMC,EAAY;AAAA,EAChB,OAAO,SAAS;AAAA,EAEhB,aAAa,SAASC,GAAa;AACjC,WAAAD,EAAY,SAAS,MAAM,UAAU,aAAa,aAAaC,CAAW,GACnED,EAAY;AAAA,EACrB;AAAA,EAEA,OAAO,qBAAqB;AAAA,IAC1B,YAAY;AAAA,IACZ,QAAQ;AAAA,MACN,OAAO;AAAA,MACP,KAAK;AAAA,MACL,KAAK;AAAA,IACX;AAAA,IACI,OAAO;AAAA,MACL,OAAO;AAAA,MACP,KAAK;AAAA,MACL,KAAK;AAAA,IACX;AAAA;AAAA;AAAA;AAAA,IAII,MAAMA,EAAY,2BAA0B,IAAK,IAAM;AAAA,EAC3D;AAAA,EAEE,OAAO,YAAY;AACjB,IAAIA,EAAY,WACdA,EAAY,OAAO,YAAY,QAAQ,CAACE,MAAUA,EAAM,MAAM,GAC9DF,EAAY,SAAS;AAAA,EAEzB;AAAA,EAEA,aAAa,oBAAoB;AAC/B,QAAI;AAEF,YAAMG,KADU,MAAM,UAAU,aAAa,iBAAgB,GAChC;AAAA,QAC3B,CAACC,MAAWA,EAAO,SAAS;AAAA,MACpC;AAEM,UAAIC,IAAgB;AAEpB,aAAAF,EAAa,QAAQ,CAACC,MAGlBA,EAAO,MAAM,cAAc,SAAS,MAAM,KAC1CA,EAAO,MAAM,YAAW,EAAG,SAAS,MAAM,KAE1CC,IAAgB,IACT,MAEF,EACR,GAEMA;AAAA,IACT,SAASC,GAAO;AACd,qBAAQ,KAAK,mCAAmCA,CAAK,GAC9C;AAAA,IACT;AAAA,EACF;AAAA,EAEA,OAAO,6BAA6B;AAClC,UAAMC,IAAqB,UAAU,UAAU,MAAM,eAAe;AACpE,QAAI,CAACA;AACH,aAAO;AAGT,UAAMC,IAAc,SAASD,EAAmB,CAAC,EAAE,MAAM,OAAO,EAAE,CAAC,GAAG,EAAE;AAExE,WAAO,CAAC,OAAO,MAAMC,CAAW,KAAKA,KADV;AAAA,EAE7B;AAAA,EAEA,OAAO,kBAAkB,GAAG;AAC1B,YAAQ,EAAE,MAAI;AAAA,MACZ,KAAK;AAAA,MACL,KAAK;AACH,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMT,KAAK;AACH,eAAO;AAAA;AAAA;AAAA;AAAA,MAIT,KAAK;AACH,eAAO;AAAA;AAAA;AAAA;AAAA,MAIT,KAAK;AACH,eAAO;AAAA;AAAA;AAAA;AAAA,MAIT,KAAK;AACH,eAAO;AAAA;AAAA;AAAA;AAAA,MAIT;AACE,eAAO,EAAE;AAAA,IACjB;AAAA,EACE;AACF;;;;"}