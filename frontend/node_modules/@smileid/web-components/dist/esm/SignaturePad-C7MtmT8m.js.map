{"version":3,"file":"SignaturePad-C7MtmT8m.js","sources":["../../lib/components/signature-pad/src/SignaturePad.js"],"sourcesContent":["import SignaturePadCore from 'signature_pad';\n\nclass SmartFileUpload {\n  static memoryLimit = 2048000;\n\n  static supportedTypes = ['image/jpeg', 'image/png', 'image/svg+xml'];\n\n  static getHumanSize(numberOfBytes) {\n    // Approximate to the closest prefixed unit\n    const units = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    const exponent = Math.min(\n      Math.floor(Math.log(numberOfBytes) / Math.log(1024)),\n      units.length - 1,\n    );\n    const approx = numberOfBytes / 1024 ** exponent;\n    const output =\n      exponent === 0\n        ? `${numberOfBytes} bytes`\n        : `${approx.toFixed(0)} ${units[exponent]}`;\n\n    return output;\n  }\n\n  static getData(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = (e) => {\n        resolve(e.target.result);\n      };\n      reader.onerror = () => {\n        reject(\n          new Error(\n            'An error occurred reading the file. Please check the file, and try again',\n          ),\n        );\n      };\n      reader.readAsDataURL(file);\n    });\n  }\n\n  static async retrieve(files) {\n    if (files.length > 1) {\n      throw new Error('Only one file upload is permitted at a time');\n    }\n\n    const file = files[0];\n\n    if (!SmartFileUpload.supportedTypes.includes(file.type)) {\n      throw new Error(\n        'Unsupported file format. Please ensure that you are providing a JPG, PNG or SVG image',\n      );\n    }\n\n    if (file.size > SmartFileUpload.memoryLimit) {\n      throw new Error(\n        `${\n          file.name\n        } is too large. Please ensure that the file is less than ${SmartFileUpload.getHumanSize(\n          SmartFileUpload.memoryLimit,\n        )}.`,\n      );\n    }\n\n    const imageAsDataUrl = await SmartFileUpload.getData(file);\n\n    return imageAsDataUrl;\n  }\n}\n\nclass SignaturePad extends HTMLElement {\n  connectedCallback() {\n    const shadow = this.attachShadow({ mode: 'open' });\n\n    const style = document.createElement('style');\n    style.textContent = `\n:host {\n  display: block;\n  block-size: auto;\n  inline-size: 30rem;\n  max-inline-size: 100%;\n  position: relative;\n  --color-active: #2D2B2A;\n  --color-default: #001096;\n  --color-disabled: #848282;\n}\n\n:host::part(upload) {\n  text-align: center;\n}\n\n:host::part(signature-controls) {\n  display: inline-flex;\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n}\n\n:host::part(upload) svg + * {\n  margin-inline-start: .5rem;\n}\n\n:host::part(canvas) {\n  background-color: #F9F0E7;\n  --dot-bg: #F9F0E7;\n  --dot-color: black;\n  --dot-size: 1px;\n  --dot-space: 22px;\n  background:\n    linear-gradient(90deg, var(--dot-bg) calc(var(--dot-space) - var(--dot-size)), transparent 1%) center / var(--dot-space) var(--dot-space),\n    linear-gradient(var(--dot-bg) calc(var(--dot-space) - var(--dot-size)), transparent 1%) center / var(--dot-space) var(--dot-space),\n    var(--dot-color);\n  border-radius: 2rem;\n  inline-size: 30rem;\n  max-inline-size: 100%;\n  aspect-ratio: 2 / 1;\n}\n\n:host::part(upload-preview-image) {\n  max-inline-size: 10rem;\n  margin-inline: auto;\n}\n\n.visually-hidden {\n  clip: rect(0 0 0 0); \n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap; \n  width: 1px;\n}\n\nbutton,\nlabel {\n  font: inherit;\n  cursor: pointer;\n}\n\nlabel {\n  display: inline-flex;\n  text-decoration: underline;\n}\n\nlabel svg + * {\n  margin-inline-start: .5rem;\n}\n\n[type=\"file\"] {\n  display: none;\n}\n\n.center {\n  text-align: center;\n  margin-inline: auto;\n}\n\n.color-red {\n  color: red;\n}\n\nbutton[data-variant=\"icon\"] {\n  appearance: none;\n  -webkit-appearance: none;\n  background-color: transparent;\n  border: 0px;\n}\n\nbutton[data-variant=\"text\"] {\n  appearance: none;\n  -webkit-appearance: none;\n  background-color: transparent;\n  border: 0px;\n  text-decoration: underline;\n  display: inline-flex;\n  align-items: baseline;\n}\n\nbutton[data-variant=\"solid\"] {\n  --button-color: ${this.themeColor};\n  border-radius: 2.5rem;\n  border: 0;\n  background-color: transparent;\n  color: #fff;\n  cursor: pointer;\n  inline-size: 100%;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  font-weight: 600;\n  padding: .75rem 1.5rem;\n  text-align: center;\n  background-color: var(--button-color);\n  border: 2px solid var(--button-color);\n}\n\nbutton:hover,\nbutton:focus,\nbutton:active {\n  --button-color: var(--color-active);\n}\n\nbutton:disabled {\n  --button-color: var(--color-disabled);\n}\n`;\n\n    const wrapper = document.createElement('div');\n    const errorMessage = document.createElement('div');\n    errorMessage.innerHTML = `\n      <p id=\"error\" class=\"color-red | center\"><p>\n    `;\n\n    const signatureControls = document.createElement('div');\n    signatureControls.setAttribute('id', 'controls');\n    signatureControls.setAttribute('part', 'signature-controls');\n    signatureControls.innerHTML = `\n      <button data-variant=\"icon\" type=\"button\" name=\"clear\" id=\"clear\">\n        <span class=\"visually-hidden\">\n          Clear Signature\n        </span>\n        <svg fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" viewBox=\"0 0 17 18\">\n          <path d=\"M3.314 15.646a8.004 8.004 0 01-2.217-4.257 8.06 8.06 0 01.545-4.655l1.789.788a6.062 6.062 0 001.264 6.737 6.033 6.033 0 008.551 0c2.358-2.37 2.358-6.224 0-8.592a5.996 5.996 0 00-4.405-1.782l.662 2.354-3.128-.796-3.127-.796 2.25-2.324L7.748 0l.55 1.953a7.966 7.966 0 016.33 2.326 8.004 8.004 0 012.342 5.684 8.005 8.005 0 01-2.343 5.683A7.928 7.928 0 018.97 18a7.928 7.928 0 01-5.656-2.354z\" fill=\"currentColor\" />\n        </svg>\n      </button>\n    `;\n\n    const canvas = document.createElement('canvas');\n\n    /**\n     * NOTE: In order to make this responsive, we need to calculate the width\n     * / height of the canvas element relative to the closest visible element\n     *\n     * Within our consuming context, we do follow these steps:\n     * - Find the closest ancestor that is visible\n     * - Find the visible child of that ancestor\n     * - Get the reference width / inline-size of the element\n     * - Compute the canvas.height as the lesser of the reference width or the\n     *   inline size of the canvas set in CSS\n     * - Compute the canvas.height as half the size of the canvas.width or the\n     *   block size computed by the aspect-ratio property\n     */\n\n    const closestVisibleAncestor = this.parentElement.closest(':not([hidden])');\n    const visibleChild = closestVisibleAncestor.querySelector(':not([hidden])');\n    const containerWidth = visibleChild.offsetWidth;\n\n    const remInPx = getComputedStyle(document.documentElement).fontSize.split(\n      'px',\n    )[0];\n    const componentMaxInlineSize = 30 * remInPx; // 30rem from the style declaration\n    const aspectRatio = 2; // 2 from the canvas style aspect ratio declaration\n\n    canvas.width =\n      containerWidth < componentMaxInlineSize\n        ? containerWidth\n        : componentMaxInlineSize;\n    canvas.height =\n      (containerWidth < componentMaxInlineSize\n        ? containerWidth\n        : componentMaxInlineSize) / aspectRatio;\n\n    canvas.setAttribute('id', 'signature-canvas');\n    canvas.setAttribute('part', 'canvas');\n\n    const uploadControl = document.createElement('div');\n    uploadControl.setAttribute('id', 'signature-upload-wrapper');\n    uploadControl.innerHTML = `\n      <p part=\"upload\">\n        <strong>or</strong>\n        <label>\n          <input type='file' onclick='this.value=null;' id='upload-signature' accept='image/jpeg, image/png, image/svg+xml' />\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\">\n            <rect width=\"16\" height=\"16\" fill=\"#F9F0E7\" rx=\"2\"/>\n            <mask id=\"sign\" width=\"16\" height=\"16\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\" style=\"mask-type:alpha\">\n              <rect width=\"16\" height=\"16\" fill=\"#D9D9D9\" rx=\"2\"/>\n            </mask>\n            <g mask=\"url(#sign)\">\n              <path fill=\"#2D2B2A\" d=\"M0 13.333h16V16H0z\"/>\n            </g>\n            <path fill=\"#2D2B2A\" fill-rule=\"evenodd\" d=\"M2.69 7.346a.23.23 0 0 1 .059-.073.275.275 0 0 1 .284-.034c.07.036.146.064.224.084h.12c0-.012.105-.048.105-.395a.796.796 0 0 1 .211-.61.667.667 0 0 1 .607-.096c.202.061.39.154.555.275.194.138.38.286.555.443.146.134.31.25.489.347l.092.047c.119.06.238-.023.185-.143l-.04-.12a.817.817 0 0 1-.066-.694.675.675 0 0 1 .244-.273.774.774 0 0 1 .364-.12c.324-.028.651 0 .964.083h.026c.027-.861.225-1.83.82-2.523.593-.694 1.478-.993 2.205-.837.726.155 1.307.73 1.307 1.602 0 1.34-.872 2.26-1.915 2.93.471.374.85.835 1.11 1.351.027.046.05.094.065.144h.014a.55.55 0 0 0 .079.203.44.44 0 0 0 .04.18c.002.025.011.05.026.07h-.013c.037.17.041.344.013.515a.955.955 0 0 1-.188.493 1.097 1.097 0 0 1-.433.344 1.346 1.346 0 0 1-1.122.012 2.194 2.194 0 0 1-.846-.67 5.024 5.024 0 0 1-.462-.681h-.026a.502.502 0 0 0-.106-.144.014.014 0 0 1-.01-.003.011.011 0 0 1-.003-.009.035.035 0 0 1-.013-.023.047.047 0 0 1-.011-.017.626.626 0 0 0-.055-.163.24.24 0 0 0-.014-.095h.014a3.477 3.477 0 0 1-.198-.49 6.318 6.318 0 0 1-.278-1.699L7.51 6.51c-.243-.07-.5-.094-.753-.071-.158.024-.198.071-.211.107-.014.036-.04.168.053.359.092.191.171.478.118.658a.45.45 0 0 1-.21.25.66.66 0 0 1-.305.06 1.521 1.521 0 0 1-.568-.19 3.533 3.533 0 0 1-.58-.42 3.54 3.54 0 0 0-.49-.394 1.49 1.49 0 0 0-.409-.203c-.053-.024-.079-.024-.092-.012H4.05c-.014.012-.066.072-.066.275 0 .395-.12.705-.423.813a.813.813 0 0 1-.41.024 1.646 1.646 0 0 1-.343-.12.237.237 0 0 1-.126-.127.208.208 0 0 1 .007-.172Zm5.731.766c.068.204.152.404.251.598.011.053.03.105.053.155.036.068.08.132.132.191.02.05.047.099.08.144.085.152.186.296.303.43.167.22.389.4.647.526a.847.847 0 0 0 .687-.011.655.655 0 0 0 .247-.204.573.573 0 0 0 .11-.287 1.435 1.435 0 0 0-.04-.454h-.014a.496.496 0 0 0-.079-.335.491.491 0 0 0-.119-.191 3.842 3.842 0 0 0-1.017-1.16l-.356.18a.253.253 0 0 1-.193.027.248.248 0 0 1-.088-.041.22.22 0 0 1-.063-.07.219.219 0 0 1-.02-.172.242.242 0 0 1 .113-.14l.172-.083a3.388 3.388 0 0 0-.463-.251l-.58-.24c.022.47.101.935.237 1.388Zm.568-1.555c.24.12.474.252.7.395 1.017-.634 1.81-1.459 1.81-2.63 0-.67-.41-1.053-.912-1.16-.502-.108-1.189.083-1.704.669-.515.586-.7 1.47-.713 2.32v.083c.251.084.515.192.819.323Z\" clip-rule=\"evenodd\"/>\n          </svg>\n          <span>upload a signature</span>\n        </label>\n      </p>\n    `;\n\n    const publishSignatureContainer = document.createElement('p');\n    publishSignatureContainer.innerHTML = `\n      <button data-variant=\"solid\" type=\"button\" name=\"publish\" id=\"publish\">\n        <span>\n          Continue\n        </span>\n        <svg\n          aria-hidden=\"true\"\n          width=\"25\"\n          height=\"24\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M7 12h11m0 0-4.588-4M18 12l-4.588 4\"\n            stroke=\"#fff\"\n            stroke-width=\"1.5\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          />\n        </svg>\n      </button>\n    `;\n\n    wrapper.appendChild(errorMessage);\n    wrapper.appendChild(signatureControls);\n    wrapper.appendChild(canvas);\n    if (this.allowUpload) wrapper.appendChild(uploadControl);\n    wrapper.appendChild(publishSignatureContainer);\n\n    shadow.appendChild(style);\n    shadow.appendChild(wrapper);\n\n    this.core = new SignaturePadCore(canvas);\n\n    // Error Message\n    this.errorMessage = errorMessage.querySelector('#error');\n\n    // Canvas Resize / Sizing\n    if (window) {\n      window.onresize = this.resizeCanvas();\n    }\n\n    // Signature Pad Controls\n    this.clearSignatureButton = signatureControls.querySelector('#clear');\n    this.clearSignatureButton.addEventListener('click', () =>\n      this.clearSignature(),\n    );\n\n    // Upload Controls\n    this.uploadSignatureButton =\n      uploadControl.querySelector('#upload-signature');\n    this.uploadSignatureButton.addEventListener('change', (event) =>\n      this.uploadSignature(event),\n    );\n\n    // Publish Signature\n    this.publishSignatureButton =\n      publishSignatureContainer.querySelector('#publish');\n    this.publishSignatureButton.addEventListener('click', () =>\n      this.publishSignature(),\n    );\n  }\n\n  disconnectedCallback() {\n    this.publishSignatureButton.removeEventListener('click', () =>\n      this.publishSignature(),\n    );\n    this.clearSignatureButton.removeEventListener('click', () =>\n      this.clearSignature(),\n    );\n    this.uploadSignatureButton.removeEventListener('change', (event) =>\n      this.uploadSignature(event),\n    );\n  }\n\n  // Adjust canvas coordinate space taking into account pixel ratio,\n  // to make it look crisp on mobile devices.\n  // This also causes canvas to be cleared.\n  resizeCanvas() {\n    // When zoomed out to less than 100%, for some very strange reason,\n    // some browsers report devicePixelRatio as less than 1\n    // and only part of the canvas is cleared then.\n    const canvas = this.shadowRoot.querySelector('canvas');\n    const ratio = Math.max(window.devicePixelRatio || 1, 1);\n\n    // This part causes the canvas to be cleared\n    canvas.width = (canvas.offsetWidth || canvas.width) * ratio;\n    canvas.height = (canvas.offsetHeight || canvas.height) * ratio;\n    canvas.getContext('2d').scale(ratio, ratio);\n\n    // This library does not listen for canvas changes, so after the canvas is automatically\n    // cleared by the browser, SignaturePad#isEmpty might still return false, even though the\n    // canvas looks empty, because the internal data of this library wasn't cleared. To make sure\n    // that the state of this library is consistent with visual state of the canvas, you\n    // have to clear it manually.\n    // signaturePad.clear();\n\n    // If you want to keep the drawing on resize instead of clearing it you can reset the data.\n    this.core.fromData(this.core.toData());\n  }\n\n  publishSignature() {\n    try {\n      this.resetErrorMessage();\n      const previewImage = this.shadowRoot.querySelector('img');\n      let image = previewImage ? previewImage.src : undefined;\n      if (!image && !this.core.isEmpty()) {\n        image = this.core.toDataURL('image/svg+xml');\n      }\n\n      if (image) {\n        this.dispatchEvent(\n          new CustomEvent('signature-pad.publish', {\n            detail: image,\n          }),\n        );\n      } else {\n        throw new Error(\n          `No signature present. ${\n            this.allowUpload ? 'Draw or upload' : 'Draw'\n          } a signature`,\n        );\n      }\n    } catch (error) {\n      this.handleError(error.message);\n    }\n  }\n\n  resetErrorMessage() {\n    this.errorMessage.textContent = '';\n  }\n\n  handleError(error) {\n    this.errorMessage.textContent = error;\n  }\n\n  clearSignature() {\n    this.resetErrorMessage();\n    const canvas = this.shadowRoot.querySelector('canvas');\n    const img = this.shadowRoot.querySelector('img');\n\n    if (img) {\n      img.remove();\n      canvas.removeAttribute('hidden');\n    }\n\n    this.core.clear();\n  }\n\n  previewUpload(fileData) {\n    const canvas = this.shadowRoot.querySelector('canvas');\n    let img = this.shadowRoot.querySelector('img');\n\n    if (!img) {\n      img = document.createElement('img');\n    }\n\n    img.src = fileData;\n    img.setAttribute('part', 'upload-preview-image');\n    canvas.setAttribute('hidden', true);\n    canvas.insertAdjacentElement('afterend', img);\n  }\n\n  async uploadSignature(event) {\n    try {\n      this.resetErrorMessage();\n      const { files } = event.target;\n\n      // validate file, and convert file to data url\n      const fileData = await SmartFileUpload.retrieve(files);\n\n      // swap out canvas for an image for preview\n      this.previewUpload(fileData);\n    } catch (error) {\n      this.handleError(error.message);\n    }\n  }\n\n  get allowUpload() {\n    return this.hasAttribute('allow-upload');\n  }\n\n  get themeColor() {\n    return this.getAttribute('theme-color') || '#001096';\n  }\n}\n\nif (\n  'customElements' in window &&\n  !window.customElements.get('smileid-signature-pad')\n) {\n  window.customElements.define('smileid-signature-pad', SignaturePad);\n}\n\nexport default SignaturePad;\n"],"names":["SmartFileUpload","numberOfBytes","units","exponent","approx","file","resolve","reject","reader","e","files","SignaturePad","shadow","style","wrapper","errorMessage","signatureControls","canvas","containerWidth","componentMaxInlineSize","aspectRatio","uploadControl","publishSignatureContainer","SignaturePadCore","event","ratio","previewImage","image","error","img","fileData"],"mappings":"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"}