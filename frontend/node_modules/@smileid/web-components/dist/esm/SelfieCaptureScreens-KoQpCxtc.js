import { s as Ii } from "./styles-BOEZtbuc.js";
import "./Navigation-CTjK6tLU.js";
import { p as ko, S as fe, I as Ds } from "./package-B-UwEdv7.js";
import "./PoweredBySmileId-CxbaihMu.js";
function m1() {
  return `
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
    :host {
        --theme-color: ${this.themeColor || "#001096"}
        --color-active: #001096;
        --color-default: #2d2b2a;
        --color-disabled: #848282;
      }

      * {
        font-family: "DM Sans", sans-serif;
      }

      [hidden] {
        display: none !important;
      }

      [disabled] {
        cursor: not-allowed !important;
        filter: grayscale(75%);
      }

      .visually-hidden {
        border: 0;
        clip: rect(1px 1px 1px 1px);
        clip: rect(1px, 1px, 1px, 1px);
        height: auto;
        margin: 0;
        overflow: hidden;
        padding: 0;
        position: absolute;
        white-space: nowrap;
        width: 1px;
      }

      img {
        height: auto;
        max-width: 100%;
        transform: scaleX(-1);
      }

      video {
        background-color: black;
      }

      a {
        color: currentColor;
        text-decoration: none;
      }

      svg {
        max-width: 100%;
      }

      .color-gray {
        color: #797979;
      }

      .color-red {
        color: red;
      }

      .color-richblue {
        color: #4e6577;
      }

      .color-richblue-shade {
        color: #0e1b42;
      }

      .color-digital-blue {
        color: #001096 !important;
      }

      .color-deep-blue {
        color: #001096;
      }

      .center {
        text-align: center;
        margin-left: auto;
        margin-right: auto;
      }

      .font-size-small {
        font-size: 0.75rem;
      }

      .font-size-large {
        font-size: 1.5rem;
      }

      .text-transform-uppercase {
        text-transform: uppercase;
      }

      [id*=-"screen"] {
        min-block-size: 100%;
      }

      [data-variant~="full-width"] {
        inline-size: 100%;
      }

      .flow > * + * {
        margin-top: 1rem;
      }

      .button {
        --button-color: var(--theme-color);
        -webkit-appearance: none;
        appearance: none;
        border-radius: 2.5rem;
        border: 0;
        background-color: transparent;
        color: #fff;
        cursor: pointer;
        display: block;
        font-size: 18px;
        font-weight: 600;
        padding: 0.75rem 1.5rem;
        text-align: center;
      }

      .button:hover,
      .button:focus,
      .button:active {
        --button-color: var(--color-default);
      }

      .button:disabled {
        --button-color: var(--color-disabled);
      }

      .button[data-variant~="solid"] {
        background-color: var(--button-color);
        border: 2px solid var(--button-color);
      }

      .button[data-variant~="outline"] {
        color: var(--button-color);
        border: 2px solid var(--button-color);
      }

      .button[data-variant~="ghost"] {
        padding: 0px;
        color: var(--button-color);
        background-color: transparent;
      }

      .icon-btn {
        appearance: none;
        background: none;
        border: none;
        color: hsl(0deg 0% 94%);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 4px 8px;
      }
      .justify-right {
        justify-content: end !important;
      }
      .nav {
        display: flex;
        justify-content: space-between;
      }

      .back-wrapper {
        display: flex;
        align-items: center;
      }

      .back-button {
        display: block !important;
      }
      .back-button-text {
        font-size: 11px;
        line-height: 11px;
        color: rgb(21, 31, 114);
      }
      .section {
        border: 1px solid #f4f4f4;
        border-radius: 0.5rem;
        margin-left: auto;
        margin-right: auto;
        max-width: 35ch;
        padding: 1rem;
      }

      .selfie-capture-review-image {
        overflow: hidden;
        aspect-ratio: 1/1;
      }

      #review-image {
        scale: 1.75;
      }

      @media (max-aspect-ratio: 1/1) {
        #review-image {
          transform: scaleX(-1) translateY(-10%);
        }
      }

      .tips,
      .powered-by {
        align-items: center;
        border-radius: 0.25rem;
        color: #4e6577;
        display: flex;
        justify-content: center;
        letter-spacing: 0.075em;
      }

      .powered-by {
        box-shadow: 0px 2.57415px 2.57415px rgba(0, 0, 0, 0.06);
        display: inline-flex;
        font-size: 0.5rem;
      }

      .tips {
        margin-left: auto;
        margin-right: auto;
        max-width: 17rem;
      }

      .tips > * + *,
      .powered-by > * + * {
        display: inline-block;
        margin-left: 0.5em;
      }

      .powered-by .company {
        color: #18406d;
        font-weight: 700;
        letter-spacing: 0.15rem;
      }

      .logo-mark {
        background-color: #004071;
        display: inline-block;
        padding: 0.25em 0.5em;
      }

      .logo-mark svg {
        height: auto;
        justify-self: center;
        width: 0.75em;
      }

      #selfie-capture-instruction-screen {
        box-sizing: border-box;
        height: 100%;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        max-block-size: 100%;
        max-inline-size: 40ch;
      }

      #selfie-capture-instruction-screen header p {
        margin-block: 0 !important;
      }

      header h1 {
        font-size: 1.25rem;
      }

      .instructions {
        display: flex;
        align-items: center;
        text-align: initial;
        gap: 0.5rem;
      }

      .instructions svg {
        flex-shrink: 0;
        margin-inline-end: 0.25rem;
      }

      .instructions p {
        margin-block: 0;
      }

      h1 {
        color: ${this.themeColor};
        text-align: center;
        margin-top: 0;
        margin-bottom: 1rem;

        /* h1 */
        font-size: 1.5rem;
        font-style: normal;
        font-weight: 700;
        line-height: 36px; /* 150% */
      }

      .controls {
        width: 100%;
        margin-top: 1rem;
      }

      .content-root {
        height: 100%;
        display: flex;
        align-items: center;
        flex-direction: column;
      }

      .content-header, .content-body, .content-footer {
        width: 100%;
      }

      .content-body {
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
      }

      .tip-header {
        color: ${this.themeColor};
      }

      .tip-body {
        text-align: justify;
      }
    </style>
    ${Ii(this.themeColor)}
    <div id="selfie-capture-instruction-screen" class="center">
    <div class="content-root">
      <div class="content-header">
        <smileid-navigation theme-color=${this.themeColor} ${this.hideBack ? "hide-back" : ""} ${this.showNavigation ? "" : "hidden"}></smileid-navigation>
      </div>
      <div class="content-body">
        <header>
          <svg xmlns="http://www.w3.org/2000/svg" width="65" height="91" viewBox="0 0 65 91" fill="none">
            <g clip-path="url(#clip0_604_692)">
              <path d="M36.6833 60.4888C26.9272 54.8682 13.1977 54.3026 5.53473 59.2162C-2.12824 64.1298 -0.851078 72.9318 8.05358 78.9413L17.8806 85.1274L51.5126 69.6797L36.7188 60.4534H36.6478L36.6833 60.4888Z" fill="#3B3837"/>
              <path d="M27.5624 90.5007L17.9127 85.0923C17.9127 85.0923 17.9127 74.6288 18.1256 70.4929C18.232 68.2305 23.2342 37.441 44.1655 34.6484C48.1389 34.1182 56.8662 40.5871 56.8662 40.5871" fill="#91190F"/>
              <path d="M27.5624 90.5007L17.9127 85.0923C17.9127 85.0923 17.9127 74.6288 18.1256 70.4929C18.232 68.2305 23.2342 37.441 44.1655 34.6484C48.1389 34.1182 56.8662 40.5871 56.8662 40.5871" fill="#3B3837"/>
              <path d="M64.0705 51.9698C63.8931 41.0114 56.2301 36.5927 46.7224 42.0366C37.0727 47.5511 29.055 60.9486 28.3454 72.2958L27.5649 90.4655L63.7512 69.5739L64.1769 51.8991H64.106L64.0705 51.9698Z" fill="#7ECAF0"/>
              <path d="M44.2729 28.3906L30.0112 36.521L30.4015 19.73L44.6631 11.5643L44.2729 28.3906Z" fill="#F8CEEB"/>
              <path d="M53.959 33.8711L39.6974 42.0368L40.0876 25.2104L54.3493 17.0447L53.959 33.8711Z" fill="#7ECAF0"/>
              <path d="M44.6631 11.5643L54.3483 17.0434L40.0866 25.2092L39.6964 42.0356L30.0112 36.521L30.4015 19.73L44.6631 11.5643Z" fill="#3B3837"/>
              <path d="M53.0767 51.0497L59.9591 46.8785L59.9237 36.9099L64.4647 34.3294L64.5002 49.4236L53.0767 56.2461V51.0497Z" fill="#FF5805"/>
              <path d="M54.0676 54.5139L63.5044 48.8933L63.469 36.026L60.9146 37.4754V47.4439L54.0676 51.5798V54.5139Z" fill="#FF5805"/>
              <path d="M30.4053 52.2515L34.9463 49.6356V60.8414L44.0638 55.1855V60.4172L30.4407 68.7244L30.4053 52.2515Z" fill="#FF5805"/>
              <path d="M31.4317 66.9921L43.0681 59.8869V56.9529L33.9506 62.6088V51.3323L31.3962 52.817L31.4317 66.9921Z" fill="#FF5805"/>
              <path d="M30.4053 19.7312L42.5383 13.0148V18.1759L34.9463 22.3471V32.4924L30.4407 35.073L30.4053 19.7312Z" fill="#FF5805"/>
              <path d="M31.3962 33.377L33.9506 31.9276V21.7823L41.5426 17.6111V14.6771L31.3962 20.2976V28.7815V33.377Z" fill="#FF5805"/>
              <path d="M59.9223 8.27746L53.5365 11.9538V6.79277L64.4279 0.500549L64.4633 16.5846L59.9578 19.1651L59.9223 8.27746Z" fill="#FF5805"/>
              <path d="M60.9142 17.4682L63.504 16.0189L63.4685 2.19722L54.4929 7.35826L54.5284 10.2569L60.9142 6.58057V17.4682Z" fill="#FF5805"/>
            </g>
            <defs>
              <clipPath id="clip0_604_692">
                <rect width="64" height="90" fill="white" transform="translate(0.5 0.5)"/>
              </clipPath>
            </defs>
          </svg>
          <h1 class='title-color font-bold'>Next, we'll take a quick selfie</h1>
        </header>
    <div class="instructions-wrapper">
      <div class="instructions">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="38"
          height="38"
          viewBox="0 0 38 38"
          fill="none"
        >
          <g clip-path="url(#clip0_604_670)">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M31.8569 19C31.8569 21.5428 31.1029 24.0285 29.6902 26.1428C28.2774 28.2571 26.2695 29.9049 23.9203 30.878C21.571 31.8511 18.986 32.1057 16.492 31.6096C13.9981 31.1136 11.7072 29.8891 9.90919 28.091C8.11115 26.293 6.88668 24.0022 6.3906 21.5082C5.89452 19.0143 6.14913 16.4292 7.12222 14.08C8.09531 11.7307 9.74318 9.72279 11.8574 8.31008C13.9717 6.89737 16.4574 6.14334 19.0002 6.14334C22.41 6.14334 25.6802 7.49788 28.0913 9.90897C30.5024 12.3201 31.8569 15.5902 31.8569 19Z"
              fill="${this.themeColor}"
            />
            <path
              d="M19.6064 4.5419H18.394L18.9912 0L19.6064 4.5419Z"
              fill="${this.themeColor}"
            />
            <path
              d="M26.7541 6.77667L25.7046 6.17048L28.4913 2.54239L26.7541 6.77667Z"
              fill="${this.themeColor}"
            />
            <path
              d="M31.8298 12.2957L31.2236 11.2462L35.4489 9.49097L31.8298 12.2957Z"
              fill="${this.themeColor}"
            />
            <path
              d="M33.4674 19.6062V18.3938L38.0003 18.9909L33.4674 19.6062Z"
              fill="${this.themeColor}"
            />
            <path
              d="M31.2236 26.7538L31.8298 25.7043L35.4579 28.491L31.2236 26.7538Z"
              fill="${this.themeColor}"
            />
            <path
              d="M25.7046 31.8295L26.7541 31.2233L28.5094 35.4486L25.7046 31.8295Z"
              fill="${this.themeColor}"
            />
            <path
              d="M18.394 33.4671H19.6064L19.0093 38L18.394 33.4671Z"
              fill="${this.themeColor}"
            />
            <path
              d="M11.2464 31.2233L12.2959 31.8295L9.50928 35.4576L11.2464 31.2233Z"
              fill="${this.themeColor}"
            />
            <path
              d="M6.17068 25.7043L6.77687 26.7538L2.55164 28.509L6.17068 25.7043Z"
              fill="${this.themeColor}"
            />
            <path
              d="M4.54215 18.3938V19.6062L0.000244141 19.009L4.54215 18.3938Z"
              fill="${this.themeColor}"
            />
            <path
              d="M6.77689 11.2462L6.1707 12.2957L2.5426 9.50903L6.77689 11.2462Z"
              fill="${this.themeColor}"
            />
            <path
              d="M12.296 6.17047L11.2464 6.77666L9.49121 2.55142L12.296 6.17047Z"
              fill="${this.themeColor}"
            />
          </g>
          <defs>
            <clipPath id="clip0_604_670">
              <rect
                width="38"
                height="38"
                fill="white"
                transform="translate(0.000244141)"
              />
            </clipPath>
          </defs>
        </svg>
        <div class="instruction">
          <p class="text-base title-color font-bold tip-header">Good Light</p>
          <p class="tip-body">
            Make sure you are in a well-lit environment.
          </p>
        </div>
      </div>
      <div class="instructions">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="38"
          height="36"
          viewBox="0 0 38 36"
          fill="none"
        >
          <g clip-path="url(#clip0_604_672)">
            <path
              d="M36.7211 12.6391H1.22537C1.06275 13.0909 0.910962 13.5427 0.77002 14.0055H37.1764C37.0463 13.5427 36.8946 13.0909 36.7211 12.6391Z"
              fill="${this.themeColor}"
            />
            <path
              d="M37.3716 14.7438H0.574875C0.466458 15.1625 0.379725 15.5813 0.303833 16.011H37.6426C37.5667 15.5813 37.48 15.1625 37.3716 14.7438Z"
              fill="${this.themeColor}"
            />
            <path
              d="M37.7727 16.8485H0.173703C0.119494 17.2342 0.0869685 17.6198 0.0544434 18.0055H37.892C37.8594 17.6198 37.8269 17.2342 37.7727 16.8485Z"
              fill="${this.themeColor}"
            />
            <path
              d="M37.9462 19.4711C37.9462 19.2948 37.9462 19.1295 37.9353 18.9532H0.0110865C0.000244802 19.1295 0.000244141 19.2948 0.000244141 19.4711C0.000244141 19.6474 0.000244802 19.8347 0.0110865 20.011H37.9353C37.9462 19.8347 37.9462 19.6474 37.9462 19.4711Z"
              fill="${this.themeColor}"
            />
            <path
              d="M37.8811 21.0579H0.0653076C0.086991 21.3774 0.119515 21.697 0.162882 22.0055H37.7836C37.8269 21.697 37.8595 21.3774 37.8811 21.0579Z"
              fill="${this.themeColor}"
            />
            <path
              d="M37.5992 23.1625H0.347168C0.401376 23.449 0.466426 23.7245 0.531477 24H37.4149C37.48 23.7245 37.545 23.449 37.5992 23.1625Z"
              fill="${this.themeColor}"
            />
            <path
              d="M37.0788 25.2672H0.867554C0.954287 25.5096 1.03018 25.7631 1.11691 26.0055H36.8295C36.9162 25.7631 37.0029 25.5096 37.0788 25.2672Z"
              fill="${this.themeColor}"
            />
            <path
              d="M36.2874 27.3719H1.65906L1.95178 28H35.9947L36.2874 27.3719Z"
              fill="${this.themeColor}"
            />
            <path
              d="M35.2032 29.4766H2.75403C2.84799 29.6529 2.95641 29.8292 3.07928 30.0055H34.878L35.2032 29.4766Z"
              fill="${this.themeColor}"
            />
            <path
              d="M33.7396 31.5813H4.20679L4.54288 32H33.4035L33.7396 31.5813Z"
              fill="${this.themeColor}"
            />
            <path
              d="M31.7989 33.6859H6.14746L6.49439 33.9945H31.452L31.7989 33.6859Z"
              fill="${this.themeColor}"
            />
            <path
              d="M29.0993 35.7906H8.84705L9.18314 36H28.7632L29.0993 35.7906Z"
              fill="${this.themeColor}"
            />
            <path
              d="M34.2384 8.01102C33.8914 7.53719 33.5228 7.07438 33.1325 6.63361C29.8258 2.60055 24.6977 0 18.9407 0C12.891 0 7.53525 2.86501 4.25021 7.26171H4.28274C4.08759 7.51515 3.89244 7.75757 3.70813 8.01102H34.2384Z"
              fill="${this.themeColor}"
            />
            <path
              d="M34.531 8.44077H3.41533C3.06839 8.94765 2.74314 9.47658 2.43958 10.0165H35.5068C35.2124 9.47215 34.8866 8.94597 34.531 8.44077Z"
              fill="${this.themeColor}"
            />
            <path
              d="M35.7887 10.5344H2.15776C1.9084 11.0193 1.68072 11.5151 1.47473 12.011H36.4717C36.2657 11.5151 36.0381 11.0193 35.7887 10.5344Z"
              fill="${this.themeColor}"
            />
          </g>
          <defs>
            <clipPath id="clip0_604_672">
              <rect
                width="37.9459"
                height="36"
                fill="white"
                transform="translate(0.000244141)"
              />
            </clipPath>
          </defs>
        </svg>
        <div class="instruction">
          <p class="text-base title-color font-bold tip-header">Clear Image</p>
          <p class="tip-body">
            Hold your phone steady so the selfie is clear and sharp.
          </p>
        </div>
      </div>
      <div class="instructions">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="38"
          height="38"
          viewBox="0 0 38 38"
          fill="none"
        >
          <path
            d="M18.9496 0C18.9496 0 13.9842 6.03205e-06 11.1469 1.09139C8.30957 2.18277 8.41092 4.46476 7.80292 6.15145C7.28787 7.56786 6.91455 9.02989 6.68824 10.517C6.68824 10.517 4.86424 11.3107 3.24291 12.2036C2.43378 12.6113 1.72475 13.1862 1.16487 13.8886C0.604986 14.5909 0.207618 15.404 0.000244141 16.2715C0.506911 21.4308 6.68824 23.6136 6.68824 23.6136C6.67321 21.7242 6.77473 19.8356 6.99225 17.9582C7.29625 16.47 7.90424 15.7754 10.4376 14.6841C12.9709 13.5927 18.9496 13.1958 18.9496 13.1958C18.9496 13.1958 24.9282 13.5927 27.4616 14.6841C29.9949 15.7754 30.7042 16.47 31.0082 17.9582C31.2258 19.8356 31.3273 21.7242 31.3122 23.6136C31.3122 23.6136 37.3922 21.4308 38.0002 16.2715C37.5126 14.5484 36.3463 13.0853 34.7576 12.2036L31.2109 10.517C30.9867 9.03874 30.6479 7.57936 30.1976 6.15145C29.4882 4.46476 28.4749 1.78591 26.8536 1.09139C25.2322 0.396873 18.9496 0 18.9496 0Z"
            fill="${this.themeColor}"
          />
          <path
            d="M10.7416 21.53C12.8058 21.6524 14.8473 22.0188 16.8216 22.6214C18.6235 23.1643 20.5642 23.0588 22.2936 22.3238C24.8269 21.2324 27.5629 21.4308 30.1976 21.6292C30.7849 21.6319 31.3675 21.7326 31.9202 21.9269C32.4269 22.1253 32.4269 22.423 32.4269 23.2167C32.14 24.7237 31.6635 26.19 31.0083 27.5822C30.7799 28.1169 30.4019 28.5776 29.9179 28.9111C29.4338 29.2446 28.8634 29.4375 28.2723 29.4674C27.2359 29.6525 26.1773 29.6859 25.1309 29.5666C24.279 29.5405 23.4506 29.2863 22.736 28.8315C22.0214 28.3766 21.4478 27.7387 21.0776 26.987C20.8887 26.3594 20.6161 25.7589 20.2669 25.201C19.8616 24.705 19.5576 24.5065 19.0509 24.6057C18.7188 24.5693 18.3842 24.6489 18.1061 24.8304C17.828 25.0119 17.6243 25.2837 17.5309 25.5979C16.9229 27.0862 16.4162 28.6736 14.6936 29.2689C13.939 29.5055 13.1548 29.6391 12.3629 29.6658C11.2345 29.6928 10.1081 29.5591 9.01892 29.2689C7.39759 28.7728 6.89092 27.3838 6.38425 25.8956C6.24296 25.2819 6.03928 24.6836 5.77625 24.1096C5.57359 23.5143 5.37092 23.1175 5.67492 22.5222C5.97892 21.9269 6.18159 22.0261 6.68825 21.9269C8.02604 21.6866 9.38168 21.5538 10.7416 21.53ZM12.0589 28.8721C14.4909 28.5744 14.8963 28.5744 15.6056 27.3838C16.0105 26.8072 16.3184 26.1708 16.5176 25.4987C16.9229 24.3081 16.7203 23.7128 15.6056 23.2167C13.2959 22.2331 10.6949 22.127 8.30959 22.9191C8.07105 23.0198 7.85723 23.1693 7.68248 23.3575C7.50772 23.5458 7.37604 23.7684 7.29626 24.0105C7.12045 24.8478 7.19957 25.7172 7.52382 26.5109C7.84807 27.3046 8.40315 27.9876 9.12025 28.4752C10.0603 28.8088 11.0617 28.9441 12.0589 28.8721ZM25.7389 28.9713C26.8173 28.9934 27.8881 28.7904 28.8802 28.376C30.7042 27.5823 30.7043 25.7963 30.7043 24.1096C30.7043 22.423 29.9949 22.9191 29.2856 22.7206C27.3226 22.2044 25.2509 22.2387 23.3069 22.8198C23.0246 22.8282 22.7476 22.8972 22.4956 23.0221C22.2436 23.1469 22.0228 23.3245 21.8487 23.5423C21.6746 23.7601 21.5516 24.0127 21.4884 24.2822C21.4252 24.5517 21.4233 24.8315 21.4829 25.1018C21.6856 27.3838 23.1043 28.5744 25.7389 28.9713Z"
            fill="${this.themeColor}"
          />
          <path
            d="M11.9576 24.4073C10.8429 24.4073 9.93091 25.1018 9.93091 25.7963V26.2924C9.9546 26.4062 10.0183 26.5082 10.1109 26.5807C10.2034 26.6532 10.319 26.6916 10.4376 26.6893C10.8429 26.6893 11.0456 26.4909 11.0456 26.2924V25.7963C11.0456 25.4987 11.4509 25.201 11.9576 25.201C12.4642 25.201 12.8696 25.4987 12.8696 25.7963V26.2924C12.8696 26.4909 13.1736 26.6893 13.4776 26.6893C13.5961 26.6916 13.7117 26.6532 13.8043 26.5807C13.8969 26.5082 13.9606 26.4062 13.9842 26.2924V25.7963C13.9842 25.1018 13.0722 24.4073 11.9576 24.4073Z"
            fill="${this.themeColor}"
          />
          <path
            d="M26.1442 24.4073C24.9282 24.4073 24.0162 25.1018 24.0162 25.7963V26.2924C24.0162 26.4909 24.3202 26.6893 24.6242 26.6893C24.9282 26.6893 25.2322 26.4909 25.2322 26.2924V25.7963C25.2322 25.4987 25.6376 25.201 26.1442 25.201C26.6509 25.201 27.0562 25.4987 27.0562 25.7963V26.2924C27.0799 26.4062 27.1436 26.5082 27.2362 26.5807C27.3287 26.6532 27.4444 26.6916 27.5629 26.6893C27.8669 26.6893 28.1709 26.4909 28.1709 26.2924V25.7963C28.1709 25.1018 27.2589 24.4073 26.1442 24.4073Z"
            fill="${this.themeColor}"
          />
        </svg>
        <div class="instruction">
          <p class="text-base title-color font-bold tip-header">Remove Obstructions</p>
          <p class="tip-body">
            Remove anything that covers your face, such as glasses, masks, and hats.
          </p>
        </div>
      </div>
      <div class="instructions">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="38"  height="38"  viewBox="0 0 24 24"  fill="none"  stroke="${this.themeColor}"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-mood-happy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 9l.01 0" /><path d="M15 9l.01 0" /><path d="M8 13a4 4 0 1 0 8 0h-8" /></svg>
        <div class="instruction">
          <p class="text-base title-color font-bold tip-header">Wide Smile</p>
          <p class="tip-body">
            When asked to smile, give a wide smile, showing your teeth.
          </p>
        </div>
      </div>
    </div>
    <section class="controls">
      <button id='allow' data-variant='solid full-width' class='button theme-background'>
        Allow
      </button>
    </section>
    ${this.hideAttribution ? "" : `
        <div class="content-footer">
          <powered-by-smile-id></powered-by-smile-id>
        </div>
    `}
  </div>
  </div>
</div>
  `;
}
class g1 extends HTMLElement {
  constructor() {
    super(), this.templateString = m1.bind(this), this.render = () => this.templateString(), this.attachShadow({ mode: "open" });
  }
  connectedCallback() {
    this.pages = [];
    const t = document.createElement("template");
    t.innerHTML = this.render(), this.shadowRoot.appendChild(t.content.cloneNode(!0)), this.allowButton = this.shadowRoot.querySelector("#allow"), this.navigation = this.shadowRoot.querySelector("smileid-navigation"), this.navigation.addEventListener("navigation.back", () => {
      this.handleBackEvents();
    }), this.allowButton && this.allowButton.addEventListener("click", () => {
      this.dispatchEvent(
        new CustomEvent("selfie-capture-instructions.capture")
      );
    }), this.navigation.addEventListener(
      "navigation.close",
      () => {
        this.handleCloseEvents();
      },
      !1
    );
  }
  get hideBack() {
    return this.hasAttribute("hide-back");
  }
  get themeColor() {
    return this.getAttribute("theme-color") || "#001096";
  }
  get hideAttribution() {
    return this.hasAttribute("hide-attribution");
  }
  handleBackEvents() {
    this.dispatchEvent(
      new CustomEvent("selfie-capture-instructions.cancelled")
    );
  }
  get showNavigation() {
    return this.hasAttribute("show-navigation");
  }
  handleCloseEvents() {
    this.dispatchEvent(new CustomEvent("selfie-capture-instructions.close"));
  }
  static get observedAttributes() {
    return ["show-navigation"];
  }
}
"customElements" in window && !window.customElements.get("selfie-capture-instructions") && window.customElements.define(
  "selfie-capture-instructions",
  g1
);
function v1() {
  return `
    <style>
      .retake-photo.button[data-variant~="ghost"] {
        color: #FF5805;
      }

      #selfie-capture-review-screen {
        display: flex;
        flex-direction: column;
        padding: 1rem;
      }

      #selfie-capture-review-screen .selfie-review-container.landscape {
        height: auto;
      }

      #selfie-capture-review-screen header p {
        margin-block: 0 !important;
      }

      .selfie-review-container.portrait {
        width: 100%;
        position: relative;
        height: calc(200px * 1.4);
      }

      .selfie-review-container.portrait img {
        width: calc(213px + 0.9rem);
        height: 100%;
        position: absolute;
        top: 239px;
        left: 161px;
        padding-bottom: calc((214px * 1.4) / 3);
        padding-top: calc((191px * 1.4) / 3);
        object-fit: cover;
    
        transform: translateX(-50%) translateY(-50%);
        z-index: 1;
        block-size: 100%;
      }

      h1 {
        color: var(--web-digital-blue, #001096);
        text-align: center;
        /* h1 */
        font-size: 1.25rem;
        font-style: normal;
        font-weight: 700;
        line-height: 36px; /* 150% */
        margin-top: 0;
      }
    </style>
    ${Ii(this.themeColor)}
    <div id='selfie-capture-review-screen' class='center'>
    <smileid-navigation ${this.showNavigation ? "show-navigation" : ""} hide-back></smileid-navigation>
    <h1 class="header-title title-color font-bold">
      Is your whole face clear?
    </h1>
    <div class='section | flow'>
      <div class='selfie-review-container ${this.isPortraitCaptureView ? "portrait" : "landscape"}'>
        ${this.imageSrc ? `<img
        alt='your ID card'
        id='document-capture-review-image'
        src='${this.imageSrc}'
        width='396'
        style='max-width: 90%;${this.shouldMirror ? " transform: scaleX(-1);" : ""}'
      />` : ""}
      </div>
      <div class='flow action-buttons'>
        <button data-variant='solid full-width' class='button' type='button' id='select-id-image'>
          Yes, use this
        </button>
        <button data-variant='ghost full-width' class='button  retake-photo' type='button' id='re-capture-image'>
          No, Retake Selfie
        </button>
      </div>
      ${this.hideAttribution ? "" : `
        <powered-by-smile-id></powered-by-smile-id>
      `}
    </div>
  </div>
  `;
}
class _1 extends HTMLElement {
  constructor() {
    super(), this.templateString = v1.bind(this), this.render = () => this.templateString(), this.attachShadow({ mode: "open" });
  }
  connectedCallback() {
    const t = document.createElement("template");
    t.innerHTML = this.render(), this.shadowRoot.innerHTML = "", this.shadowRoot.appendChild(t.content.cloneNode(!0)), this.setUpEventListeners();
  }
  static get observedAttributes() {
    return [
      "hide-back-to-host",
      "show-navigation",
      "data-image",
      "mirror-image"
    ];
  }
  get hideBack() {
    return this.hasAttribute("hide-back-to-host");
  }
  get showNavigation() {
    return this.hasAttribute("show-navigation");
  }
  get themeColor() {
    return this.getAttribute("theme-color") || "#001096";
  }
  get hideAttribution() {
    return this.hasAttribute("hide-attribution");
  }
  get imageSrc() {
    return this.getAttribute("data-image");
  }
  get shouldMirror() {
    return this.getAttribute("mirror-image") !== "false";
  }
  get title() {
    return this.getAttribute("title") || "Submit Front of ID";
  }
  handleBackEvents() {
    this.dispatchEvent(new CustomEvent("selfie-capture-review.cancelled"));
  }
  handleCloseEvents() {
    this.dispatchEvent(new CustomEvent("selfie-capture-review.close"));
  }
  attributeChangedCallback(t) {
    switch (t) {
      case "data-image":
      case "hide-back-to-host":
      case "show-navigation":
      case "mirror-image":
        this.shadowRoot.innerHTML = this.render(), this.setUpEventListeners();
        break;
    }
  }
  setUpEventListeners() {
    this.selectImage = this.shadowRoot.querySelector("#select-id-image"), this.reCaptureImage = this.shadowRoot.querySelector("#re-capture-image"), this.navigation = this.shadowRoot.querySelector("smileid-navigation"), this.navigation.addEventListener("navigation.back", () => {
      this.handleBackEvents();
    }), this.navigation.addEventListener("navigation.close", () => {
      this.handleCloseEvents();
    }), this.selectImage.addEventListener("click", () => {
      this.dispatchEvent(
        new CustomEvent("selfie-capture-review.accepted", {
          detail: {}
        })
      );
    }), this.reCaptureImage.addEventListener("click", () => {
      this.dispatchEvent(
        new CustomEvent("selfie-capture-review.rejected", {
          detail: {}
        })
      );
    });
  }
}
"customElements" in window && !customElements.get("selfie-capture-review") && window.customElements.define("selfie-capture-review", _1);
var Yr, U, Mc, Ic, Ut, Us, Fc, Rc, Oc, Ao, Zn, Yn, jr = {}, Pc = [], y1 = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, Kr = Array.isArray;
function ot(e, t) {
  for (var r in t) e[r] = t[r];
  return e;
}
function xo(e) {
  e && e.parentNode && e.parentNode.removeChild(e);
}
function dt(e, t, r) {
  var i, n, o, s = {};
  for (o in t) o == "key" ? i = t[o] : o == "ref" ? n = t[o] : s[o] = t[o];
  if (arguments.length > 2 && (s.children = arguments.length > 3 ? Yr.call(arguments, 2) : r), typeof e == "function" && e.defaultProps != null) for (o in e.defaultProps) s[o] === void 0 && (s[o] = e.defaultProps[o]);
  return Pr(e, s, i, n, null);
}
function Pr(e, t, r, i, n) {
  var o = { type: e, props: t, key: r, ref: i, __k: null, __: null, __b: 0, __e: null, __c: null, constructor: void 0, __v: n ?? ++Mc, __i: -1, __u: 0 };
  return n == null && U.vnode != null && U.vnode(o), o;
}
function It(e) {
  return e.children;
}
function Nr(e, t) {
  this.props = e, this.context = t;
}
function nr(e, t) {
  if (t == null) return e.__ ? nr(e.__, e.__i + 1) : null;
  for (var r; t < e.__k.length; t++) if ((r = e.__k[t]) != null && r.__e != null) return r.__e;
  return typeof e.type == "function" ? nr(e) : null;
}
function Nc(e) {
  var t, r;
  if ((e = e.__) != null && e.__c != null) {
    for (e.__e = e.__c.base = null, t = 0; t < e.__k.length; t++) if ((r = e.__k[t]) != null && r.__e != null) {
      e.__e = e.__c.base = r.__e;
      break;
    }
    return Nc(e);
  }
}
function Bs(e) {
  (!e.__d && (e.__d = !0) && Ut.push(e) && !wi.__r++ || Us != U.debounceRendering) && ((Us = U.debounceRendering) || Fc)(wi);
}
function wi() {
  for (var e, t, r, i, n, o, s, a = 1; Ut.length; ) Ut.length > a && Ut.sort(Rc), e = Ut.shift(), a = Ut.length, e.__d && (r = void 0, n = (i = (t = e).__v).__e, o = [], s = [], t.__P && ((r = ot({}, i)).__v = i.__v + 1, U.vnode && U.vnode(r), To(t.__P, r, i, t.__n, t.__P.namespaceURI, 32 & i.__u ? [n] : null, o, n ?? nr(i), !!(32 & i.__u), s), r.__v = i.__v, r.__.__k[r.__i] = r, $c(o, r, s), r.__e != n && Nc(r)));
  wi.__r = 0;
}
function Dc(e, t, r, i, n, o, s, a, c, l, h) {
  var u, d, f, m, y, p, _ = i && i.__k || Pc, g = t.length;
  for (c = b1(r, t, _, c, g), u = 0; u < g; u++) (f = r.__k[u]) != null && (d = f.__i == -1 ? jr : _[f.__i] || jr, f.__i = u, p = To(e, f, d, n, o, s, a, c, l, h), m = f.__e, f.ref && d.ref != f.ref && (d.ref && So(d.ref, null, f), h.push(f.ref, f.__c || m, f)), y == null && m != null && (y = m), 4 & f.__u || d.__k === f.__k ? c = Uc(f, c, e) : typeof f.type == "function" && p !== void 0 ? c = p : m && (c = m.nextSibling), f.__u &= -7);
  return r.__e = y, c;
}
function b1(e, t, r, i, n) {
  var o, s, a, c, l, h = r.length, u = h, d = 0;
  for (e.__k = new Array(n), o = 0; o < n; o++) (s = t[o]) != null && typeof s != "boolean" && typeof s != "function" ? (c = o + d, (s = e.__k[o] = typeof s == "string" || typeof s == "number" || typeof s == "bigint" || s.constructor == String ? Pr(null, s, null, null, null) : Kr(s) ? Pr(It, { children: s }, null, null, null) : s.constructor == null && s.__b > 0 ? Pr(s.type, s.props, s.key, s.ref ? s.ref : null, s.__v) : s).__ = e, s.__b = e.__b + 1, a = null, (l = s.__i = w1(s, r, c, u)) != -1 && (u--, (a = r[l]) && (a.__u |= 2)), a == null || a.__v == null ? (l == -1 && (n > h ? d-- : n < h && d++), typeof s.type != "function" && (s.__u |= 4)) : l != c && (l == c - 1 ? d-- : l == c + 1 ? d++ : (l > c ? d-- : d++, s.__u |= 4))) : e.__k[o] = null;
  if (u) for (o = 0; o < h; o++) (a = r[o]) != null && (2 & a.__u) == 0 && (a.__e == i && (i = nr(a)), Hc(a, a));
  return i;
}
function Uc(e, t, r) {
  var i, n;
  if (typeof e.type == "function") {
    for (i = e.__k, n = 0; i && n < i.length; n++) i[n] && (i[n].__ = e, t = Uc(i[n], t, r));
    return t;
  }
  e.__e != t && (t && e.type && !r.contains(t) && (t = nr(e)), r.insertBefore(e.__e, t || null), t = e.__e);
  do
    t = t && t.nextSibling;
  while (t != null && t.nodeType == 8);
  return t;
}
function Bc(e, t) {
  return t = t || [], e == null || typeof e == "boolean" || (Kr(e) ? e.some(function(r) {
    Bc(r, t);
  }) : t.push(e)), t;
}
function w1(e, t, r, i) {
  var n, o, s, a = e.key, c = e.type, l = t[r], h = l != null && (2 & l.__u) == 0;
  if (l === null && e.key == null || h && a == l.key && c == l.type) return r;
  if (i > (h ? 1 : 0)) {
    for (n = r - 1, o = r + 1; n >= 0 || o < t.length; ) if ((l = t[s = n >= 0 ? n-- : o++]) != null && (2 & l.__u) == 0 && a == l.key && c == l.type) return s;
  }
  return -1;
}
function $s(e, t, r) {
  t[0] == "-" ? e.setProperty(t, r ?? "") : e[t] = r == null ? "" : typeof r != "number" || y1.test(t) ? r : r + "px";
}
function ai(e, t, r, i, n) {
  var o, s;
  e: if (t == "style") if (typeof r == "string") e.style.cssText = r;
  else {
    if (typeof i == "string" && (e.style.cssText = i = ""), i) for (t in i) r && t in r || $s(e.style, t, "");
    if (r) for (t in r) i && r[t] == i[t] || $s(e.style, t, r[t]);
  }
  else if (t[0] == "o" && t[1] == "n") o = t != (t = t.replace(Oc, "$1")), s = t.toLowerCase(), t = s in e || t == "onFocusOut" || t == "onFocusIn" ? s.slice(2) : t.slice(2), e.l || (e.l = {}), e.l[t + o] = r, r ? i ? r.u = i.u : (r.u = Ao, e.addEventListener(t, o ? Yn : Zn, o)) : e.removeEventListener(t, o ? Yn : Zn, o);
  else {
    if (n == "http://www.w3.org/2000/svg") t = t.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
    else if (t != "width" && t != "height" && t != "href" && t != "list" && t != "form" && t != "tabIndex" && t != "download" && t != "rowSpan" && t != "colSpan" && t != "role" && t != "popover" && t in e) try {
      e[t] = r ?? "";
      break e;
    } catch {
    }
    typeof r == "function" || (r == null || r === !1 && t[4] != "-" ? e.removeAttribute(t) : e.setAttribute(t, t == "popover" && r == 1 ? "" : r));
  }
}
function js(e) {
  return function(t) {
    if (this.l) {
      var r = this.l[t.type + e];
      if (t.t == null) t.t = Ao++;
      else if (t.t < r.u) return;
      return r(U.event ? U.event(t) : t);
    }
  };
}
function To(e, t, r, i, n, o, s, a, c, l) {
  var h, u, d, f, m, y, p, _, g, x, T, S, k, F, $, j, we, Q = t.type;
  if (t.constructor != null) return null;
  128 & r.__u && (c = !!(32 & r.__u), o = [a = t.__e = r.__e]), (h = U.__b) && h(t);
  e: if (typeof Q == "function") try {
    if (_ = t.props, g = "prototype" in Q && Q.prototype.render, x = (h = Q.contextType) && i[h.__c], T = h ? x ? x.props.value : h.__ : i, r.__c ? p = (u = t.__c = r.__c).__ = u.__E : (g ? t.__c = u = new Q(_, T) : (t.__c = u = new Nr(_, T), u.constructor = Q, u.render = C1), x && x.sub(u), u.props = _, u.state || (u.state = {}), u.context = T, u.__n = i, d = u.__d = !0, u.__h = [], u._sb = []), g && u.__s == null && (u.__s = u.state), g && Q.getDerivedStateFromProps != null && (u.__s == u.state && (u.__s = ot({}, u.__s)), ot(u.__s, Q.getDerivedStateFromProps(_, u.__s))), f = u.props, m = u.state, u.__v = t, d) g && Q.getDerivedStateFromProps == null && u.componentWillMount != null && u.componentWillMount(), g && u.componentDidMount != null && u.__h.push(u.componentDidMount);
    else {
      if (g && Q.getDerivedStateFromProps == null && _ !== f && u.componentWillReceiveProps != null && u.componentWillReceiveProps(_, T), !u.__e && u.shouldComponentUpdate != null && u.shouldComponentUpdate(_, u.__s, T) === !1 || t.__v == r.__v) {
        for (t.__v != r.__v && (u.props = _, u.state = u.__s, u.__d = !1), t.__e = r.__e, t.__k = r.__k, t.__k.some(function(K) {
          K && (K.__ = t);
        }), S = 0; S < u._sb.length; S++) u.__h.push(u._sb[S]);
        u._sb = [], u.__h.length && s.push(u);
        break e;
      }
      u.componentWillUpdate != null && u.componentWillUpdate(_, u.__s, T), g && u.componentDidUpdate != null && u.__h.push(function() {
        u.componentDidUpdate(f, m, y);
      });
    }
    if (u.context = T, u.props = _, u.__P = e, u.__e = !1, k = U.__r, F = 0, g) {
      for (u.state = u.__s, u.__d = !1, k && k(t), h = u.render(u.props, u.state, u.context), $ = 0; $ < u._sb.length; $++) u.__h.push(u._sb[$]);
      u._sb = [];
    } else do
      u.__d = !1, k && k(t), h = u.render(u.props, u.state, u.context), u.state = u.__s;
    while (u.__d && ++F < 25);
    u.state = u.__s, u.getChildContext != null && (i = ot(ot({}, i), u.getChildContext())), g && !d && u.getSnapshotBeforeUpdate != null && (y = u.getSnapshotBeforeUpdate(f, m)), j = h, h != null && h.type === It && h.key == null && (j = jc(h.props.children)), a = Dc(e, Kr(j) ? j : [j], t, r, i, n, o, s, a, c, l), u.base = t.__e, t.__u &= -161, u.__h.length && s.push(u), p && (u.__E = u.__ = null);
  } catch (K) {
    if (t.__v = null, c || o != null) if (K.then) {
      for (t.__u |= c ? 160 : 128; a && a.nodeType == 8 && a.nextSibling; ) a = a.nextSibling;
      o[o.indexOf(a)] = null, t.__e = a;
    } else {
      for (we = o.length; we--; ) xo(o[we]);
      Kn(t);
    }
    else t.__e = r.__e, t.__k = r.__k, K.then || Kn(t);
    U.__e(K, t, r);
  }
  else o == null && t.__v == r.__v ? (t.__k = r.__k, t.__e = r.__e) : a = t.__e = E1(r.__e, t, r, i, n, o, s, c, l);
  return (h = U.diffed) && h(t), 128 & t.__u ? void 0 : a;
}
function Kn(e) {
  e && e.__c && (e.__c.__e = !0), e && e.__k && e.__k.forEach(Kn);
}
function $c(e, t, r) {
  for (var i = 0; i < r.length; i++) So(r[i], r[++i], r[++i]);
  U.__c && U.__c(t, e), e.some(function(n) {
    try {
      e = n.__h, n.__h = [], e.some(function(o) {
        o.call(n);
      });
    } catch (o) {
      U.__e(o, n.__v);
    }
  });
}
function jc(e) {
  return typeof e != "object" || e == null || e.__b && e.__b > 0 ? e : Kr(e) ? e.map(jc) : ot({}, e);
}
function E1(e, t, r, i, n, o, s, a, c) {
  var l, h, u, d, f, m, y, p = r.props, _ = t.props, g = t.type;
  if (g == "svg" ? n = "http://www.w3.org/2000/svg" : g == "math" ? n = "http://www.w3.org/1998/Math/MathML" : n || (n = "http://www.w3.org/1999/xhtml"), o != null) {
    for (l = 0; l < o.length; l++) if ((f = o[l]) && "setAttribute" in f == !!g && (g ? f.localName == g : f.nodeType == 3)) {
      e = f, o[l] = null;
      break;
    }
  }
  if (e == null) {
    if (g == null) return document.createTextNode(_);
    e = document.createElementNS(n, g, _.is && _), a && (U.__m && U.__m(t, o), a = !1), o = null;
  }
  if (g == null) p === _ || a && e.data == _ || (e.data = _);
  else {
    if (o = o && Yr.call(e.childNodes), p = r.props || jr, !a && o != null) for (p = {}, l = 0; l < e.attributes.length; l++) p[(f = e.attributes[l]).name] = f.value;
    for (l in p) if (f = p[l], l != "children") {
      if (l == "dangerouslySetInnerHTML") u = f;
      else if (!(l in _)) {
        if (l == "value" && "defaultValue" in _ || l == "checked" && "defaultChecked" in _) continue;
        ai(e, l, null, f, n);
      }
    }
    for (l in _) f = _[l], l == "children" ? d = f : l == "dangerouslySetInnerHTML" ? h = f : l == "value" ? m = f : l == "checked" ? y = f : a && typeof f != "function" || p[l] === f || ai(e, l, f, p[l], n);
    if (h) a || u && (h.__html == u.__html || h.__html == e.innerHTML) || (e.innerHTML = h.__html), t.__k = [];
    else if (u && (e.innerHTML = ""), Dc(t.type == "template" ? e.content : e, Kr(d) ? d : [d], t, r, i, g == "foreignObject" ? "http://www.w3.org/1999/xhtml" : n, o, s, o ? o[0] : r.__k && nr(r, 0), a, c), o != null) for (l = o.length; l--; ) xo(o[l]);
    a || (l = "value", g == "progress" && m == null ? e.removeAttribute("value") : m != null && (m !== e[l] || g == "progress" && !m || g == "option" && m != p[l]) && ai(e, l, m, p[l], n), l = "checked", y != null && y != e[l] && ai(e, l, y, p[l], n));
  }
  return e;
}
function So(e, t, r) {
  try {
    if (typeof e == "function") {
      var i = typeof e.__u == "function";
      i && e.__u(), i && t == null || (e.__u = e(t));
    } else e.current = t;
  } catch (n) {
    U.__e(n, r);
  }
}
function Hc(e, t, r) {
  var i, n;
  if (U.unmount && U.unmount(e), (i = e.ref) && (i.current && i.current != e.__e || So(i, null, t)), (i = e.__c) != null) {
    if (i.componentWillUnmount) try {
      i.componentWillUnmount();
    } catch (o) {
      U.__e(o, t);
    }
    i.base = i.__P = null;
  }
  if (i = e.__k) for (n = 0; n < i.length; n++) i[n] && Hc(i[n], t, r || typeof e.type != "function");
  r || xo(e.__e), e.__c = e.__ = e.__e = void 0;
}
function C1(e, t, r) {
  return this.constructor(e, r);
}
function Fi(e, t, r) {
  var i, n, o, s;
  t == document && (t = document.documentElement), U.__ && U.__(e, t), n = (i = typeof r == "function") ? null : r && r.__k || t.__k, o = [], s = [], To(t, e = (!i && r || t).__k = dt(It, null, [e]), n || jr, jr, t.namespaceURI, !i && r ? [r] : n ? null : t.firstChild ? Yr.call(t.childNodes) : null, o, !i && r ? r : n ? n.__e : t.firstChild, i, s), $c(o, e, s);
}
function Gc(e, t) {
  Fi(e, t, Gc);
}
function Vc(e, t, r) {
  var i, n, o, s, a = ot({}, e.props);
  for (o in e.type && e.type.defaultProps && (s = e.type.defaultProps), t) o == "key" ? i = t[o] : o == "ref" ? n = t[o] : a[o] = t[o] === void 0 && s != null ? s[o] : t[o];
  return arguments.length > 2 && (a.children = arguments.length > 3 ? Yr.call(arguments, 2) : r), Pr(e.type, a, i || e.key, n || e.ref, null);
}
Yr = Pc.slice, U = { __e: function(e, t, r, i) {
  for (var n, o, s; t = t.__; ) if ((n = t.__c) && !n.__) try {
    if ((o = n.constructor) && o.getDerivedStateFromError != null && (n.setState(o.getDerivedStateFromError(e)), s = n.__d), n.componentDidCatch != null && (n.componentDidCatch(e, i || {}), s = n.__d), s) return n.__E = n;
  } catch (a) {
    e = a;
  }
  throw e;
} }, Mc = 0, Ic = function(e) {
  return e != null && e.constructor == null;
}, Nr.prototype.setState = function(e, t) {
  var r;
  r = this.__s != null && this.__s != this.state ? this.__s : this.__s = ot({}, this.state), typeof e == "function" && (e = e(ot({}, r), this.props)), e && ot(r, e), e != null && this.__v && (t && this._sb.push(t), Bs(this));
}, Nr.prototype.forceUpdate = function(e) {
  this.__v && (this.__e = !0, e && this.__h.push(e), Bs(this));
}, Nr.prototype.render = It, Ut = [], Fc = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, Rc = function(e, t) {
  return e.__v.__b - t.__v.__b;
}, wi.__r = 0, Oc = /(PointerCapture)$|Capture$/i, Ao = 0, Zn = js(!1), Yn = js(!0);
var k1 = 0;
function L(e, t, r, i, n, o) {
  t || (t = {});
  var s, a, c = t;
  if ("ref" in c) for (a in c = {}, t) a == "ref" ? s = t[a] : c[a] = t[a];
  var l = { type: e, props: c, key: r, ref: s, __k: null, __: null, __b: 0, __e: null, __c: null, constructor: void 0, __v: --k1, __i: -1, __u: 0, __source: n, __self: o };
  if (typeof e == "function" && (s = e.defaultProps)) for (a in s) c[a] === void 0 && (c[a] = s[a]);
  return U.vnode && U.vnode(l), l;
}
var Hr, se, vn, Hs, Ei = 0, Wc = [], ce = U, Gs = ce.__b, Vs = ce.__r, Ws = ce.diffed, zs = ce.__c, qs = ce.unmount, Xs = ce.__;
function Lo(e, t) {
  ce.__h && ce.__h(se, e, Ei || t), Ei = 0;
  var r = se.__H || (se.__H = { __: [], __h: [] });
  return e >= r.__.length && r.__.push({}), r.__[e];
}
function Bt(e) {
  return Ei = 1, A1(qc, e);
}
function A1(e, t, r) {
  var i = Lo(Hr++, 2);
  if (i.t = e, !i.__c && (i.__ = [qc(void 0, t), function(a) {
    var c = i.__N ? i.__N[0] : i.__[0], l = i.t(c, a);
    c !== l && (i.__N = [l, i.__[1]], i.__c.setState({}));
  }], i.__c = se, !se.__f)) {
    var n = function(a, c, l) {
      if (!i.__c.__H) return !0;
      var h = i.__c.__H.__.filter(function(d) {
        return !!d.__c;
      });
      if (h.every(function(d) {
        return !d.__N;
      })) return !o || o.call(this, a, c, l);
      var u = i.__c.props !== a;
      return h.forEach(function(d) {
        if (d.__N) {
          var f = d.__[0];
          d.__ = d.__N, d.__N = void 0, f !== d.__[0] && (u = !0);
        }
      }), o && o.call(this, a, c, l) || u;
    };
    se.__f = !0;
    var o = se.shouldComponentUpdate, s = se.componentWillUpdate;
    se.componentWillUpdate = function(a, c, l) {
      if (this.__e) {
        var h = o;
        o = void 0, n(a, c, l), o = h;
      }
      s && s.call(this, a, c, l);
    }, se.shouldComponentUpdate = n;
  }
  return i.__N || i.__;
}
function Ye(e, t) {
  var r = Lo(Hr++, 3);
  !ce.__s && zc(r.__H, t) && (r.__ = e, r.u = t, se.__H.__h.push(r));
}
function be(e) {
  return Ei = 5, Ri(function() {
    return { current: e };
  }, []);
}
function Ri(e, t) {
  var r = Lo(Hr++, 7);
  return zc(r.__H, t) && (r.__ = e(), r.__H = t, r.__h = e), r.__;
}
function x1() {
  for (var e; e = Wc.shift(); ) if (e.__P && e.__H) try {
    e.__H.__h.forEach(mi), e.__H.__h.forEach(Jn), e.__H.__h = [];
  } catch (t) {
    e.__H.__h = [], ce.__e(t, e.__v);
  }
}
ce.__b = function(e) {
  se = null, Gs && Gs(e);
}, ce.__ = function(e, t) {
  e && t.__k && t.__k.__m && (e.__m = t.__k.__m), Xs && Xs(e, t);
}, ce.__r = function(e) {
  Vs && Vs(e), Hr = 0;
  var t = (se = e.__c).__H;
  t && (vn === se ? (t.__h = [], se.__h = [], t.__.forEach(function(r) {
    r.__N && (r.__ = r.__N), r.u = r.__N = void 0;
  })) : (t.__h.forEach(mi), t.__h.forEach(Jn), t.__h = [], Hr = 0)), vn = se;
}, ce.diffed = function(e) {
  Ws && Ws(e);
  var t = e.__c;
  t && t.__H && (t.__H.__h.length && (Wc.push(t) !== 1 && Hs === ce.requestAnimationFrame || ((Hs = ce.requestAnimationFrame) || T1)(x1)), t.__H.__.forEach(function(r) {
    r.u && (r.__H = r.u), r.u = void 0;
  })), vn = se = null;
}, ce.__c = function(e, t) {
  t.some(function(r) {
    try {
      r.__h.forEach(mi), r.__h = r.__h.filter(function(i) {
        return !i.__ || Jn(i);
      });
    } catch (i) {
      t.some(function(n) {
        n.__h && (n.__h = []);
      }), t = [], ce.__e(i, r.__v);
    }
  }), zs && zs(e, t);
}, ce.unmount = function(e) {
  qs && qs(e);
  var t, r = e.__c;
  r && r.__H && (r.__H.__.forEach(function(i) {
    try {
      mi(i);
    } catch (n) {
      t = n;
    }
  }), r.__H = void 0, t && ce.__e(t, r.__v));
};
var Zs = typeof requestAnimationFrame == "function";
function T1(e) {
  var t, r = function() {
    clearTimeout(i), Zs && cancelAnimationFrame(t), setTimeout(e);
  }, i = setTimeout(r, 35);
  Zs && (t = requestAnimationFrame(r));
}
function mi(e) {
  var t = se, r = e.__c;
  typeof r == "function" && (e.__c = void 0, r()), se = t;
}
function Jn(e) {
  var t = se;
  e.__c = e.__(), se = t;
}
function zc(e, t) {
  return !e || e.length !== t.length || t.some(function(r, i) {
    return r !== e[i];
  });
}
function qc(e, t) {
  return typeof t == "function" ? t(e) : t;
}
var S1 = {
  outline: {
    xmlns: "http://www.w3.org/2000/svg",
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    "stroke-width": 2,
    "stroke-linecap": "round",
    "stroke-linejoin": "round"
  },
  filled: {
    xmlns: "http://www.w3.org/2000/svg",
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    stroke: "none"
  }
};
const L1 = (e, t, r, i) => {
  const n = ({
    color: o = "currentColor",
    size: s = 24,
    stroke: a = 2,
    title: c,
    children: l,
    className: h = "",
    class: u = "",
    style: d,
    ...f
  }) => dt(
    "svg",
    {
      ...S1[e],
      width: String(s),
      height: String(s),
      class: ["tabler-icon", `tabler-icon-${t}`, u, h].join(" "),
      "stroke-width": a,
      stroke: o,
      style: d,
      ...f
    },
    [
      c && dt("title", {}, c),
      ...i.map(([m, y]) => dt(m, y)),
      ...Bc(l)
    ]
  );
  return n.displayName = `${r}`, n;
};
var M1 = L1("outline", "loader-2", "Loader2", [["path", { d: "M12 3a9 9 0 1 0 9 9", key: "svg-0" }]]);
function Mo() {
  return (Mo = Object.assign ? Object.assign.bind() : function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var r = arguments[t];
      for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (e[i] = r[i]);
    }
    return e;
  }).apply(this, arguments);
}
var I1 = ["context", "children"];
function F1(e) {
  this.getChildContext = function() {
    return e.context;
  };
  var t = e.children, r = function(i, n) {
    if (i == null) return {};
    var o, s, a = {}, c = Object.keys(i);
    for (s = 0; s < c.length; s++) n.indexOf(o = c[s]) >= 0 || (a[o] = i[o]);
    return a;
  }(e, I1);
  return Vc(t, r);
}
function R1() {
  var e = new CustomEvent("_preact", { detail: {}, bubbles: !0, cancelable: !0 });
  this.dispatchEvent(e), this._vdom = dt(F1, Mo({}, this._props, { context: e.detail.context }), function t(r, i) {
    if (r.nodeType === 3) return r.data;
    if (r.nodeType !== 1) return null;
    var n = [], o = {}, s = 0, a = r.attributes, c = r.childNodes;
    for (s = a.length; s--; ) a[s].name !== "slot" && (o[a[s].name] = a[s].value, o[Xc(a[s].name)] = a[s].value);
    for (s = c.length; s--; ) {
      var l = t(c[s], null), h = c[s].slot;
      h ? o[h] = dt(Ys, { name: h }, l) : n[s] = l;
    }
    var u = i ? dt(Ys, null, n) : n;
    return dt(i || r.nodeName.toLowerCase(), o, u);
  }(this, this._vdomComponent)), (this.hasAttribute("hydrate") ? Gc : Fi)(this._vdom, this._root);
}
function Xc(e) {
  return e.replace(/-(\w)/g, function(t, r) {
    return r ? r.toUpperCase() : "";
  });
}
function O1(e, t, r) {
  if (this._vdom) {
    var i = {};
    i[e] = r = r ?? void 0, i[Xc(e)] = r, this._vdom = Vc(this._vdom, i), Fi(this._vdom, this._root);
  }
}
function P1() {
  Fi(this._vdom = null, this._root);
}
function Ys(e, t) {
  var r = this;
  return dt("slot", Mo({}, e, { ref: function(i) {
    i ? (r.ref = i, r._listener || (r._listener = function(n) {
      n.stopPropagation(), n.detail.context = t;
    }, i.addEventListener("_preact", r._listener))) : r.ref.removeEventListener("_preact", r._listener);
  } }));
}
function Zc(e, t, r, i) {
  function n() {
    var o = Reflect.construct(HTMLElement, [], n);
    return o._vdomComponent = e, o._root = i && i.shadow ? o.attachShadow({ mode: i.mode || "open" }) : o, o;
  }
  return (n.prototype = Object.create(HTMLElement.prototype)).constructor = n, n.prototype.connectedCallback = R1, n.prototype.attributeChangedCallback = O1, n.prototype.disconnectedCallback = P1, r = r || e.observedAttributes || Object.keys(e.propTypes || {}), n.observedAttributes = r, r.forEach(function(o) {
    Object.defineProperty(n.prototype, o, { get: function() {
      return this._vdom.props[o];
    }, set: function(s) {
      this._vdom ? this.attributeChangedCallback(o, null, s) : (this._props || (this._props = {}), this._props[o] = s, this.connectedCallback());
      var a = typeof s;
      s != null && a !== "string" && a !== "boolean" && a !== "number" || this.setAttribute(o, s);
    } });
  }), customElements.define(t || e.tagName || e.displayName || e.name, n);
}
const Qt = (e, t = !1) => typeof e == "boolean" ? e : typeof e == "string" ? e === "true" || e === "" : t;
var N1 = Symbol.for("preact-signals");
function Oi() {
  if (Ct > 1)
    Ct--;
  else {
    for (var e, t = !1; Dr !== void 0; ) {
      var r = Dr;
      for (Dr = void 0, Qn++; r !== void 0; ) {
        var i = r.o;
        if (r.o = void 0, r.f &= -3, !(8 & r.f) && Qc(r)) try {
          r.c();
        } catch (n) {
          t || (e = n, t = !0);
        }
        r = i;
      }
    }
    if (Qn = 0, Ct--, t) throw e;
  }
}
function D1(e) {
  if (Ct > 0) return e();
  Ct++;
  try {
    return e();
  } finally {
    Oi();
  }
}
var N = void 0;
function Yc(e) {
  var t = N;
  N = void 0;
  try {
    return e();
  } finally {
    N = t;
  }
}
var Dr = void 0, Ct = 0, Qn = 0, Ci = 0;
function Kc(e) {
  if (N !== void 0) {
    var t = e.n;
    if (t === void 0 || t.t !== N)
      return t = { i: 0, S: e, p: N.s, n: void 0, t: N, e: void 0, x: void 0, r: t }, N.s !== void 0 && (N.s.n = t), N.s = t, e.n = t, 32 & N.f && e.S(t), t;
    if (t.i === -1)
      return t.i = 0, t.n !== void 0 && (t.n.p = t.p, t.p !== void 0 && (t.p.n = t.n), t.p = N.s, t.n = void 0, N.s.n = t, N.s = t), t;
  }
}
function ve(e, t) {
  this.v = e, this.i = 0, this.n = void 0, this.t = void 0, this.W = t?.watched, this.Z = t?.unwatched;
}
ve.prototype.brand = N1;
ve.prototype.h = function() {
  return !0;
};
ve.prototype.S = function(e) {
  var t = this, r = this.t;
  r !== e && e.e === void 0 && (e.x = r, this.t = e, r !== void 0 ? r.e = e : Yc(function() {
    var i;
    (i = t.W) == null || i.call(t);
  }));
};
ve.prototype.U = function(e) {
  var t = this;
  if (this.t !== void 0) {
    var r = e.e, i = e.x;
    r !== void 0 && (r.x = i, e.e = void 0), i !== void 0 && (i.e = r, e.x = void 0), e === this.t && (this.t = i, i === void 0 && Yc(function() {
      var n;
      (n = t.Z) == null || n.call(t);
    }));
  }
};
ve.prototype.subscribe = function(e) {
  var t = this;
  return Jr(function() {
    var r = t.value, i = N;
    N = void 0;
    try {
      e(r);
    } finally {
      N = i;
    }
  });
};
ve.prototype.valueOf = function() {
  return this.value;
};
ve.prototype.toString = function() {
  return this.value + "";
};
ve.prototype.toJSON = function() {
  return this.value;
};
ve.prototype.peek = function() {
  var e = N;
  N = void 0;
  try {
    return this.value;
  } finally {
    N = e;
  }
};
Object.defineProperty(ve.prototype, "value", { get: function() {
  var e = Kc(this);
  return e !== void 0 && (e.i = this.i), this.v;
}, set: function(e) {
  if (e !== this.v) {
    if (Qn > 100) throw new Error("Cycle detected");
    this.v = e, this.i++, Ci++, Ct++;
    try {
      for (var t = this.t; t !== void 0; t = t.x) t.t.N();
    } finally {
      Oi();
    }
  }
} });
function Jc(e, t) {
  return new ve(e, t);
}
function Qc(e) {
  for (var t = e.s; t !== void 0; t = t.n) if (t.S.i !== t.i || !t.S.h() || t.S.i !== t.i) return !0;
  return !1;
}
function e2(e) {
  for (var t = e.s; t !== void 0; t = t.n) {
    var r = t.S.n;
    if (r !== void 0 && (t.r = r), t.S.n = t, t.i = -1, t.n === void 0) {
      e.s = t;
      break;
    }
  }
}
function t2(e) {
  for (var t = e.s, r = void 0; t !== void 0; ) {
    var i = t.p;
    t.i === -1 ? (t.S.U(t), i !== void 0 && (i.n = t.n), t.n !== void 0 && (t.n.p = i)) : r = t, t.S.n = t.r, t.r !== void 0 && (t.r = void 0), t = i;
  }
  e.s = r;
}
function zt(e, t) {
  ve.call(this, void 0), this.x = e, this.s = void 0, this.g = Ci - 1, this.f = 4, this.W = t?.watched, this.Z = t?.unwatched;
}
zt.prototype = new ve();
zt.prototype.h = function() {
  if (this.f &= -3, 1 & this.f) return !1;
  if ((36 & this.f) == 32 || (this.f &= -5, this.g === Ci)) return !0;
  if (this.g = Ci, this.f |= 1, this.i > 0 && !Qc(this))
    return this.f &= -2, !0;
  var e = N;
  try {
    e2(this), N = this;
    var t = this.x();
    (16 & this.f || this.v !== t || this.i === 0) && (this.v = t, this.f &= -17, this.i++);
  } catch (r) {
    this.v = r, this.f |= 16, this.i++;
  }
  return N = e, t2(this), this.f &= -2, !0;
};
zt.prototype.S = function(e) {
  if (this.t === void 0) {
    this.f |= 36;
    for (var t = this.s; t !== void 0; t = t.n) t.S.S(t);
  }
  ve.prototype.S.call(this, e);
};
zt.prototype.U = function(e) {
  if (this.t !== void 0 && (ve.prototype.U.call(this, e), this.t === void 0)) {
    this.f &= -33;
    for (var t = this.s; t !== void 0; t = t.n) t.S.U(t);
  }
};
zt.prototype.N = function() {
  if (!(2 & this.f)) {
    this.f |= 6;
    for (var e = this.t; e !== void 0; e = e.x) e.t.N();
  }
};
Object.defineProperty(zt.prototype, "value", { get: function() {
  if (1 & this.f) throw new Error("Cycle detected");
  var e = Kc(this);
  if (this.h(), e !== void 0 && (e.i = this.i), 16 & this.f) throw this.v;
  return this.v;
} });
function eo(e, t) {
  return new zt(e, t);
}
function r2(e) {
  var t = e.u;
  if (e.u = void 0, typeof t == "function") {
    Ct++;
    var r = N;
    N = void 0;
    try {
      t();
    } catch (i) {
      throw e.f &= -2, e.f |= 8, Io(e), i;
    } finally {
      N = r, Oi();
    }
  }
}
function Io(e) {
  for (var t = e.s; t !== void 0; t = t.n) t.S.U(t);
  e.x = void 0, e.s = void 0, r2(e);
}
function U1(e) {
  if (N !== this) throw new Error("Out-of-order effect");
  t2(this), N = e, this.f &= -2, 8 & this.f && Io(this), Oi();
}
function gr(e) {
  this.x = e, this.u = void 0, this.s = void 0, this.o = void 0, this.f = 32;
}
gr.prototype.c = function() {
  var e = this.S();
  try {
    if (8 & this.f || this.x === void 0) return;
    var t = this.x();
    typeof t == "function" && (this.u = t);
  } finally {
    e();
  }
};
gr.prototype.S = function() {
  if (1 & this.f) throw new Error("Cycle detected");
  this.f |= 1, this.f &= -9, r2(this), e2(this), Ct++;
  var e = N;
  return N = this, U1.bind(this, e);
};
gr.prototype.N = function() {
  2 & this.f || (this.f |= 2, this.o = Dr, Dr = this);
};
gr.prototype.d = function() {
  this.f |= 8, 1 & this.f || Io(this);
};
gr.prototype.dispose = function() {
  this.d();
};
function Jr(e) {
  var t = new gr(e);
  try {
    t.c();
  } catch (i) {
    throw t.d(), i;
  }
  var r = t.d.bind(t);
  return r[Symbol.dispose] = r, r;
}
var i2, Pi, _n, n2 = [];
Jr(function() {
  i2 = this.N;
})();
function vr(e, t) {
  U[e] = t.bind(null, U[e] || function() {
  });
}
function ki(e) {
  _n && _n(), _n = e && e.S();
}
function o2(e) {
  var t = this, r = e.data, i = ee(r);
  i.value = r;
  var n = Ri(function() {
    for (var a = t, c = t.__v; c = c.__; ) if (c.__c) {
      c.__c.__$f |= 4;
      break;
    }
    var l = eo(function() {
      var f = i.value.value;
      return f === 0 ? 0 : f === !0 ? "" : f || "";
    }), h = eo(function() {
      return !Array.isArray(l.value) && !Ic(l.value);
    }), u = Jr(function() {
      if (this.N = s2, h.value) {
        var f = l.value;
        a.__v && a.__v.__e && a.__v.__e.nodeType === 3 && (a.__v.__e.data = f);
      }
    }), d = t.__$u.d;
    return t.__$u.d = function() {
      u(), d.call(this);
    }, [h, l];
  }, []), o = n[0], s = n[1];
  return o.value ? s.peek() : s.value;
}
o2.displayName = "_st";
Object.defineProperties(ve.prototype, { constructor: { configurable: !0, value: void 0 }, type: { configurable: !0, value: o2 }, props: { configurable: !0, get: function() {
  return { data: this };
} }, __b: { configurable: !0, value: 1 } });
vr("__b", function(e, t) {
  if (typeof t.type == "string") {
    var r, i = t.props;
    for (var n in i) if (n !== "children") {
      var o = i[n];
      o instanceof ve && (r || (t.__np = r = {}), r[n] = o, i[n] = o.peek());
    }
  }
  e(t);
});
vr("__r", function(e, t) {
  if (t.type !== It) {
    ki();
    var r, i = t.__c;
    i && (i.__$f &= -2, (r = i.__$u) === void 0 && (i.__$u = r = function(n) {
      var o;
      return Jr(function() {
        o = this;
      }), o.c = function() {
        i.__$f |= 1, i.setState({});
      }, o;
    }())), Pi = i, ki(r);
  }
  e(t);
});
vr("__e", function(e, t, r, i) {
  ki(), Pi = void 0, e(t, r, i);
});
vr("diffed", function(e, t) {
  ki(), Pi = void 0;
  var r;
  if (typeof t.type == "string" && (r = t.__e)) {
    var i = t.__np, n = t.props;
    if (i) {
      var o = r.U;
      if (o) for (var s in o) {
        var a = o[s];
        a !== void 0 && !(s in i) && (a.d(), o[s] = void 0);
      }
      else
        o = {}, r.U = o;
      for (var c in i) {
        var l = o[c], h = i[c];
        l === void 0 ? (l = B1(r, c, h, n), o[c] = l) : l.o(h, n);
      }
    }
  }
  e(t);
});
function B1(e, t, r, i) {
  var n = t in e && e.ownerSVGElement === void 0, o = Jc(r);
  return { o: function(s, a) {
    o.value = s, i = a;
  }, d: Jr(function() {
    this.N = s2;
    var s = o.value.value;
    i[t] !== s && (i[t] = s, n ? e[t] = s : s ? e.setAttribute(t, s) : e.removeAttribute(t));
  }) };
}
vr("unmount", function(e, t) {
  if (typeof t.type == "string") {
    var r = t.__e;
    if (r) {
      var i = r.U;
      if (i) {
        r.U = void 0;
        for (var n in i) {
          var o = i[n];
          o && o.d();
        }
      }
    }
  } else {
    var s = t.__c;
    if (s) {
      var a = s.__$u;
      a && (s.__$u = void 0, a.d());
    }
  }
  e(t);
});
vr("__h", function(e, t, r, i) {
  (i < 3 || i === 9) && (t.__$f |= 2), e(t, r, i);
});
Nr.prototype.shouldComponentUpdate = function(e, t) {
  var r = this.__$u, i = r && r.s !== void 0;
  for (var n in t) return !0;
  if (this.__f || typeof this.u == "boolean" && this.u === !0) {
    var o = 2 & this.__$f;
    if (!(i || o || 4 & this.__$f) || 1 & this.__$f) return !0;
  } else if (!(i || 4 & this.__$f) || 3 & this.__$f) return !0;
  for (var s in e) if (s !== "__source" && e[s] !== this.props[s]) return !0;
  for (var a in this.props) if (!(a in e)) return !0;
  return !1;
};
function ee(e, t) {
  return Ri(function() {
    return Jc(e, t);
  }, []);
}
function yn(e, t) {
  var r = be(e);
  return r.current = e, Pi.__$f |= 4, Ri(function() {
    return eo(function() {
      return r.current();
    }, t);
  }, []);
}
var $1 = function(e) {
  queueMicrotask(function() {
    queueMicrotask(e);
  });
};
function j1() {
  D1(function() {
    for (var e; e = n2.shift(); ) i2.call(e);
  });
}
function s2() {
  n2.push(this) === 1 && (U.requestAnimationFrame || $1)(j1);
}
var ci = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function H1(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var bn, Ks;
function Fo() {
  if (Ks) return bn;
  Ks = 1;
  function e(t) {
    var r = typeof t;
    return t != null && (r == "object" || r == "function");
  }
  return bn = e, bn;
}
var wn, Js;
function G1() {
  if (Js) return wn;
  Js = 1;
  var e = typeof ci == "object" && ci && ci.Object === Object && ci;
  return wn = e, wn;
}
var En, Qs;
function a2() {
  if (Qs) return En;
  Qs = 1;
  var e = G1(), t = typeof self == "object" && self && self.Object === Object && self, r = e || t || Function("return this")();
  return En = r, En;
}
var Cn, ea;
function V1() {
  if (ea) return Cn;
  ea = 1;
  var e = a2(), t = function() {
    return e.Date.now();
  };
  return Cn = t, Cn;
}
var kn, ta;
function W1() {
  if (ta) return kn;
  ta = 1;
  var e = /\s/;
  function t(r) {
    for (var i = r.length; i-- && e.test(r.charAt(i)); )
      ;
    return i;
  }
  return kn = t, kn;
}
var An, ra;
function z1() {
  if (ra) return An;
  ra = 1;
  var e = W1(), t = /^\s+/;
  function r(i) {
    return i && i.slice(0, e(i) + 1).replace(t, "");
  }
  return An = r, An;
}
var xn, ia;
function c2() {
  if (ia) return xn;
  ia = 1;
  var e = a2(), t = e.Symbol;
  return xn = t, xn;
}
var Tn, na;
function q1() {
  if (na) return Tn;
  na = 1;
  var e = c2(), t = Object.prototype, r = t.hasOwnProperty, i = t.toString, n = e ? e.toStringTag : void 0;
  function o(s) {
    var a = r.call(s, n), c = s[n];
    try {
      s[n] = void 0;
      var l = !0;
    } catch {
    }
    var h = i.call(s);
    return l && (a ? s[n] = c : delete s[n]), h;
  }
  return Tn = o, Tn;
}
var Sn, oa;
function X1() {
  if (oa) return Sn;
  oa = 1;
  var e = Object.prototype, t = e.toString;
  function r(i) {
    return t.call(i);
  }
  return Sn = r, Sn;
}
var Ln, sa;
function Z1() {
  if (sa) return Ln;
  sa = 1;
  var e = c2(), t = q1(), r = X1(), i = "[object Null]", n = "[object Undefined]", o = e ? e.toStringTag : void 0;
  function s(a) {
    return a == null ? a === void 0 ? n : i : o && o in Object(a) ? t(a) : r(a);
  }
  return Ln = s, Ln;
}
var Mn, aa;
function Y1() {
  if (aa) return Mn;
  aa = 1;
  function e(t) {
    return t != null && typeof t == "object";
  }
  return Mn = e, Mn;
}
var In, ca;
function K1() {
  if (ca) return In;
  ca = 1;
  var e = Z1(), t = Y1(), r = "[object Symbol]";
  function i(n) {
    return typeof n == "symbol" || t(n) && e(n) == r;
  }
  return In = i, In;
}
var Fn, la;
function J1() {
  if (la) return Fn;
  la = 1;
  var e = z1(), t = Fo(), r = K1(), i = NaN, n = /^[-+]0x[0-9a-f]+$/i, o = /^0b[01]+$/i, s = /^0o[0-7]+$/i, a = parseInt;
  function c(l) {
    if (typeof l == "number")
      return l;
    if (r(l))
      return i;
    if (t(l)) {
      var h = typeof l.valueOf == "function" ? l.valueOf() : l;
      l = t(h) ? h + "" : h;
    }
    if (typeof l != "string")
      return l === 0 ? l : +l;
    l = e(l);
    var u = o.test(l);
    return u || s.test(l) ? a(l.slice(2), u ? 2 : 8) : n.test(l) ? i : +l;
  }
  return Fn = c, Fn;
}
var Rn, ua;
function Q1() {
  if (ua) return Rn;
  ua = 1;
  var e = Fo(), t = V1(), r = J1(), i = "Expected a function", n = Math.max, o = Math.min;
  function s(a, c, l) {
    var h, u, d, f, m, y, p = 0, _ = !1, g = !1, x = !0;
    if (typeof a != "function")
      throw new TypeError(i);
    c = r(c) || 0, e(l) && (_ = !!l.leading, g = "maxWait" in l, d = g ? n(r(l.maxWait) || 0, c) : d, x = "trailing" in l ? !!l.trailing : x);
    function T(B) {
      var ie = h, ne = u;
      return h = u = void 0, p = B, f = a.apply(ne, ie), f;
    }
    function S(B) {
      return p = B, m = setTimeout($, c), _ ? T(B) : f;
    }
    function k(B) {
      var ie = B - y, ne = B - p, _e = c - ie;
      return g ? o(_e, d - ne) : _e;
    }
    function F(B) {
      var ie = B - y, ne = B - p;
      return y === void 0 || ie >= c || ie < 0 || g && ne >= d;
    }
    function $() {
      var B = t();
      if (F(B))
        return j(B);
      m = setTimeout($, k(B));
    }
    function j(B) {
      return m = void 0, x && h ? T(B) : (h = u = void 0, f);
    }
    function we() {
      m !== void 0 && clearTimeout(m), p = 0, h = y = u = m = void 0;
    }
    function Q() {
      return m === void 0 ? f : j(t());
    }
    function K() {
      var B = t(), ie = F(B);
      if (h = arguments, u = this, y = B, ie) {
        if (m === void 0)
          return S(y);
        if (g)
          return clearTimeout(m), m = setTimeout($, c), T(y);
      }
      return m === void 0 && (m = setTimeout($, c)), f;
    }
    return K.cancel = we, K.flush = Q, K;
  }
  return Rn = s, Rn;
}
var On, ha;
function eu() {
  if (ha) return On;
  ha = 1;
  var e = Q1(), t = Fo(), r = "Expected a function";
  function i(n, o, s) {
    var a = !0, c = !0;
    if (typeof n != "function")
      throw new TypeError(r);
    return t(s) && (a = "leading" in s ? !!s.leading : a, c = "trailing" in s ? !!s.trailing : c), e(n, o, {
      leading: a,
      maxWait: o,
      trailing: c
    });
  }
  return On = i, On;
}
var tu = eu();
const l2 = /* @__PURE__ */ H1(tu), ru = (e = "user") => {
  const t = be(null), r = be(null), [i, n] = Bt(e), [o, s] = Bt(!1), a = be(null), c = be(!1), l = be(/* @__PURE__ */ new Set()), h = (p) => {
    a.current = p;
  };
  Ye(() => {
    const p = t.current;
    if (!p) return;
    const _ = () => {
      if (c.current && a.current) {
        const g = setTimeout(() => {
          a.current?.(), c.current = !1, l.current.delete(g);
        }, 100);
        l.current.add(g);
      }
    };
    return p.addEventListener("loadedmetadata", _), () => {
      p.removeEventListener("loadedmetadata", _), l.current.forEach((g) => clearTimeout(g)), l.current.clear();
    };
  }, [t.current?.src]), Ye(
    () => () => {
      l.current.forEach((p) => clearTimeout(p)), l.current.clear();
    },
    []
  );
  const u = async (p, _) => {
    try {
      r.current && (r.current.getTracks().forEach((j) => j.stop()), r.current = null), t.current && (t.current.srcObject = null);
      const g = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: p || i }
      });
      r.current = g;
      const S = g.getVideoTracks()[0].getSettings().facingMode;
      (S && S !== (p || i) || S && S !== i) && n(S);
      const $ = (await navigator.mediaDevices.enumerateDevices()).find(
        (j) => j.kind === "videoinput" && g.getVideoTracks()[0].getSettings().deviceId === j.deviceId
      );
      _?.($?.label), t.current && (t.current.srcObject = g, await t.current.play());
    } catch (g) {
      console.error("Failed to start camera:", g);
    }
  }, d = async () => {
    const p = i === "user" ? "environment" : "user";
    c.current = !0;
    const _ = i;
    try {
      n(p), r.current && (r.current.getTracks().forEach((g) => g.stop()), r.current = null), await u(p);
    } catch {
      n(_), c.current = !1;
      try {
        await u(_);
      } catch (x) {
        console.error("Failed to restore previous camera:", x);
      }
    }
  }, f = () => {
    const p = navigator.userAgent.toLowerCase(), _ = p.includes("firefox") || p.includes("gecko") && !p.includes("chrome") && !p.includes("edge"), g = "mozInnerScreenX" in window || "mozInputSource" in window || "mozPaintCount" in window || typeof window.InstallTrigger < "u", x = CSS.supports && (CSS.supports("-moz-appearance", "none") || CSS.supports("-moz-user-select", "none"));
    return {
      isGecko: _ || g || x,
      isChromium: p.includes("chrome") || p.includes("chromium") || p.includes("edge"),
      isWebKit: p.includes("webkit") && !p.includes("chrome")
    };
  };
  return {
    videoRef: t,
    streamRef: r,
    facingMode: i,
    agentSupported: o,
    startCamera: u,
    switchCamera: d,
    checkAgentSupport: async () => {
      try {
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
          navigator.userAgent
        ) || navigator.maxTouchPoints && navigator.maxTouchPoints > 1) {
          s(!0);
          return;
        }
        const { isGecko: _ } = f();
        let g = null, x = null;
        try {
          const S = await navigator.mediaDevices.getUserMedia({
            video: { facingMode: "user" }
          });
          g = S.getVideoTracks()[0].getSettings().deviceId ?? null, S.getTracks().forEach((k) => k.stop());
        } catch {
        }
        try {
          const S = await navigator.mediaDevices.getUserMedia({
            video: { facingMode: "environment" }
          });
          x = S.getVideoTracks()[0].getSettings().deviceId ?? null, S.getTracks().forEach((k) => k.stop());
        } catch {
        }
        if (!(g && x && g !== x)) {
          s(!1);
          return;
        }
        s(!_);
      } catch {
        s(!1);
      }
    },
    stopCamera: () => {
      r.current && (r.current.getTracks().forEach((p) => p.stop()), r.current = null), t.current && (t.current.srcObject = null, t.current.load());
    },
    registerCameraSwitchCallback: h
  };
};
var or = typeof self < "u" ? self : {};
function Nt() {
  throw Error("Invalid UTF8");
}
function da(e, t) {
  return t = String.fromCharCode.apply(null, t), e == null ? t : e + t;
}
let li, Pn;
const iu = typeof TextDecoder < "u";
let nu;
const ou = typeof TextEncoder < "u";
function u2(e) {
  if (ou) e = (nu ||= new TextEncoder()).encode(e);
  else {
    let r = 0;
    const i = new Uint8Array(3 * e.length);
    for (let n = 0; n < e.length; n++) {
      var t = e.charCodeAt(n);
      if (t < 128) i[r++] = t;
      else {
        if (t < 2048) i[r++] = t >> 6 | 192;
        else {
          if (t >= 55296 && t <= 57343) {
            if (t <= 56319 && n < e.length) {
              const o = e.charCodeAt(++n);
              if (o >= 56320 && o <= 57343) {
                t = 1024 * (t - 55296) + o - 56320 + 65536, i[r++] = t >> 18 | 240, i[r++] = t >> 12 & 63 | 128, i[r++] = t >> 6 & 63 | 128, i[r++] = 63 & t | 128;
                continue;
              }
              n--;
            }
            t = 65533;
          }
          i[r++] = t >> 12 | 224, i[r++] = t >> 6 & 63 | 128;
        }
        i[r++] = 63 & t | 128;
      }
    }
    e = r === i.length ? i : i.subarray(0, r);
  }
  return e;
}
var Ro, Ai;
e: {
  for (var fa = ["CLOSURE_FLAGS"], Nn = or, Dn = 0; Dn < fa.length; Dn++) if ((Nn = Nn[fa[Dn]]) == null) {
    Ai = null;
    break e;
  }
  Ai = Nn;
}
var Gr, pa = Ai && Ai[610401301];
Ro = pa != null && pa;
const ma = or.navigator;
function to(e) {
  return !!Ro && !!Gr && Gr.brands.some(({ brand: t }) => t && t.indexOf(e) != -1);
}
function We(e) {
  var t;
  return (t = or.navigator) && (t = t.userAgent) || (t = ""), t.indexOf(e) != -1;
}
function wt() {
  return !!Ro && !!Gr && Gr.brands.length > 0;
}
function Un() {
  return wt() ? to("Chromium") : (We("Chrome") || We("CriOS")) && !(!wt() && We("Edge")) || We("Silk");
}
function Ni(e) {
  return Ni[" "](e), e;
}
Gr = ma && ma.userAgentData || null, Ni[" "] = function() {
};
var su = !wt() && (We("Trident") || We("MSIE"));
!We("Android") || Un(), Un(), We("Safari") && (Un() || !wt() && We("Coast") || !wt() && We("Opera") || !wt() && We("Edge") || (wt() ? to("Microsoft Edge") : We("Edg/")) || wt() && to("Opera"));
var h2 = {}, Rr = null;
function au(e) {
  const t = e.length;
  let r = 3 * t / 4;
  r % 3 ? r = Math.floor(r) : "=.".indexOf(e[t - 1]) != -1 && (r = "=.".indexOf(e[t - 2]) != -1 ? r - 2 : r - 1);
  const i = new Uint8Array(r);
  let n = 0;
  return function(o, s) {
    function a(l) {
      for (; c < o.length; ) {
        const h = o.charAt(c++), u = Rr[h];
        if (u != null) return u;
        if (!/^[\s\xa0]*$/.test(h)) throw Error("Unknown base64 encoding at char: " + h);
      }
      return l;
    }
    d2();
    let c = 0;
    for (; ; ) {
      const l = a(-1), h = a(0), u = a(64), d = a(64);
      if (d === 64 && l === -1) break;
      s(l << 2 | h >> 4), u != 64 && (s(h << 4 & 240 | u >> 2), d != 64 && s(u << 6 & 192 | d));
    }
  }(e, function(o) {
    i[n++] = o;
  }), n !== r ? i.subarray(0, n) : i;
}
function d2() {
  if (!Rr) {
    Rr = {};
    var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""), t = ["+/=", "+/", "-_=", "-_.", "-_"];
    for (let r = 0; r < 5; r++) {
      const i = e.concat(t[r].split(""));
      h2[r] = i;
      for (let n = 0; n < i.length; n++) {
        const o = i[n];
        Rr[o] === void 0 && (Rr[o] = n);
      }
    }
  }
}
var f2 = typeof Uint8Array < "u", p2 = !su && typeof btoa == "function";
function ga(e) {
  if (!p2) {
    var t;
    t === void 0 && (t = 0), d2(), t = h2[t];
    var r = Array(Math.floor(e.length / 3)), i = t[64] || "";
    let c = 0, l = 0;
    for (; c < e.length - 2; c += 3) {
      var n = e[c], o = e[c + 1], s = e[c + 2], a = t[n >> 2];
      n = t[(3 & n) << 4 | o >> 4], o = t[(15 & o) << 2 | s >> 6], s = t[63 & s], r[l++] = a + n + o + s;
    }
    switch (a = 0, s = i, e.length - c) {
      case 2:
        s = t[(15 & (a = e[c + 1])) << 2] || i;
      case 1:
        e = e[c], r[l] = t[e >> 2] + t[(3 & e) << 4 | a >> 4] + s + i;
    }
    return r.join("");
  }
  for (t = "", r = 0, i = e.length - 10240; r < i; ) t += String.fromCharCode.apply(null, e.subarray(r, r += 10240));
  return t += String.fromCharCode.apply(null, r ? e.subarray(r) : e), btoa(t);
}
const va = /[-_.]/g, cu = { "-": "+", _: "/", ".": "=" };
function lu(e) {
  return cu[e] || "";
}
function m2(e) {
  if (!p2) return au(e);
  va.test(e) && (e = e.replace(va, lu)), e = atob(e);
  const t = new Uint8Array(e.length);
  for (let r = 0; r < e.length; r++) t[r] = e.charCodeAt(r);
  return t;
}
function Gt(e) {
  return f2 && e != null && e instanceof Uint8Array;
}
var sr = {};
function Vt() {
  return uu ||= new pt(null, sr);
}
function Oo(e) {
  g2(sr);
  var t = e.g;
  return (t = t == null || Gt(t) ? t : typeof t == "string" ? m2(t) : null) == null ? t : e.g = t;
}
var pt = class {
  h() {
    return new Uint8Array(Oo(this) || 0);
  }
  constructor(e, t) {
    if (g2(t), this.g = e, e != null && e.length === 0) throw Error("ByteString should be constructed with non-empty values");
  }
};
let uu, hu;
function g2(e) {
  if (e !== sr) throw Error("illegal external caller");
}
function v2(e, t) {
  e.__closure__error__context__984382 || (e.__closure__error__context__984382 = {}), e.__closure__error__context__984382.severity = t;
}
function ro(e) {
  return v2(e = Error(e), "warning"), e;
}
function Po(e) {
  if (e != null) {
    var t = hu ??= {}, r = t[e] || 0;
    r >= 5 || (t[e] = r + 1, v2(e = Error(), "incident"), function(i) {
      or.setTimeout(() => {
        throw i;
      }, 0);
    }(e));
  }
}
var Di = typeof Symbol == "function" && typeof Symbol() == "symbol";
function _r(e, t, r = !1) {
  return typeof Symbol == "function" && typeof Symbol() == "symbol" ? r && Symbol.for && e ? Symbol.for(e) : e != null ? Symbol(e) : Symbol() : t;
}
var du = _r("jas", void 0, !0), _a = _r(void 0, "0di"), Lr = _r(void 0, "1oa"), ar = _r(void 0, Symbol()), fu = _r(void 0, "0actk"), _2 = _r(void 0, "8utk");
const C = Di ? du : "Ea", y2 = { Ea: { value: 0, configurable: !0, writable: !0, enumerable: !1 } }, b2 = Object.defineProperties;
function Ui(e, t) {
  Di || C in e || b2(e, y2), e[C] |= t;
}
function le(e, t) {
  Di || C in e || b2(e, y2), e[C] = t;
}
function yr(e) {
  return Ui(e, 34), e;
}
function pu(e, t) {
  le(t, -15615 & (0 | e));
}
function io(e, t) {
  le(t, -15581 & (34 | e));
}
function Bi() {
  return typeof BigInt == "function";
}
function Le(e) {
  return Array.prototype.slice.call(e);
}
var No, Qr = {};
function $i(e) {
  return e !== null && typeof e == "object" && !Array.isArray(e) && e.constructor === Object;
}
function Do(e, t) {
  if (e != null) {
    if (typeof e == "string") e = e ? new pt(e, sr) : Vt();
    else if (e.constructor !== pt) if (Gt(e)) e = e.length ? new pt(new Uint8Array(e), sr) : Vt();
    else {
      if (!t) throw Error();
      e = void 0;
    }
  }
  return e;
}
const ya = [];
function Ft(e) {
  if (2 & e) throw Error();
}
le(ya, 55), No = Object.freeze(ya);
class ba {
  constructor(t, r, i) {
    this.g = t, this.h = r, this.l = i;
  }
  next() {
    const t = this.g.next();
    return t.done || (t.value = this.h.call(this.l, t.value)), t;
  }
  [Symbol.iterator]() {
    return this;
  }
}
function Uo(e) {
  return ar ? e[ar] : void 0;
}
var mu = Object.freeze({});
function ji(e) {
  return e.Na = !0, e;
}
var gu = ji((e) => typeof e == "number"), wa = ji((e) => typeof e == "string"), vu = ji((e) => typeof e == "boolean"), Hi = typeof or.BigInt == "function" && typeof or.BigInt(0) == "bigint";
function kt(e) {
  var t = e;
  if (wa(t)) {
    if (!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t)) throw Error(String(t));
  } else if (gu(t) && !Number.isSafeInteger(t)) throw Error(String(t));
  return Hi ? BigInt(e) : e = vu(e) ? e ? "1" : "0" : wa(e) ? e.trim() || "0" : String(e);
}
var no = ji((e) => Hi ? e >= yu && e <= wu : e[0] === "-" ? Ea(e, _u) : Ea(e, bu));
const _u = Number.MIN_SAFE_INTEGER.toString(), yu = Hi ? BigInt(Number.MIN_SAFE_INTEGER) : void 0, bu = Number.MAX_SAFE_INTEGER.toString(), wu = Hi ? BigInt(Number.MAX_SAFE_INTEGER) : void 0;
function Ea(e, t) {
  if (e.length > t.length) return !1;
  if (e.length < t.length || e === t) return !0;
  for (let r = 0; r < e.length; r++) {
    const i = e[r], n = t[r];
    if (i > n) return !1;
    if (i < n) return !0;
  }
}
const Eu = typeof Uint8Array.prototype.slice == "function";
let w2, G = 0, te = 0;
function Ca(e) {
  const t = e >>> 0;
  G = t, te = (e - t) / 4294967296 >>> 0;
}
function Wt(e) {
  if (e < 0) {
    Ca(-e);
    const [t, r] = Ho(G, te);
    G = t >>> 0, te = r >>> 0;
  } else Ca(e);
}
function Bo(e) {
  const t = w2 ||= new DataView(new ArrayBuffer(8));
  t.setFloat32(0, +e, !0), te = 0, G = t.getUint32(0, !0);
}
function $o(e, t) {
  const r = 4294967296 * t + (e >>> 0);
  return Number.isSafeInteger(r) ? r : Vr(e, t);
}
function jo(e, t) {
  const r = 2147483648 & t;
  return r && (t = ~t >>> 0, (e = 1 + ~e >>> 0) == 0 && (t = t + 1 >>> 0)), typeof (e = $o(e, t)) == "number" ? r ? -e : e : r ? "-" + e : e;
}
function Vr(e, t) {
  if (e >>>= 0, (t >>>= 0) <= 2097151) var r = "" + (4294967296 * t + e);
  else Bi() ? r = "" + (BigInt(t) << BigInt(32) | BigInt(e)) : (e = (16777215 & e) + 6777216 * (r = 16777215 & (e >>> 24 | t << 8)) + 6710656 * (t = t >> 16 & 65535), r += 8147497 * t, t *= 2, e >= 1e7 && (r += e / 1e7 >>> 0, e %= 1e7), r >= 1e7 && (t += r / 1e7 >>> 0, r %= 1e7), r = t + ka(r) + ka(e));
  return r;
}
function ka(e) {
  return e = String(e), "0000000".slice(e.length) + e;
}
function E2() {
  var e = G, t = te;
  if (2147483648 & t) if (Bi()) e = "" + (BigInt(0 | t) << BigInt(32) | BigInt(e >>> 0));
  else {
    const [r, i] = Ho(e, t);
    e = "-" + Vr(r, i);
  }
  else e = Vr(e, t);
  return e;
}
function Gi(e) {
  if (e.length < 16) Wt(Number(e));
  else if (Bi()) e = BigInt(e), G = Number(e & BigInt(4294967295)) >>> 0, te = Number(e >> BigInt(32) & BigInt(4294967295));
  else {
    const t = +(e[0] === "-");
    te = G = 0;
    const r = e.length;
    for (let i = t, n = (r - t) % 6 + t; n <= r; i = n, n += 6) {
      const o = Number(e.slice(i, n));
      te *= 1e6, G = 1e6 * G + o, G >= 4294967296 && (te += Math.trunc(G / 4294967296), te >>>= 0, G >>>= 0);
    }
    if (t) {
      const [i, n] = Ho(G, te);
      G = i, te = n;
    }
  }
}
function Ho(e, t) {
  return t = ~t, e ? e = 1 + ~e : t += 1, [e, t];
}
const Wr = typeof BigInt == "function" ? BigInt.asIntN : void 0, Cu = typeof BigInt == "function" ? BigInt.asUintN : void 0, At = Number.isSafeInteger, Vi = Number.isFinite, cr = Math.trunc, ku = kt(0);
function Rt(e) {
  return e == null || typeof e == "number" ? e : e === "NaN" || e === "Infinity" || e === "-Infinity" ? Number(e) : void 0;
}
function C2(e) {
  return e == null || typeof e == "boolean" ? e : typeof e == "number" ? !!e : void 0;
}
const Au = /^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;
function zr(e) {
  switch (typeof e) {
    case "bigint":
      return !0;
    case "number":
      return Vi(e);
    case "string":
      return Au.test(e);
    default:
      return !1;
  }
}
function br(e) {
  if (e == null) return e;
  if (typeof e == "string" && e) e = +e;
  else if (typeof e != "number") return;
  return Vi(e) ? 0 | e : void 0;
}
function k2(e) {
  if (e == null) return e;
  if (typeof e == "string" && e) e = +e;
  else if (typeof e != "number") return;
  return Vi(e) ? e >>> 0 : void 0;
}
function Aa(e) {
  if (e[0] === "-") return !1;
  const t = e.length;
  return t < 20 || t === 20 && Number(e.substring(0, 6)) < 184467;
}
function A2(e) {
  const t = e.length;
  return e[0] === "-" ? t < 20 || t === 20 && Number(e.substring(0, 7)) > -922337 : t < 19 || t === 19 && Number(e.substring(0, 6)) < 922337;
}
function x2(e) {
  return A2(e) ? e : (Gi(e), E2());
}
function Go(e) {
  return e = cr(e), At(e) || (Wt(e), e = jo(G, te)), e;
}
function T2(e) {
  var t = cr(Number(e));
  return At(t) ? String(t) : ((t = e.indexOf(".")) !== -1 && (e = e.substring(0, t)), x2(e));
}
function xa(e) {
  var t = cr(Number(e));
  return At(t) ? kt(t) : ((t = e.indexOf(".")) !== -1 && (e = e.substring(0, t)), Bi() ? kt(Wr(64, BigInt(e))) : kt(x2(e)));
}
function Ta(e) {
  if (At(e)) e = kt(Go(e));
  else {
    if (e = cr(e), At(e)) e = String(e);
    else {
      const t = String(e);
      A2(t) ? e = t : (Wt(e), e = E2());
    }
    e = kt(e);
  }
  return e;
}
function oo(e) {
  return e == null ? e : typeof e == "bigint" ? (no(e) ? e = Number(e) : (e = Wr(64, e), e = no(e) ? Number(e) : String(e)), e) : zr(e) ? typeof e == "number" ? Go(e) : T2(e) : void 0;
}
function xu(e) {
  if (e == null) return e;
  var t = typeof e;
  if (t === "bigint") return String(Cu(64, e));
  if (zr(e)) {
    if (t === "string") return t = cr(Number(e)), At(t) && t >= 0 ? e = String(t) : ((t = e.indexOf(".")) !== -1 && (e = e.substring(0, t)), Aa(e) || (Gi(e), e = Vr(G, te))), e;
    if (t === "number") return (e = cr(e)) >= 0 && At(e) ? e : function(r) {
      if (r < 0) {
        Wt(r);
        var i = Vr(G, te);
        return r = Number(i), At(r) ? r : i;
      }
      return Aa(i = String(r)) ? i : (Wt(r), $o(G, te));
    }(e);
  }
}
function S2(e) {
  if (typeof e != "string") throw Error();
  return e;
}
function wr(e) {
  if (e != null && typeof e != "string") throw Error();
  return e;
}
function lr(e) {
  return e == null || typeof e == "string" ? e : void 0;
}
function Vo(e, t, r, i) {
  if (e != null && typeof e == "object" && e.W === Qr) return e;
  if (!Array.isArray(e)) return r ? 2 & i ? ((e = t[_a]) || (yr((e = new t()).u), e = t[_a] = e), t = e) : t = new t() : t = void 0, t;
  let n = r = 0 | e[C];
  return n === 0 && (n |= 32 & i), n |= 2 & i, n !== r && le(e, n), new t(e);
}
function Tu(e, t, r) {
  if (t) e: {
    if (!zr(t = e)) throw ro("int64");
    switch (typeof t) {
      case "string":
        t = xa(t);
        break e;
      case "bigint":
        t = kt(Wr(64, t));
        break e;
      default:
        t = Ta(t);
    }
  }
  else e = typeof (t = e), t = t == null ? t : e === "bigint" ? kt(Wr(64, t)) : zr(t) ? e === "string" ? xa(t) : Ta(t) : void 0;
  return (e = t) == null ? r ? ku : void 0 : e;
}
function Su(e) {
  return e;
}
const Lu = {};
let Mu = function() {
  try {
    return Ni(new class extends Map {
      constructor() {
        super();
      }
    }()), !1;
  } catch {
    return !0;
  }
}();
class Bn {
  constructor() {
    this.g = /* @__PURE__ */ new Map();
  }
  get(t) {
    return this.g.get(t);
  }
  set(t, r) {
    return this.g.set(t, r), this.size = this.g.size, this;
  }
  delete(t) {
    return t = this.g.delete(t), this.size = this.g.size, t;
  }
  clear() {
    this.g.clear(), this.size = this.g.size;
  }
  has(t) {
    return this.g.has(t);
  }
  entries() {
    return this.g.entries();
  }
  keys() {
    return this.g.keys();
  }
  values() {
    return this.g.values();
  }
  forEach(t, r) {
    return this.g.forEach(t, r);
  }
  [Symbol.iterator]() {
    return this.entries();
  }
}
const Iu = Mu ? (Object.setPrototypeOf(Bn.prototype, Map.prototype), Object.defineProperties(Bn.prototype, { size: { value: 0, configurable: !0, enumerable: !0, writable: !0 } }), Bn) : class extends Map {
  constructor() {
    super();
  }
};
function Sa(e) {
  return e;
}
function $n(e) {
  if (2 & e.M) throw Error("Cannot mutate an immutable Map");
}
var st = class extends Iu {
  constructor(e, t, r = Sa, i = Sa) {
    super();
    let n = 0 | e[C];
    n |= 64, le(e, n), this.M = n, this.I = t, this.S = r, this.X = this.I ? Fu : i;
    for (let o = 0; o < e.length; o++) {
      const s = e[o], a = r(s[0], !1, !0);
      let c = s[1];
      t ? c === void 0 && (c = null) : c = i(s[1], !1, !0, void 0, void 0, n), super.set(a, c);
    }
  }
  La() {
    var e = Du;
    if (this.size !== 0) return Array.from(super.entries(), (t) => (t[0] = e(t[0]), t[1] = e(t[1]), t));
  }
  da(e = Ru) {
    const t = [], r = super.entries();
    for (var i; !(i = r.next()).done; ) (i = i.value)[0] = e(i[0]), i[1] = e(i[1]), t.push(i);
    return t;
  }
  clear() {
    $n(this), super.clear();
  }
  delete(e) {
    return $n(this), super.delete(this.S(e, !0, !1));
  }
  entries() {
    if (this.I) {
      var e = super.keys();
      e = new ba(e, Ou, this);
    } else e = super.entries();
    return e;
  }
  values() {
    if (this.I) {
      var e = super.keys();
      e = new ba(e, st.prototype.get, this);
    } else e = super.values();
    return e;
  }
  forEach(e, t) {
    this.I ? super.forEach((r, i, n) => {
      e.call(t, n.get(i), i, n);
    }) : super.forEach(e, t);
  }
  set(e, t) {
    return $n(this), (e = this.S(e, !0, !1)) == null ? this : t == null ? (super.delete(e), this) : super.set(e, this.X(t, !0, !0, this.I, !1, this.M));
  }
  Ja(e) {
    const t = this.S(e[0], !1, !0);
    e = e[1], e = this.I ? e === void 0 ? null : e : this.X(e, !1, !0, void 0, !1, this.M), super.set(t, e);
  }
  has(e) {
    return super.has(this.S(e, !1, !1));
  }
  get(e) {
    e = this.S(e, !1, !1);
    const t = super.get(e);
    if (t !== void 0) {
      var r = this.I;
      return r ? ((r = this.X(t, !1, !0, r, this.pa, this.M)) !== t && super.set(e, r), r) : t;
    }
  }
  [Symbol.iterator]() {
    return this.entries();
  }
};
function Fu(e, t, r, i, n, o) {
  return e = Vo(e, i, r, o), n && (e = qi(e)), e;
}
function Ru(e) {
  return e;
}
function Ou(e) {
  return [e, this.get(e)];
}
let Pu, L2, M2, Nu;
function La() {
  return Pu ||= new st(yr([]), void 0, void 0, void 0, Lu);
}
function so(e, t, r, i, n) {
  if (e != null) {
    if (Array.isArray(e)) {
      const o = 0 | e[C];
      return e.length === 0 && 1 & o ? void 0 : n && 2 & o ? e : Wi(e, t, r, i !== void 0, n);
    }
    return t(e, i);
  }
}
function Wi(e, t, r, i, n) {
  const o = i || r ? 0 | e[C] : 0, s = i ? !!(32 & o) : void 0;
  let a = 0;
  const c = (i = Le(e)).length;
  for (let m = 0; m < c; m++) {
    var l = i[m];
    if (m === c - 1 && $i(l)) {
      var h = t, u = r, d = s, f = n;
      let y;
      for (let p in l) {
        const _ = so(l[p], h, u, d, f);
        _ != null && ((y ??= {})[p] = _);
      }
      l = y;
    } else l = so(i[m], t, r, s, n);
    i[m] = l, l != null && (a = m + 1);
  }
  return a < c && (i.length = a), r && ((e = Uo(e)) && (i[ar] = Le(e)), r(o, i)), i;
}
function Du(e) {
  return so(e, Wo, void 0, void 0, !1);
}
function Wo(e) {
  switch (typeof e) {
    case "number":
      return Number.isFinite(e) ? e : "" + e;
    case "bigint":
      return no(e) ? Number(e) : "" + e;
    case "boolean":
      return e ? 1 : 0;
    case "object":
      if (Gt(e)) return Gt(e) && Po(_2), ga(e);
      if (e.W === Qr) return I2(e);
      if (e instanceof pt) {
        const t = e.g;
        return t == null ? "" : typeof t == "string" ? t : e.g = ga(t);
      }
      return e instanceof st ? e.La() : void 0;
  }
  return e;
}
function I2(e) {
  var t = e.u;
  e = Wi(t, Wo, void 0, void 0, !1);
  var r = 0 | t[C];
  if ((t = e.length) && !(512 & r)) {
    var i = e[t - 1], n = !1;
    $i(i) ? (t--, n = !0) : i = void 0;
    var o = t - (r = 512 & r ? 0 : -1), s = (L2 ?? Su)(o, r, e, i);
    if (i && (e[t] = void 0), o < s && i) {
      for (var a in o = !0, i) {
        const c = +a;
        c <= s ? (e[n = c + r] = i[a], t = Math.max(n + 1, t), n = !1, delete i[a]) : o = !1;
      }
      o && (i = void 0);
    }
    for (o = t - 1; t > 0; o = t - 1) if ((a = e[o]) == null) t--, n = !0;
    else {
      if (!((o -= r) >= s)) break;
      (i ??= {})[o] = a, t--, n = !0;
    }
    n && (e.length = t), i && e.push(i);
  }
  return e;
}
function xt(e, t, r) {
  return e = F2(e, t[0], t[1], r ? 1 : 2), t !== M2 && r && Ui(e, 8192), e;
}
function F2(e, t, r, i) {
  if (e == null) {
    var n = 96;
    r ? (e = [r], n |= 512) : e = [], t && (n = -16760833 & n | (1023 & t) << 14);
  } else {
    if (!Array.isArray(e)) throw Error("narr");
    if (8192 & (n = 0 | e[C]) || !(64 & n) || 2 & n || Po(fu), 1024 & n) throw Error("farr");
    if (64 & n) return e;
    if (i === 1 || i === 2 || (n |= 64), r && (n |= 512, r !== e[0])) throw Error("mid");
    e: {
      var o = (r = e).length;
      if (o) {
        var s = o - 1;
        if ($i(i = r[s])) {
          if ((s -= t = 512 & (n |= 256) ? 0 : -1) >= 1024) throw Error("pvtlmt");
          for (var a in i) (o = +a) < s && (r[o + t] = i[a], delete i[a]);
          n = -16760833 & n | (1023 & s) << 14;
          break e;
        }
      }
      if (t) {
        if ((a = Math.max(t, o - (512 & n ? 0 : -1))) > 1024) throw Error("spvt");
        n = -16760833 & n | (1023 & a) << 14;
      }
    }
  }
  return le(e, n), e;
}
function ao(e, t, r = io) {
  if (e != null) {
    if (f2 && e instanceof Uint8Array) return t ? e : new Uint8Array(e);
    if (Array.isArray(e)) {
      var i = 0 | e[C];
      return 2 & i ? e : (t &&= i === 0 || !!(32 & i) && !(64 & i || !(16 & i)), t ? (le(e, 34 | i), 4 & i && Object.freeze(e), e) : Wi(e, ao, 4 & i ? io : r, !0, !0));
    }
    return e.W === Qr ? e = 2 & (i = 0 | (r = e.u)[C]) ? e : new e.constructor(zi(r, i, !0)) : e instanceof st && !(2 & e.M) && (r = yr(e.da(ao)), e = new st(r, e.I, e.S, e.X)), e;
  }
}
function zi(e, t, r) {
  const i = r || 2 & t ? io : pu, n = !!(32 & t);
  return e = function(o, s, a) {
    const c = Le(o);
    var l = c.length;
    const h = 256 & s ? c[l - 1] : void 0;
    for (l += h ? -1 : 0, s = 512 & s ? 1 : 0; s < l; s++) c[s] = a(c[s]);
    if (h) {
      s = c[s] = {};
      for (const u in h) s[u] = a(h[u]);
    }
    return (o = Uo(o)) && (c[ar] = Le(o)), c;
  }(e, t, (o) => ao(o, n, i)), Ui(e, 32 | (r ? 2 : 0)), e;
}
function qi(e) {
  const t = e.u, r = 0 | t[C];
  return 2 & r ? new e.constructor(zi(t, r, !1)) : e;
}
function ur(e, t) {
  return _t(e = e.u, 0 | e[C], t);
}
function _t(e, t, r) {
  if (r === -1) return null;
  const i = r + (512 & t ? 0 : -1), n = e.length - 1;
  return i >= n && 256 & t ? e[n][r] : i <= n ? e[i] : void 0;
}
function V(e, t, r) {
  const i = e.u;
  let n = 0 | i[C];
  return Ft(n), J(i, n, t, r), e;
}
function J(e, t, r, i) {
  const n = 512 & t ? 0 : -1, o = r + n;
  var s = e.length - 1;
  return o >= s && 256 & t ? (e[s][r] = i, t) : o <= s ? (e[o] = i, t) : (i !== void 0 && (r >= (s = t >> 14 & 1023 || 536870912) ? i != null && (e[s + n] = { [r]: i }, le(e, t |= 256)) : e[o] = i), t);
}
function gi(e, t) {
  let r = 0 | (e = e.u)[C];
  const i = _t(e, r, t), n = Rt(i);
  return n != null && n !== i && J(e, r, t, n), n;
}
function R2(e) {
  let t = 0 | (e = e.u)[C];
  const r = _t(e, t, 1), i = Do(r, !0);
  return i != null && i !== r && J(e, t, 1, i), i;
}
function $t() {
  return mu === void 0 ? 2 : 4;
}
function jt(e, t, r, i, n) {
  const o = e.u, s = 2 & (e = 0 | o[C]) ? 1 : i;
  n = !!n;
  let a = 0 | (i = zo(o, e, t))[C];
  if (!(4 & a)) {
    4 & a && (i = Le(i), a = mt(a, e), e = J(o, e, t, i));
    let c = 0, l = 0;
    for (; c < i.length; c++) {
      const h = r(i[c]);
      h != null && (i[l++] = h);
    }
    l < c && (i.length = l), a = qo(a, e), r = -2049 & (20 | a), a = r &= -4097, le(i, a), 2 & a && Object.freeze(i);
  }
  return s === 1 || s === 4 && 32 & a ? ft(a) || (n = a, a |= 2, a !== n && le(i, a), Object.freeze(i)) : (s === 2 && ft(a) && (i = Le(i), a = mt(a, e), a = Tt(a, e, n), le(i, a), e = J(o, e, t, i)), ft(a) || (t = a, a = Tt(a, e, n), a !== t && le(i, a))), i;
}
function zo(e, t, r) {
  return e = _t(e, t, r), Array.isArray(e) ? e : No;
}
function qo(e, t) {
  return e === 0 && (e = mt(e, t)), 1 | e;
}
function ft(e) {
  return !!(2 & e) && !!(4 & e) || !!(1024 & e);
}
function O2(e) {
  e = Le(e);
  for (let t = 0; t < e.length; t++) {
    const r = e[t] = Le(e[t]);
    Array.isArray(r[1]) && (r[1] = yr(r[1]));
  }
  return e;
}
function co(e, t, r, i) {
  let n = 0 | (e = e.u)[C];
  Ft(n), J(e, n, t, (i === "0" ? Number(r) === 0 : r === i) ? void 0 : r);
}
function Er(e, t, r, i) {
  Ft(t);
  let n = zo(e, t, r);
  const o = n !== No;
  if (64 & t || !(8192 & t) || !o) {
    const s = o ? 0 | n[C] : 0;
    let a = s;
    (!o || 2 & a || ft(a) || 4 & a && !(32 & a)) && (n = Le(n), a = mt(a, t), t = J(e, t, r, n)), a = -13 & qo(a, t), a = Tt(i ? -17 & a : 16 | a, t, !0), a !== s && le(n, a);
  }
  return n;
}
function jn(e, t) {
  var r = El;
  return Zo(Xo(e = e.u), e, 0 | e[C], r) === t ? t : -1;
}
function Xo(e) {
  if (Di) return e[Lr] ?? (e[Lr] = /* @__PURE__ */ new Map());
  if (Lr in e) return e[Lr];
  const t = /* @__PURE__ */ new Map();
  return Object.defineProperty(e, Lr, { value: t }), t;
}
function P2(e, t, r, i) {
  const n = Xo(e), o = Zo(n, e, t, r);
  return o !== i && (o && (t = J(e, t, o)), n.set(r, i)), t;
}
function Zo(e, t, r, i) {
  let n = e.get(i);
  if (n != null) return n;
  n = 0;
  for (let o = 0; o < i.length; o++) {
    const s = i[o];
    _t(t, r, s) != null && (n !== 0 && (r = J(t, r, n)), n = s);
  }
  return e.set(i, n), n;
}
function Yo(e, t, r) {
  let i = 0 | e[C];
  const n = _t(e, i, r);
  let o;
  if (n != null && n.W === Qr) return (t = qi(n)) !== n && J(e, i, r, t), t.u;
  if (Array.isArray(n)) {
    const s = 0 | n[C];
    o = 2 & s ? xt(zi(n, s, !1), t, !0) : 64 & s ? n : xt(o, t, !0);
  } else o = xt(void 0, t, !0);
  return o !== n && J(e, i, r, o), o;
}
function N2(e, t, r) {
  let i = 0 | (e = e.u)[C];
  const n = _t(e, i, r);
  return (t = Vo(n, t, !1, i)) !== n && t != null && J(e, i, r, t), t;
}
function R(e, t, r) {
  if ((t = N2(e, t, r)) == null) return t;
  let i = 0 | (e = e.u)[C];
  if (!(2 & i)) {
    const n = qi(t);
    n !== t && J(e, i, r, t = n);
  }
  return t;
}
function D2(e, t, r, i, n, o, s) {
  e = e.u;
  var a = !!(2 & t);
  const c = a ? 1 : n;
  o = !!o, s &&= !a;
  var l = 0 | (n = zo(e, t, i))[C];
  if (!(a = !!(4 & l))) {
    var h = n, u = t;
    const d = !!(2 & (l = qo(l, t)));
    d && (u |= 2);
    let f = !d, m = !0, y = 0, p = 0;
    for (; y < h.length; y++) {
      const _ = Vo(h[y], r, !1, u);
      if (_ instanceof r) {
        if (!d) {
          const g = !!(2 & (0 | _.u[C]));
          f &&= !g, m &&= g;
        }
        h[p++] = _;
      }
    }
    p < y && (h.length = p), l |= 4, l = m ? 16 | l : -17 & l, le(h, l = f ? 8 | l : -9 & l), d && Object.freeze(h);
  }
  if (s && !(8 & l || !n.length && (c === 1 || c === 4 && 32 & l))) {
    for (ft(l) && (n = Le(n), l = mt(l, t), t = J(e, t, i, n)), r = n, s = l, h = 0; h < r.length; h++) (l = r[h]) !== (u = qi(l)) && (r[h] = u);
    s |= 8, le(r, s = r.length ? -17 & s : 16 | s), l = s;
  }
  return c === 1 || c === 4 && 32 & l ? ft(l) || (t = l, (l |= !n.length || 16 & l && (!a || 32 & l) ? 2 : 1024) !== t && le(n, l), Object.freeze(n)) : (c === 2 && ft(l) && (le(n = Le(n), l = Tt(l = mt(l, t), t, o)), t = J(e, t, i, n)), ft(l) || (i = l, (l = Tt(l, t, o)) !== i && le(n, l))), n;
}
function gt(e, t, r) {
  const i = 0 | e.u[C];
  return D2(e, i, t, r, $t(), !1, !(2 & i));
}
function A(e, t, r, i) {
  return i == null && (i = void 0), V(e, r, i);
}
function Ur(e, t, r, i) {
  i == null && (i = void 0);
  e: {
    let n = 0 | (e = e.u)[C];
    if (Ft(n), i == null) {
      const o = Xo(e);
      if (Zo(o, e, n, r) !== t) break e;
      o.set(r, 0);
    } else n = P2(e, n, r, t);
    J(e, n, t, i);
  }
}
function mt(e, t) {
  return -1025 & (e = 32 | (2 & t ? 2 | e : -3 & e));
}
function Tt(e, t, r) {
  return 32 & t && r || (e &= -33), e;
}
function Xi(e, t, r) {
  Ft(0 | e.u[C]), jt(e, t, lr, 2, !0).push(S2(r));
}
function xi(e, t, r, i) {
  const n = 0 | e.u[C];
  Ft(n), e = D2(e, n, r, t, 2, !0), i = i ?? new r(), e.push(i), e[C] = 2 & (0 | i.u[C]) ? -9 & e[C] : -17 & e[C];
}
function ze(e, t) {
  return br(ur(e, t));
}
function qe(e, t) {
  return lr(ur(e, t));
}
function oe(e, t) {
  return gi(e, t) ?? 0;
}
function qr(e, t, r) {
  if (r != null && typeof r != "boolean") throw e = typeof r, Error(`Expected boolean but got ${e != "object" ? e : r ? Array.isArray(r) ? "array" : e : "null"}: ${r}`);
  V(e, t, r);
}
function at(e, t, r) {
  if (r != null) {
    if (typeof r != "number" || !Vi(r)) throw ro("int32");
    r |= 0;
  }
  V(e, t, r);
}
function w(e, t, r) {
  if (r != null && typeof r != "number") throw Error(`Value of float/double field must be a number, found ${typeof r}: ${r}`);
  V(e, t, r);
}
function Ti(e, t, r) {
  {
    const s = e.u;
    let a = 0 | s[C];
    if (Ft(a), r == null) J(s, a, t);
    else {
      var i = e = 0 | r[C], n = ft(e), o = n || Object.isFrozen(r);
      for (n || (e = 0), o || (r = Le(r), i = 0, e = Tt(e = mt(e, a), a, !0), o = !1), e |= 21, n = 0; n < r.length; n++) {
        const c = r[n], l = S2(c);
        Object.is(c, l) || (o && (r = Le(r), i = 0, e = Tt(e = mt(e, a), a, !0), o = !1), r[n] = l);
      }
      e !== i && (o && (r = Le(r), e = Tt(e = mt(e, a), a, !0)), le(r, e)), J(s, a, t, r);
    }
  }
}
function U2(e, t) {
  return Error(`Invalid wire type: ${e} (at position ${t})`);
}
function Ko() {
  return Error("Failed to read varint, encoding is invalid.");
}
function B2(e, t) {
  return Error(`Tried to read past the end of the data ${t} > ${e}`);
}
function Jo(e) {
  if (typeof e == "string") return { buffer: m2(e), O: !1 };
  if (Array.isArray(e)) return { buffer: new Uint8Array(e), O: !1 };
  if (e.constructor === Uint8Array) return { buffer: e, O: !1 };
  if (e.constructor === ArrayBuffer) return { buffer: new Uint8Array(e), O: !1 };
  if (e.constructor === pt) return { buffer: Oo(e) || new Uint8Array(0), O: !0 };
  if (e instanceof Uint8Array) return { buffer: new Uint8Array(e.buffer, e.byteOffset, e.byteLength), O: !1 };
  throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers");
}
function Qo(e, t) {
  let r, i = 0, n = 0, o = 0;
  const s = e.h;
  let a = e.g;
  do
    r = s[a++], i |= (127 & r) << o, o += 7;
  while (o < 32 && 128 & r);
  for (o > 32 && (n |= (127 & r) >> 4), o = 3; o < 32 && 128 & r; o += 7) r = s[a++], n |= (127 & r) << o;
  if (Ht(e, a), r < 128) return t(i >>> 0, n >>> 0);
  throw Ko();
}
function es(e) {
  let t = 0, r = e.g;
  const i = r + 10, n = e.h;
  for (; r < i; ) {
    const o = n[r++];
    if (t |= o, (128 & o) == 0) return Ht(e, r), !!(127 & t);
  }
  throw Ko();
}
function St(e) {
  const t = e.h;
  let r = e.g, i = t[r++], n = 127 & i;
  if (128 & i && (i = t[r++], n |= (127 & i) << 7, 128 & i && (i = t[r++], n |= (127 & i) << 14, 128 & i && (i = t[r++], n |= (127 & i) << 21, 128 & i && (i = t[r++], n |= i << 28, 128 & i && 128 & t[r++] && 128 & t[r++] && 128 & t[r++] && 128 & t[r++] && 128 & t[r++]))))) throw Ko();
  return Ht(e, r), n;
}
function vt(e) {
  return St(e) >>> 0;
}
function lo(e) {
  var t = e.h;
  const r = e.g, i = t[r], n = t[r + 1], o = t[r + 2];
  return t = t[r + 3], Ht(e, e.g + 4), (i << 0 | n << 8 | o << 16 | t << 24) >>> 0;
}
function uo(e) {
  var t = lo(e);
  e = 2 * (t >> 31) + 1;
  const r = t >>> 23 & 255;
  return t &= 8388607, r == 255 ? t ? NaN : e * (1 / 0) : r == 0 ? 1401298464324817e-60 * e * t : e * Math.pow(2, r - 150) * (t + 8388608);
}
function Uu(e) {
  return St(e);
}
function Hn(e, t, { aa: r = !1 } = {}) {
  e.aa = r, t && (t = Jo(t), e.h = t.buffer, e.m = t.O, e.j = 0, e.l = e.h.length, e.g = e.j);
}
function Ht(e, t) {
  if (e.g = t, t > e.l) throw B2(e.l, t);
}
function $2(e, t) {
  if (t < 0) throw Error(`Tried to read a negative byte length: ${t}`);
  const r = e.g, i = r + t;
  if (i > e.l) throw B2(t, e.l - r);
  return e.g = i, r;
}
function j2(e, t) {
  if (t == 0) return Vt();
  var r = $2(e, t);
  return e.aa && e.m ? r = e.h.subarray(r, r + t) : (e = e.h, r = r === (t = r + t) ? new Uint8Array(0) : Eu ? e.slice(r, t) : new Uint8Array(e.subarray(r, t))), r.length == 0 ? Vt() : new pt(r, sr);
}
st.prototype.toJSON = void 0;
var Ma = [];
function H2(e) {
  var t = e.g;
  if (t.g == t.l) return !1;
  e.l = e.g.g;
  var r = vt(e.g);
  if (t = r >>> 3, !((r &= 7) >= 0 && r <= 5)) throw U2(r, e.l);
  if (t < 1) throw Error(`Invalid field number: ${t} (at position ${e.l})`);
  return e.m = t, e.h = r, !0;
}
function vi(e) {
  switch (e.h) {
    case 0:
      e.h != 0 ? vi(e) : es(e.g);
      break;
    case 1:
      Ht(e = e.g, e.g + 8);
      break;
    case 2:
      if (e.h != 2) vi(e);
      else {
        var t = vt(e.g);
        Ht(e = e.g, e.g + t);
      }
      break;
    case 5:
      Ht(e = e.g, e.g + 4);
      break;
    case 3:
      for (t = e.m; ; ) {
        if (!H2(e)) throw Error("Unmatched start-group tag: stream EOF");
        if (e.h == 4) {
          if (e.m != t) throw Error("Unmatched end-group tag");
          break;
        }
        vi(e);
      }
      break;
    default:
      throw U2(e.h, e.l);
  }
}
function ei(e, t, r) {
  const i = e.g.l, n = vt(e.g), o = e.g.g + n;
  let s = o - i;
  if (s <= 0 && (e.g.l = o, r(t, e, void 0, void 0, void 0), s = o - e.g.g), s) throw Error(`Message parsing ended unexpectedly. Expected to read ${n} bytes, instead read ${n - s} bytes, either the data ended unexpectedly or the message misreported its own length`);
  return e.g.g = o, e.g.l = i, t;
}
function ts(e) {
  var t = vt(e.g), r = $2(e = e.g, t);
  if (e = e.h, iu) {
    var i, n = e;
    (i = Pn) || (i = Pn = new TextDecoder("utf-8", { fatal: !0 })), t = r + t, n = r === 0 && t === n.length ? n : n.subarray(r, t);
    try {
      var o = i.decode(n);
    } catch (a) {
      if (li === void 0) {
        try {
          i.decode(new Uint8Array([128]));
        } catch {
        }
        try {
          i.decode(new Uint8Array([97])), li = !0;
        } catch {
          li = !1;
        }
      }
      throw !li && (Pn = void 0), a;
    }
  } else {
    t = (o = r) + t, r = [];
    let a, c = null;
    for (; o < t; ) {
      var s = e[o++];
      s < 128 ? r.push(s) : s < 224 ? o >= t ? Nt() : (a = e[o++], s < 194 || (192 & a) != 128 ? (o--, Nt()) : r.push((31 & s) << 6 | 63 & a)) : s < 240 ? o >= t - 1 ? Nt() : (a = e[o++], (192 & a) != 128 || s === 224 && a < 160 || s === 237 && a >= 160 || (192 & (i = e[o++])) != 128 ? (o--, Nt()) : r.push((15 & s) << 12 | (63 & a) << 6 | 63 & i)) : s <= 244 ? o >= t - 2 ? Nt() : (a = e[o++], (192 & a) != 128 || a - 144 + (s << 28) >> 30 != 0 || (192 & (i = e[o++])) != 128 || (192 & (n = e[o++])) != 128 ? (o--, Nt()) : (s = (7 & s) << 18 | (63 & a) << 12 | (63 & i) << 6 | 63 & n, s -= 65536, r.push(55296 + (s >> 10 & 1023), 56320 + (1023 & s)))) : Nt(), r.length >= 8192 && (c = da(c, r), r.length = 0);
    }
    o = da(c, r);
  }
  return o;
}
function G2(e) {
  const t = vt(e.g);
  return j2(e.g, t);
}
function Zi(e, t, r) {
  var i = vt(e.g);
  for (i = e.g.g + i; e.g.g < i; ) r.push(t(e.g));
}
var ui = [];
function Ke(e, t, r) {
  t.g ? t.m(e, t.g, t.h, r) : t.m(e, t.h, r);
}
var b = class {
  constructor(e, t) {
    this.u = F2(e, t);
  }
  toJSON() {
    try {
      var e = I2(this);
    } finally {
      L2 = void 0;
    }
    return e;
  }
  l() {
    var e = bh;
    return e.g ? e.l(this, e.g, e.h) : e.l(this, e.h, e.defaultValue);
  }
  clone() {
    const e = this.u;
    return new this.constructor(zi(e, 0 | e[C], !1));
  }
  O() {
    return !!(2 & (0 | this.u[C]));
  }
};
function Ia(e) {
  return e ? /^\d+$/.test(e) ? (Gi(e), new ho(G, te)) : null : Bu ||= new ho(0, 0);
}
b.prototype.W = Qr, b.prototype.toString = function() {
  return this.u.toString();
};
var ho = class {
  constructor(e, t) {
    this.h = e >>> 0, this.g = t >>> 0;
  }
};
let Bu;
function Fa(e) {
  return e ? /^-?\d+$/.test(e) ? (Gi(e), new fo(G, te)) : null : $u ||= new fo(0, 0);
}
var fo = class {
  constructor(e, t) {
    this.h = e >>> 0, this.g = t >>> 0;
  }
};
let $u;
function tr(e, t, r) {
  for (; r > 0 || t > 127; ) e.g.push(127 & t | 128), t = (t >>> 7 | r << 25) >>> 0, r >>>= 7;
  e.g.push(t);
}
function Cr(e, t) {
  for (; t > 127; ) e.g.push(127 & t | 128), t >>>= 7;
  e.g.push(t);
}
function Yi(e, t) {
  if (t >= 0) Cr(e, t);
  else {
    for (let r = 0; r < 9; r++) e.g.push(127 & t | 128), t >>= 7;
    e.g.push(1);
  }
}
function Xr(e, t) {
  e.g.push(t >>> 0 & 255), e.g.push(t >>> 8 & 255), e.g.push(t >>> 16 & 255), e.g.push(t >>> 24 & 255);
}
function hr(e, t) {
  t.length !== 0 && (e.l.push(t), e.h += t.length);
}
function Be(e, t, r) {
  Cr(e.g, 8 * t + r);
}
function rs(e, t) {
  return Be(e, t, 2), t = e.g.end(), hr(e, t), t.push(e.h), t;
}
function is(e, t) {
  var r = t.pop();
  for (r = e.h + e.g.length() - r; r > 127; ) t.push(127 & r | 128), r >>>= 7, e.h++;
  t.push(r), e.h++;
}
function Ki(e, t, r) {
  Be(e, t, 2), Cr(e.g, r.length), hr(e, e.g.end()), hr(e, r);
}
function Si(e, t, r, i) {
  r != null && (t = rs(e, t), i(r, e), is(e, t));
}
function Je() {
  const e = class {
    constructor() {
      throw Error();
    }
  };
  return Object.setPrototypeOf(e, e.prototype), e;
}
var ns = Je(), V2 = Je(), os = Je(), ss = Je(), W2 = Je(), z2 = Je(), as = Je(), q2 = Je(), X2 = Je(), kr = class {
  constructor(e, t, r) {
    this.g = e, this.h = t, e = ns, this.l = !!e && r === e || !1;
  }
};
function Ji(e, t) {
  return new kr(e, t, ns);
}
function Z2(e, t, r, i, n) {
  Si(e, r, Q2(t, i), n);
}
const ju = Ji(function(e, t, r, i, n) {
  return e.h === 2 && (ei(e, Yo(t, i, r), n), !0);
}, Z2), Hu = Ji(function(e, t, r, i, n) {
  return e.h === 2 && (ei(e, Yo(t, i, r), n), !0);
}, Z2);
var Qi = Symbol(), cs = Symbol(), Ra = Symbol(), Oa = Symbol();
let Y2, K2;
function qt(e, t, r, i) {
  var n = i[e];
  if (n) return n;
  (n = {}).Ma = i, n.T = function(u) {
    switch (typeof u) {
      case "boolean":
        return M2 ||= [0, void 0, !0];
      case "number":
        return u > 0 ? void 0 : u === 0 ? Nu ||= [0, void 0] : [-u, void 0];
      case "string":
        return [0, u];
      case "object":
        return u;
    }
  }(i[0]);
  var o = i[1];
  let s = 1;
  o && o.constructor === Object && (n.ga = o, typeof (o = i[++s]) == "function" && (n.la = !0, Y2 ??= o, K2 ??= i[s + 1], o = i[s += 2]));
  const a = {};
  for (; o && Array.isArray(o) && o.length && typeof o[0] == "number" && o[0] > 0; ) {
    for (var c = 0; c < o.length; c++) a[o[c]] = o;
    o = i[++s];
  }
  for (c = 1; o !== void 0; ) {
    let u;
    typeof o == "number" && (c += o, o = i[++s]);
    var l = void 0;
    if (o instanceof kr ? u = o : (u = ju, s--), u?.l) {
      o = i[++s], l = i;
      var h = s;
      typeof o == "function" && (o = o(), l[h] = o), l = o;
    }
    for (h = c + 1, typeof (o = i[++s]) == "number" && o < 0 && (h -= o, o = i[++s]); c < h; c++) {
      const d = a[c];
      l ? r(n, c, u, l, d) : t(n, c, u, d);
    }
  }
  return i[e] = n;
}
function J2(e) {
  return Array.isArray(e) ? e[0] instanceof kr ? e : [Hu, e] : [e, void 0];
}
function Q2(e, t) {
  return e instanceof b ? e.u : Array.isArray(e) ? xt(e, t, !1) : void 0;
}
function ls(e, t, r, i) {
  const n = r.g;
  e[t] = i ? (o, s, a) => n(o, s, a, i) : n;
}
function us(e, t, r, i, n) {
  const o = r.g;
  let s, a;
  e[t] = (c, l, h) => o(c, l, h, a ||= qt(cs, ls, us, i).T, s ||= hs(i), n);
}
function hs(e) {
  let t = e[Ra];
  if (t != null) return t;
  const r = qt(cs, ls, us, e);
  return t = r.la ? (i, n) => Y2(i, n, r) : (i, n) => {
    const o = 0 | i[C];
    for (; H2(n) && n.h != 4; ) {
      var s = n.m, a = r[s];
      if (a == null) {
        var c = r.ga;
        c && (c = c[s]) && (c = Gu(c)) != null && (a = r[s] = c);
      }
      a != null && a(n, i, s) || (s = (a = n).l, vi(a), a.fa ? a = void 0 : (c = a.g.g - s, a.g.g = s, a = j2(a.g, c)), s = i, a && ((c = s[ar]) ? c.push(a) : s[ar] = [a]));
    }
    return 8192 & o && yr(i), !0;
  }, e[Ra] = t;
}
function Gu(e) {
  const t = (e = J2(e))[0].g;
  if (e = e[1]) {
    const r = hs(e), i = qt(cs, ls, us, e).T;
    return (n, o, s) => t(n, o, s, i, r);
  }
  return t;
}
function en(e, t, r) {
  e[t] = r.h;
}
function tn(e, t, r, i) {
  let n, o;
  const s = r.h;
  e[t] = (a, c, l) => s(a, c, l, o ||= qt(Qi, en, tn, i).T, n ||= el(i));
}
function el(e) {
  let t = e[Oa];
  if (!t) {
    const r = qt(Qi, en, tn, e);
    t = (i, n) => tl(i, n, r), e[Oa] = t;
  }
  return t;
}
function tl(e, t, r) {
  (function(i, n, o) {
    const s = 512 & n ? 0 : -1, a = i.length, c = a + ((n = 64 & n ? 256 & n : !!a && $i(i[a - 1])) ? -1 : 0);
    for (let l = 0; l < c; l++) o(l - s, i[l]);
    if (n) {
      i = i[a - 1];
      for (const l in i) !isNaN(l) && o(+l, i[l]);
    }
  })(e, 0 | e[C] | (r.T[1] ? 512 : 0), (i, n) => {
    if (n != null) {
      var o = function(s, a) {
        var c = s[a];
        if (c) return c;
        if ((c = s.ga) && (c = c[a])) {
          var l = (c = J2(c))[0].h;
          if (c = c[1]) {
            const h = el(c), u = qt(Qi, en, tn, c).T;
            c = s.la ? K2(u, h) : (d, f, m) => l(d, f, m, u, h);
          } else c = l;
          return s[a] = c;
        }
      }(r, i);
      o && o(t, n, i);
    }
  }), (e = Uo(e)) && function(i, n) {
    hr(i, i.g.end());
    for (let o = 0; o < n.length; o++) hr(i, Oo(n[o]) || new Uint8Array(0));
  }(t, e);
}
function Ar(e, t) {
  if (Array.isArray(t)) {
    var r = 0 | t[C];
    if (4 & r) return t;
    for (var i = 0, n = 0; i < t.length; i++) {
      const o = e(t[i]);
      o != null && (t[n++] = o);
    }
    return n < i && (t.length = n), le(t, -6145 & (5 | r)), 2 & r && Object.freeze(t), t;
  }
}
function Ae(e, t, r) {
  return new kr(e, t, r);
}
function xr(e, t, r) {
  return new kr(e, t, r);
}
function xe(e, t, r) {
  J(e, 0 | e[C], t, r);
}
var Vu = Ji(function(e, t, r, i, n) {
  return e.h === 2 && (e = ei(e, xt([void 0, void 0], i, !0), n), Ft(i = 0 | t[C]), (n = _t(t, i, r)) instanceof st ? (2 & n.M) != 0 ? ((n = n.da()).push(e), J(t, i, r, n)) : n.Ja(e) : Array.isArray(n) ? (2 & (0 | n[C]) && J(t, i, r, n = O2(n)), n.push(e)) : J(t, i, r, [e]), !0);
}, function(e, t, r, i, n) {
  if (t instanceof st) t.forEach((o, s) => {
    Si(e, r, xt([s, o], i, !1), n);
  });
  else if (Array.isArray(t)) for (let o = 0; o < t.length; o++) {
    const s = t[o];
    Array.isArray(s) && Si(e, r, xt(s, i, !1), n);
  }
});
function rl(e, t, r) {
  if (t = function(i) {
    if (i == null) return i;
    const n = typeof i;
    if (n === "bigint") return String(Wr(64, i));
    if (zr(i)) {
      if (n === "string") return T2(i);
      if (n === "number") return Go(i);
    }
  }(t), t != null && (typeof t == "string" && Fa(t), t != null))
    switch (Be(e, r, 0), typeof t) {
      case "number":
        e = e.g, Wt(t), tr(e, G, te);
        break;
      case "bigint":
        r = BigInt.asUintN(64, t), r = new fo(Number(r & BigInt(4294967295)), Number(r >> BigInt(32))), tr(e.g, r.h, r.g);
        break;
      default:
        r = Fa(t), tr(e.g, r.h, r.g);
    }
}
function il(e, t, r) {
  (t = br(t)) != null && t != null && (Be(e, r, 0), Yi(e.g, t));
}
function nl(e, t, r) {
  (t = C2(t)) != null && (Be(e, r, 0), e.g.g.push(t ? 1 : 0));
}
function ol(e, t, r) {
  (t = lr(t)) != null && Ki(e, r, u2(t));
}
function sl(e, t, r, i, n) {
  Si(e, r, Q2(t, i), n);
}
function al(e, t, r) {
  t == null || typeof t == "string" || t instanceof pt || (Gt(t) ? Gt(t) && Po(_2) : t = void 0), t != null && Ki(e, r, Jo(t).buffer);
}
function cl(e, t, r) {
  return (e.h === 5 || e.h === 2) && (t = Er(t, 0 | t[C], r, !1), e.h == 2 ? Zi(e, uo, t) : t.push(uo(e.g)), !0);
}
var ut = Ae(function(e, t, r) {
  if (e.h !== 1) return !1;
  var i = e.g;
  e = lo(i);
  const n = lo(i);
  i = 2 * (n >> 31) + 1;
  const o = n >>> 20 & 2047;
  return e = 4294967296 * (1048575 & n) + e, xe(t, r, o == 2047 ? e ? NaN : i * (1 / 0) : o == 0 ? 5e-324 * i * e : i * Math.pow(2, o - 1075) * (e + 4503599627370496)), !0;
}, function(e, t, r) {
  (t = Rt(t)) != null && (Be(e, r, 1), e = e.g, (r = w2 ||= new DataView(new ArrayBuffer(8))).setFloat64(0, +t, !0), G = r.getUint32(0, !0), te = r.getUint32(4, !0), Xr(e, G), Xr(e, te));
}, Je()), ue = Ae(function(e, t, r) {
  return e.h === 5 && (xe(t, r, uo(e.g)), !0);
}, function(e, t, r) {
  (t = Rt(t)) != null && (Be(e, r, 5), e = e.g, Bo(t), Xr(e, G));
}, as), Wu = xr(cl, function(e, t, r) {
  if ((t = Ar(Rt, t)) != null) for (let s = 0; s < t.length; s++) {
    var i = e, n = r, o = t[s];
    o != null && (Be(i, n, 5), i = i.g, Bo(o), Xr(i, G));
  }
}, as), ds = xr(cl, function(e, t, r) {
  if ((t = Ar(Rt, t)) != null && t.length) {
    Be(e, r, 2), Cr(e.g, 4 * t.length);
    for (let i = 0; i < t.length; i++) r = e.g, Bo(t[i]), Xr(r, G);
  }
}, as), Lt = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, Qo(e.g, jo)), !0);
}, rl, z2), Gn = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, (e = Qo(e.g, jo)) === 0 ? void 0 : e), !0);
}, rl, z2), zu = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, Qo(e.g, $o)), !0);
}, function(e, t, r) {
  if ((t = xu(t)) != null && (typeof t == "string" && Ia(t), t != null))
    switch (Be(e, r, 0), typeof t) {
      case "number":
        e = e.g, Wt(t), tr(e, G, te);
        break;
      case "bigint":
        r = BigInt.asUintN(64, t), r = new ho(Number(r & BigInt(4294967295)), Number(r >> BigInt(32))), tr(e.g, r.h, r.g);
        break;
      default:
        r = Ia(t), tr(e.g, r.h, r.g);
    }
}, Je()), re = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, St(e.g)), !0);
}, il, ss), rn = xr(function(e, t, r) {
  return (e.h === 0 || e.h === 2) && (t = Er(t, 0 | t[C], r, !1), e.h == 2 ? Zi(e, St, t) : t.push(St(e.g)), !0);
}, function(e, t, r) {
  if ((t = Ar(br, t)) != null && t.length) {
    r = rs(e, r);
    for (let i = 0; i < t.length; i++) Yi(e.g, t[i]);
    is(e, r);
  }
}, ss), er = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, (e = St(e.g)) === 0 ? void 0 : e), !0);
}, il, ss), Z = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, es(e.g)), !0);
}, nl, V2), rr = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, (e = es(e.g)) === !1 ? void 0 : e), !0);
}, nl, V2), ye = xr(function(e, t, r) {
  return e.h === 2 && (e = ts(e), Er(t, 0 | t[C], r, !1).push(e), !0);
}, function(e, t, r) {
  if ((t = Ar(lr, t)) != null) for (let s = 0; s < t.length; s++) {
    var i = e, n = r, o = t[s];
    o != null && Ki(i, n, u2(o));
  }
}, os), Et = Ae(function(e, t, r) {
  return e.h === 2 && (xe(t, r, (e = ts(e)) === "" ? void 0 : e), !0);
}, ol, os), D = Ae(function(e, t, r) {
  return e.h === 2 && (xe(t, r, ts(e)), !0);
}, ol, os), pe = function(e, t, r = ns) {
  return new kr(e, t, r);
}(function(e, t, r, i, n) {
  return e.h === 2 && (i = xt(void 0, i, !0), Er(t, 0 | t[C], r, !0).push(i), ei(e, i, n), !0);
}, function(e, t, r, i, n) {
  if (Array.isArray(t)) for (let o = 0; o < t.length; o++) sl(e, t[o], r, i, n);
}), P = Ji(function(e, t, r, i, n, o) {
  return e.h === 2 && (P2(t, 0 | t[C], o, r), ei(e, t = Yo(t, i, r), n), !0);
}, sl), ll = Ae(function(e, t, r) {
  return e.h === 2 && (xe(t, r, G2(e)), !0);
}, al, q2), qu = xr(function(e, t, r) {
  return (e.h === 0 || e.h === 2) && (t = Er(t, 0 | t[C], r, !1), e.h == 2 ? Zi(e, vt, t) : t.push(vt(e.g)), !0);
}, function(e, t, r) {
  if ((t = Ar(k2, t)) != null) for (let s = 0; s < t.length; s++) {
    var i = e, n = r, o = t[s];
    o != null && (Be(i, n, 0), Cr(i.g, o));
  }
}, W2), Xu = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, (e = vt(e.g)) === 0 ? void 0 : e), !0);
}, function(e, t, r) {
  (t = k2(t)) != null && t != null && (Be(e, r, 0), Cr(e.g, t));
}, W2), De = Ae(function(e, t, r) {
  return e.h === 0 && (xe(t, r, St(e.g)), !0);
}, function(e, t, r) {
  (t = br(t)) != null && (t = parseInt(t, 10), Be(e, r, 0), Yi(e.g, t));
}, X2);
class Zu {
  constructor(t, r) {
    this.h = t, this.g = r, this.l = R, this.m = A, this.defaultValue = void 0;
  }
  register() {
    Ni(this);
  }
}
function Qe(e, t) {
  return new Zu(e, t);
}
function Ot(e, t) {
  return (r, i) => {
    if (ui.length) {
      const o = ui.pop();
      o.o(i), Hn(o.g, r, i), r = o;
    } else r = new class {
      constructor(o, s) {
        if (Ma.length) {
          const a = Ma.pop();
          Hn(a, o, s), o = a;
        } else o = new class {
          constructor(a, c) {
            this.h = null, this.m = !1, this.g = this.l = this.j = 0, Hn(this, a, c);
          }
          clear() {
            this.h = null, this.m = !1, this.g = this.l = this.j = 0, this.aa = !1;
          }
        }(o, s);
        this.g = o, this.l = this.g.g, this.h = this.m = -1, this.o(s);
      }
      o({ fa: o = !1 } = {}) {
        this.fa = o;
      }
    }(r, i);
    try {
      const o = new e(), s = o.u;
      hs(t)(s, r);
      var n = o;
    } finally {
      r.g.clear(), r.m = -1, r.h = -1, ui.length < 100 && ui.push(r);
    }
    return n;
  };
}
function nn(e) {
  return function() {
    const t = new class {
      constructor() {
        this.l = [], this.h = 0, this.g = new class {
          constructor() {
            this.g = [];
          }
          length() {
            return this.g.length;
          }
          end() {
            const s = this.g;
            return this.g = [], s;
          }
        }();
      }
    }();
    tl(this.u, t, qt(Qi, en, tn, e)), hr(t, t.g.end());
    const r = new Uint8Array(t.h), i = t.l, n = i.length;
    let o = 0;
    for (let s = 0; s < n; s++) {
      const a = i[s];
      r.set(a, o), o += a.length;
    }
    return t.l = [r], r;
  };
}
var Pa = class extends b {
  constructor(e) {
    super(e);
  }
}, Na = [0, Et, Ae(function(e, t, r) {
  return e.h === 2 && (xe(t, r, (e = G2(e)) === Vt() ? void 0 : e), !0);
}, function(e, t, r) {
  if (t != null) {
    if (t instanceof b) {
      const i = t.Oa;
      return void (i && (t = i(t), t != null && Ki(e, r, Jo(t).buffer)));
    }
    if (Array.isArray(t)) return;
  }
  al(e, t, r);
}, q2)];
let Vn, Da = globalThis.trustedTypes;
function Ua(e) {
  Vn === void 0 && (Vn = function() {
    let r = null;
    if (!Da) return r;
    try {
      const i = (n) => n;
      r = Da.createPolicy("goog#html", { createHTML: i, createScript: i, createScriptURL: i });
    } catch {
    }
    return r;
  }());
  var t = Vn;
  return new class {
    constructor(r) {
      this.g = r;
    }
    toString() {
      return this.g + "";
    }
  }(t ? t.createScriptURL(e) : e);
}
function Yu(e, ...t) {
  if (t.length === 0) return Ua(e[0]);
  let r = e[0];
  for (let i = 0; i < t.length; i++) r += encodeURIComponent(t[i]) + e[i + 1];
  return Ua(r);
}
var ul = [0, re, De, Z, -1, rn, De, -1], Ku = class extends b {
  constructor(e) {
    super(e);
  }
}, hl = [0, Z, D, Z, De, -1, xr(function(e, t, r) {
  return (e.h === 0 || e.h === 2) && (t = Er(t, 0 | t[C], r, !1), e.h == 2 ? Zi(e, Uu, t) : t.push(St(e.g)), !0);
}, function(e, t, r) {
  if ((t = Ar(br, t)) != null && t.length) {
    r = rs(e, r);
    for (let i = 0; i < t.length; i++) Yi(e.g, t[i]);
    is(e, r);
  }
}, X2), D, -1, [0, Z, -1], De, Z, -1], dl = [0, D, -2], Ba = class extends b {
  constructor(e) {
    super(e);
  }
}, fl = [0], pl = [0, re, Z, 1, Z, -3], Ue = class extends b {
  constructor(e) {
    super(e, 2);
  }
}, he = {};
he[336783863] = [0, D, Z, -1, re, [0, [1, 2, 3, 4, 5, 6, 7, 8, 9], P, fl, P, hl, P, dl, P, pl, P, ul, P, [0, D, -2], P, [0, D, De], P, [0, De, D, -1], P, [0, De, -1]], [0, D], Z, [0, [1, 3], [2, 4], P, [0, rn], -1, P, [0, ye], -1, pe, [0, D, -1]], D];
var $a = [0, Gn, -1, rr, -3, Gn, rn, Et, er, Gn, -1, rr, er, rr, -2, Et];
function $e(e, t) {
  co(e, 2, wr(t), "");
}
function W(e, t) {
  Xi(e, 3, t);
}
function I(e, t) {
  Xi(e, 4, t);
}
var ke = class extends b {
  constructor(e) {
    super(e, 500);
  }
  o(e) {
    return A(this, 0, 7, e);
  }
}, Br = [-1, {}], ja = [0, D, 1, Br], Ha = [0, D, ye, Br];
function je(e, t) {
  xi(e, 1, ke, t);
}
function q(e, t) {
  Xi(e, 10, t);
}
function O(e, t) {
  Xi(e, 15, t);
}
var Ie = class extends b {
  constructor(e) {
    super(e, 500);
  }
  o(e) {
    return A(this, 0, 1001, e);
  }
}, ml = [-500, pe, [-500, Et, -1, ye, -3, [-2, he, Z], pe, Na, er, -1, ja, Ha, pe, [0, Et, rr], Et, $a, er, ye, 987, ye], 4, pe, [-500, D, -1, [-1, {}], 998, D], pe, [-500, D, ye, -1, [-2, {}, Z], 997, ye, -1], er, pe, [-500, D, ye, Br, 998, ye], ye, er, ja, Ha, pe, [0, Et, -1, Br], ye, -2, $a, Et, -1, rr, [0, rr, Xu], 978, Br, pe, Na];
Ie.prototype.g = nn(ml);
var Ju = Ot(Ie, ml), Qu = class extends b {
  constructor(e) {
    super(e);
  }
}, gl = class extends b {
  constructor(e) {
    super(e);
  }
  g() {
    return gt(this, Qu, 1);
  }
}, vl = [0, pe, [0, re, ue, D, -1]], on = Ot(gl, vl), eh = class extends b {
  constructor(e) {
    super(e);
  }
}, th = class extends b {
  constructor(e) {
    super(e);
  }
}, Wn = class extends b {
  constructor(e) {
    super(e);
  }
  h() {
    return R(this, eh, 2);
  }
  g() {
    return gt(this, th, 5);
  }
}, _l = Ot(class extends b {
  constructor(e) {
    super(e);
  }
}, [0, ye, rn, ds, [0, De, [0, re, -3], [0, ue, -3], [0, re, -1, [0, pe, [0, re, -2]]], pe, [0, ue, -1, D, ue]], D, -1, Lt, pe, [0, re, ue], ye, Lt]), yl = class extends b {
  constructor(e) {
    super(e);
  }
}, ir = Ot(class extends b {
  constructor(e) {
    super(e);
  }
}, [0, pe, [0, ue, -4]]), bl = class extends b {
  constructor(e) {
    super(e);
  }
}, ti = Ot(class extends b {
  constructor(e) {
    super(e);
  }
}, [0, pe, [0, ue, -4]]), rh = class extends b {
  constructor(e) {
    super(e);
  }
}, ih = [0, re, -1, ds, De], wl = class extends b {
  constructor(e) {
    super(e);
  }
};
wl.prototype.g = nn([0, ue, -4, Lt]);
var nh = class extends b {
  constructor(e) {
    super(e);
  }
}, oh = Ot(class extends b {
  constructor(e) {
    super(e);
  }
}, [0, pe, [0, 1, re, D, vl], Lt]), Ga = class extends b {
  constructor(e) {
    super(e);
  }
}, sh = class extends b {
  constructor(e) {
    super(e);
  }
  ma() {
    const e = R2(this);
    return e ?? Vt();
  }
}, ah = class extends b {
  constructor(e) {
    super(e);
  }
}, El = [1, 2], ch = Ot(class extends b {
  constructor(e) {
    super(e);
  }
}, [0, pe, [0, El, P, [0, ds], P, [0, ll], re, D], Lt]), fs = class extends b {
  constructor(e) {
    super(e);
  }
}, Cl = [0, D, re, ue, ye, -1], Va = class extends b {
  constructor(e) {
    super(e);
  }
}, lh = [0, Z, -1], Wa = class extends b {
  constructor(e) {
    super(e);
  }
}, _i = [1, 2, 3, 4, 5], Li = class extends b {
  constructor(e) {
    super(e);
  }
  g() {
    return R2(this) != null;
  }
  h() {
    return qe(this, 2) != null;
  }
}, Y = class extends b {
  constructor(e) {
    super(e);
  }
  g() {
    return C2(ur(this, 2)) ?? !1;
  }
}, kl = [0, ll, D, [0, re, Lt, -1], [0, zu, Lt]], ae = [0, kl, Z, [0, _i, P, pl, P, hl, P, ul, P, fl, P, dl], De], sn = class extends b {
  constructor(e) {
    super(e);
  }
}, ps = [0, ae, ue, -1, re], uh = Qe(502141897, sn);
he[502141897] = ps;
var hh = Ot(class extends b {
  constructor(e) {
    super(e);
  }
}, [0, [0, De, -1, Wu, qu], ih]), Al = class extends b {
  constructor(e) {
    super(e);
  }
}, xl = class extends b {
  constructor(e) {
    super(e);
  }
}, ms = [0, ae, ue, [0, ae], Z], Tl = [0, ae, ps, ms, ue, [0, [0, kl]]], dh = Qe(508968150, xl);
he[508968150] = Tl, he[508968149] = ms;
var Sl = class extends b {
  constructor(e) {
    super(e);
  }
}, fh = Qe(513916220, Sl);
he[513916220] = [0, ae, Tl, re];
var Kt = class extends b {
  constructor(e) {
    super(e);
  }
  h() {
    return R(this, fs, 2);
  }
  g() {
    V(this, 2);
  }
}, Ll = [0, ae, Cl];
he[478825465] = Ll;
var ph = class extends b {
  constructor(e) {
    super(e);
  }
}, Ml = class extends b {
  constructor(e) {
    super(e);
  }
}, gs = class extends b {
  constructor(e) {
    super(e);
  }
}, vs = class extends b {
  constructor(e) {
    super(e);
  }
}, Il = class extends b {
  constructor(e) {
    super(e);
  }
}, za = [0, ae, [0, ae], Ll, -1], Fl = [0, ae, ue, re], _s = [0, ae, ue], Rl = [0, ae, Fl, _s, ue], mh = Qe(479097054, Il);
he[479097054] = [0, ae, Rl, za], he[463370452] = za, he[464864288] = Fl;
var gh = Qe(462713202, vs);
he[462713202] = Rl, he[474472470] = _s;
var vh = class extends b {
  constructor(e) {
    super(e);
  }
}, Ol = class extends b {
  constructor(e) {
    super(e);
  }
}, Pl = class extends b {
  constructor(e) {
    super(e);
  }
}, Nl = class extends b {
  constructor(e) {
    super(e);
  }
}, ys = [0, ae, ue, -1, re], po = [0, ae, ue, Z];
Nl.prototype.g = nn([0, ae, _s, [0, ae], ps, ms, ys, po]);
var Dl = class extends b {
  constructor(e) {
    super(e);
  }
}, _h = Qe(456383383, Dl);
he[456383383] = [0, ae, Cl];
var Ul = class extends b {
  constructor(e) {
    super(e);
  }
}, yh = Qe(476348187, Ul);
he[476348187] = [0, ae, lh];
var Bl = class extends b {
  constructor(e) {
    super(e);
  }
}, qa = class extends b {
  constructor(e) {
    super(e);
  }
}, $l = [0, De, -1], bh = Qe(458105876, class extends b {
  constructor(e) {
    super(e);
  }
  g() {
    var e = this.u;
    const t = 0 | e[C], r = 2 & t;
    return e = function(i, n, o) {
      var s = qa;
      const a = 2 & n;
      let c = !1;
      if (o == null) {
        if (a) return La();
        o = [];
      } else if (o.constructor === st) {
        if ((2 & o.M) == 0 || a) return o;
        o = o.da();
      } else Array.isArray(o) ? c = !!(2 & (0 | o[C])) : o = [];
      if (a) {
        if (!o.length) return La();
        c || (c = !0, yr(o));
      } else c && (c = !1, o = O2(o));
      return c || (64 & (0 | o[C]) ? o[C] &= -33 : 32 & n && Ui(o, 32)), J(i, n, 2, s = new st(o, s, Tu, void 0)), s;
    }(e, t, _t(e, t, 2)), !r && qa && (e.pa = !0), e;
  }
});
he[458105876] = [0, $l, Vu, [!0, Lt, [0, D, -1, ye]]];
var bs = class extends b {
  constructor(e) {
    super(e);
  }
}, jl = Qe(458105758, bs);
he[458105758] = [0, ae, D, $l];
var Hl = class extends b {
  constructor(e) {
    super(e);
  }
}, wh = Qe(443442058, Hl);
he[443442058] = [0, ae, D, re, ue, ye, -1, Z, ue], he[514774813] = ys;
var Gl = class extends b {
  constructor(e) {
    super(e);
  }
}, Eh = Qe(516587230, Gl);
function mo(e, t) {
  return t = t ? t.clone() : new fs(), e.displayNamesLocale !== void 0 ? V(t, 1, wr(e.displayNamesLocale)) : e.displayNamesLocale === void 0 && V(t, 1), e.maxResults !== void 0 ? at(t, 2, e.maxResults) : "maxResults" in e && V(t, 2), e.scoreThreshold !== void 0 ? w(t, 3, e.scoreThreshold) : "scoreThreshold" in e && V(t, 3), e.categoryAllowlist !== void 0 ? Ti(t, 4, e.categoryAllowlist) : "categoryAllowlist" in e && V(t, 4), e.categoryDenylist !== void 0 ? Ti(t, 5, e.categoryDenylist) : "categoryDenylist" in e && V(t, 5), t;
}
function ws(e, t = -1, r = "") {
  return { categories: e.map((i) => ({ index: ze(i, 1) ?? 0 ?? -1, score: oe(i, 2) ?? 0, categoryName: qe(i, 3) ?? "" ?? "", displayName: qe(i, 4) ?? "" ?? "" })), headIndex: t, headName: r };
}
function Vl(e) {
  var t = jt(e, 3, Rt, $t()), r = jt(e, 2, br, $t()), i = jt(e, 1, lr, $t()), n = jt(e, 9, lr, $t());
  const o = { categories: [], keypoints: [] };
  for (let s = 0; s < t.length; s++) o.categories.push({ score: t[s], index: r[s] ?? -1, categoryName: i[s] ?? "", displayName: n[s] ?? "" });
  if ((t = R(e, Wn, 4)?.h()) && (o.boundingBox = { originX: ze(t, 1) ?? 0, originY: ze(t, 2) ?? 0, width: ze(t, 3) ?? 0, height: ze(t, 4) ?? 0, angle: 0 }), R(e, Wn, 4)?.g().length) for (const s of R(e, Wn, 4).g()) o.keypoints.push({ x: gi(s, 1) ?? 0, y: gi(s, 2) ?? 0, score: gi(s, 4) ?? 0, label: qe(s, 3) ?? "" });
  return o;
}
function an(e) {
  const t = [];
  for (const r of gt(e, bl, 1)) t.push({ x: oe(r, 1) ?? 0, y: oe(r, 2) ?? 0, z: oe(r, 3) ?? 0, visibility: oe(r, 4) ?? 0 });
  return t;
}
function $r(e) {
  const t = [];
  for (const r of gt(e, yl, 1)) t.push({ x: oe(r, 1) ?? 0, y: oe(r, 2) ?? 0, z: oe(r, 3) ?? 0, visibility: oe(r, 4) ?? 0 });
  return t;
}
function Xa(e) {
  return Array.from(e, (t) => t > 127 ? t - 256 : t);
}
function Za(e, t) {
  if (e.length !== t.length) throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);
  let r = 0, i = 0, n = 0;
  for (let o = 0; o < e.length; o++) r += e[o] * t[o], i += e[o] * e[o], n += t[o] * t[o];
  if (i <= 0 || n <= 0) throw Error("Cannot compute cosine similarity on embedding with 0 norm.");
  return r / Math.sqrt(i * n);
}
let hi;
he[516587230] = [0, ae, ys, po, ue], he[518928384] = po;
const Ch = new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 5, 1, 96, 0, 1, 123, 3, 2, 1, 0, 10, 10, 1, 8, 0, 65, 0, 253, 15, 253, 98, 11]);
async function Wl() {
  if (hi === void 0) try {
    await WebAssembly.instantiate(Ch), hi = !0;
  } catch {
    hi = !1;
  }
  return hi;
}
async function Mr(e, t = Yu``) {
  const r = await Wl() ? "wasm_internal" : "wasm_nosimd_internal";
  return { wasmLoaderPath: `${t}/${e}_${r}.js`, wasmBinaryPath: `${t}/${e}_${r}.wasm` };
}
var Dt = class {
};
function zl() {
  var e = navigator;
  return typeof OffscreenCanvas < "u" && (!function(t = navigator) {
    return (t = t.userAgent).includes("Safari") && !t.includes("Chrome");
  }(e) || !!((e = e.userAgent.match(/Version\/([\d]+).*Safari/)) && e.length >= 1 && Number(e[1]) >= 17));
}
async function Ya(e) {
  if (typeof importScripts != "function") {
    const t = document.createElement("script");
    return t.src = e.toString(), t.crossOrigin = "anonymous", new Promise((r, i) => {
      t.addEventListener("load", () => {
        r();
      }, !1), t.addEventListener("error", (n) => {
        i(n);
      }, !1), document.body.appendChild(t);
    });
  }
  importScripts(e.toString());
}
function ql(e) {
  return e.videoWidth !== void 0 ? [e.videoWidth, e.videoHeight] : e.naturalWidth !== void 0 ? [e.naturalWidth, e.naturalHeight] : e.displayWidth !== void 0 ? [e.displayWidth, e.displayHeight] : [e.width, e.height];
}
function E(e, t, r) {
  e.m || console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"), r(t = e.i.stringToNewUTF8(t)), e.i._free(t);
}
function Ka(e, t, r) {
  if (!e.i.canvas) throw Error("No OpenGL canvas configured.");
  if (r ? e.i._bindTextureToStream(r) : e.i._bindTextureToCanvas(), !(r = e.i.canvas.getContext("webgl2") || e.i.canvas.getContext("webgl"))) throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");
  e.i.gpuOriginForWebTexturesIsBottomLeft && r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL, !0), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, r.RGBA, r.UNSIGNED_BYTE, t), e.i.gpuOriginForWebTexturesIsBottomLeft && r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL, !1);
  const [i, n] = ql(t);
  return !e.l || i === e.i.canvas.width && n === e.i.canvas.height || (e.i.canvas.width = i, e.i.canvas.height = n), [i, n];
}
function Ja(e, t, r) {
  e.m || console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");
  const i = new Uint32Array(t.length);
  for (let n = 0; n < t.length; n++) i[n] = e.i.stringToNewUTF8(t[n]);
  t = e.i._malloc(4 * i.length), e.i.HEAPU32.set(i, t >> 2), r(t);
  for (const n of i) e.i._free(n);
  e.i._free(t);
}
function tt(e, t, r) {
  e.i.simpleListeners = e.i.simpleListeners || {}, e.i.simpleListeners[t] = r;
}
function bt(e, t, r) {
  let i = [];
  e.i.simpleListeners = e.i.simpleListeners || {}, e.i.simpleListeners[t] = (n, o, s) => {
    o ? (r(i, s), i = []) : i.push(n);
  };
}
Dt.forVisionTasks = function(e) {
  return Mr("vision", e);
}, Dt.forTextTasks = function(e) {
  return Mr("text", e);
}, Dt.forGenAiExperimentalTasks = function(e) {
  return Mr("genai_experimental", e);
}, Dt.forGenAiTasks = function(e) {
  return Mr("genai", e);
}, Dt.forAudioTasks = function(e) {
  return Mr("audio", e);
}, Dt.isSimdSupported = function() {
  return Wl();
};
async function kh(e, t, r, i) {
  return e = await (async (n, o, s, a, c) => {
    if (o && await Ya(o), !self.ModuleFactory || s && (await Ya(s), !self.ModuleFactory)) throw Error("ModuleFactory not set.");
    return self.Module && c && ((o = self.Module).locateFile = c.locateFile, c.mainScriptUrlOrBlob && (o.mainScriptUrlOrBlob = c.mainScriptUrlOrBlob)), c = await self.ModuleFactory(self.Module || c), self.ModuleFactory = self.Module = void 0, new n(c, a);
  })(e, r.wasmLoaderPath, r.assetLoaderPath, t, { locateFile: (n) => n.endsWith(".wasm") ? r.wasmBinaryPath.toString() : r.assetBinaryPath && n.endsWith(".data") ? r.assetBinaryPath.toString() : n }), await e.o(i), e;
}
function zn(e, t) {
  const r = R(e.baseOptions, Li, 1) || new Li();
  typeof t == "string" ? (V(r, 2, wr(t)), V(r, 1)) : t instanceof Uint8Array && (V(r, 1, Do(t, !1)), V(r, 2)), A(e.baseOptions, 0, 1, r);
}
function Qa(e) {
  try {
    const t = e.G.length;
    if (t === 1) throw Error(e.G[0].message);
    if (t > 1) throw Error("Encountered multiple errors: " + e.G.map((r) => r.message).join(", "));
  } finally {
    e.G = [];
  }
}
function v(e, t) {
  e.B = Math.max(e.B, t);
}
function cn(e, t) {
  e.A = new ke(), $e(e.A, "PassThroughCalculator"), W(e.A, "free_memory"), I(e.A, "free_memory_unused_out"), q(t, "free_memory"), je(t, e.A);
}
function dr(e, t) {
  W(e.A, t), I(e.A, t + "_unused_out");
}
function ln(e) {
  e.g.addBoolToStream(!0, "free_memory", e.B);
}
var go = class {
  constructor(e) {
    this.g = e, this.G = [], this.B = 0, this.g.setAutoRenderToScreen(!1);
  }
  l(e, t = !0) {
    if (t) {
      const r = e.baseOptions || {};
      if (e.baseOptions?.modelAssetBuffer && e.baseOptions?.modelAssetPath) throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");
      if (!(R(this.baseOptions, Li, 1)?.g() || R(this.baseOptions, Li, 1)?.h() || e.baseOptions?.modelAssetBuffer || e.baseOptions?.modelAssetPath)) throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");
      if (function(i, n) {
        let o = R(i.baseOptions, Wa, 3);
        if (!o) {
          var s = o = new Wa(), a = new Ba();
          Ur(s, 4, _i, a);
        }
        "delegate" in n && (n.delegate === "GPU" ? (n = o, s = new Ku(), Ur(n, 2, _i, s)) : (n = o, s = new Ba(), Ur(n, 4, _i, s))), A(i.baseOptions, 0, 3, o);
      }(this, r), r.modelAssetPath) return fetch(r.modelAssetPath.toString()).then((i) => {
        if (i.ok) return i.arrayBuffer();
        throw Error(`Failed to fetch model: ${r.modelAssetPath} (${i.status})`);
      }).then((i) => {
        try {
          this.g.i.FS_unlink("/model.dat");
        } catch {
        }
        this.g.i.FS_createDataFile("/", "model.dat", new Uint8Array(i), !0, !1, !1), zn(this, "/model.dat"), this.m(), this.J();
      });
      if (r.modelAssetBuffer instanceof Uint8Array) zn(this, r.modelAssetBuffer);
      else if (r.modelAssetBuffer) return async function(i) {
        const n = [];
        for (var o = 0; ; ) {
          const { done: s, value: a } = await i.read();
          if (s) break;
          n.push(a), o += a.length;
        }
        if (n.length === 0) return new Uint8Array(0);
        if (n.length === 1) return n[0];
        i = new Uint8Array(o), o = 0;
        for (const s of n) i.set(s, o), o += s.length;
        return i;
      }(r.modelAssetBuffer).then((i) => {
        zn(this, i), this.m(), this.J();
      });
    }
    return this.m(), this.J(), Promise.resolve();
  }
  J() {
  }
  ca() {
    let e;
    if (this.g.ca((t) => {
      e = Ju(t);
    }), !e) throw Error("Failed to retrieve CalculatorGraphConfig");
    return e;
  }
  setGraph(e, t) {
    this.g.attachErrorListener((r, i) => {
      this.G.push(Error(i));
    }), this.g.Ha(), this.g.setGraph(e, t), this.A = void 0, Qa(this);
  }
  finishProcessing() {
    this.g.finishProcessing(), Qa(this);
  }
  close() {
    this.A = void 0, this.g.closeGraph();
  }
};
function Ce(e, t) {
  if (!e) throw Error(`Unable to obtain required WebGL resource: ${t}`);
  return e;
}
go.prototype.close = go.prototype.close;
class Ah {
  constructor(t, r, i, n) {
    this.g = t, this.h = r, this.m = i, this.l = n;
  }
  bind() {
    this.g.bindVertexArray(this.h);
  }
  close() {
    this.g.deleteVertexArray(this.h), this.g.deleteBuffer(this.m), this.g.deleteBuffer(this.l);
  }
}
function ec(e, t, r) {
  const i = e.g;
  if (r = Ce(i.createShader(r), "Failed to create WebGL shader"), i.shaderSource(r, t), i.compileShader(r), !i.getShaderParameter(r, i.COMPILE_STATUS)) throw Error(`Could not compile WebGL shader: ${i.getShaderInfoLog(r)}`);
  return i.attachShader(e.h, r), r;
}
function tc(e, t) {
  const r = e.g, i = Ce(r.createVertexArray(), "Failed to create vertex array");
  r.bindVertexArray(i);
  const n = Ce(r.createBuffer(), "Failed to create buffer");
  r.bindBuffer(r.ARRAY_BUFFER, n), r.enableVertexAttribArray(e.P), r.vertexAttribPointer(e.P, 2, r.FLOAT, !1, 0, 0), r.bufferData(r.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), r.STATIC_DRAW);
  const o = Ce(r.createBuffer(), "Failed to create buffer");
  return r.bindBuffer(r.ARRAY_BUFFER, o), r.enableVertexAttribArray(e.J), r.vertexAttribPointer(e.J, 2, r.FLOAT, !1, 0, 0), r.bufferData(r.ARRAY_BUFFER, new Float32Array(t ? [0, 1, 0, 0, 1, 0, 1, 1] : [0, 0, 0, 1, 1, 1, 1, 0]), r.STATIC_DRAW), r.bindBuffer(r.ARRAY_BUFFER, null), r.bindVertexArray(null), new Ah(r, i, n, o);
}
function Es(e, t) {
  if (e.g) {
    if (t !== e.g) throw Error("Cannot change GL context once initialized");
  } else e.g = t;
}
function ri(e, t, r, i) {
  return Es(e, t), e.h || (e.m(), e.C()), r ? (e.s || (e.s = tc(e, !0)), r = e.s) : (e.v || (e.v = tc(e, !1)), r = e.v), t.useProgram(e.h), r.bind(), e.l(), e = i(), r.g.bindVertexArray(null), e;
}
function Mt(e, t, r) {
  return Es(e, t), e = Ce(t.createTexture(), "Failed to create texture"), t.bindTexture(t.TEXTURE_2D, e), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, r ?? t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, r ?? t.LINEAR), t.bindTexture(t.TEXTURE_2D, null), e;
}
function un(e, t, r) {
  Es(e, t), e.A || (e.A = Ce(t.createFramebuffer(), "Failed to create framebuffe.")), t.bindFramebuffer(t.FRAMEBUFFER, e.A), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, r, 0);
}
function Cs(e) {
  e.g?.bindFramebuffer(e.g.FRAMEBUFFER, null);
}
var Tr = class {
  G() {
    return `
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `;
  }
  m() {
    const e = this.g;
    if (this.h = Ce(e.createProgram(), "Failed to create WebGL program"), this.Z = ec(this, `
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`, e.VERTEX_SHADER), this.Y = ec(this, this.G(), e.FRAGMENT_SHADER), e.linkProgram(this.h), !e.getProgramParameter(this.h, e.LINK_STATUS)) throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);
    this.P = e.getAttribLocation(this.h, "aVertex"), this.J = e.getAttribLocation(this.h, "aTex");
  }
  C() {
  }
  l() {
  }
  close() {
    if (this.h) {
      const e = this.g;
      e.deleteProgram(this.h), e.deleteShader(this.Z), e.deleteShader(this.Y);
    }
    this.A && this.g.deleteFramebuffer(this.A), this.v && this.v.close(), this.s && this.s.close();
  }
}, xh = class extends Tr {
  G() {
    return `
  precision mediump float;
  uniform sampler2D backgroundTexture;
  uniform sampler2D maskTexture;
  uniform sampler2D colorMappingTexture;
  varying vec2 vTex;
  void main() {
    vec4 backgroundColor = texture2D(backgroundTexture, vTex);
    float category = texture2D(maskTexture, vTex).r;
    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));
    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);
  }
 `;
  }
  C() {
    const e = this.g;
    e.activeTexture(e.TEXTURE1), this.B = Mt(this, e, e.LINEAR), e.activeTexture(e.TEXTURE2), this.j = Mt(this, e, e.NEAREST);
  }
  m() {
    super.m();
    const e = this.g;
    this.L = Ce(e.getUniformLocation(this.h, "backgroundTexture"), "Uniform location"), this.U = Ce(e.getUniformLocation(this.h, "colorMappingTexture"), "Uniform location"), this.K = Ce(e.getUniformLocation(this.h, "maskTexture"), "Uniform location");
  }
  l() {
    super.l();
    const e = this.g;
    e.uniform1i(this.K, 0), e.uniform1i(this.L, 1), e.uniform1i(this.U, 2);
  }
  close() {
    this.B && this.g.deleteTexture(this.B), this.j && this.g.deleteTexture(this.j), super.close();
  }
}, Th = class extends Tr {
  G() {
    return `
  precision mediump float;
  uniform sampler2D maskTexture;
  uniform sampler2D defaultTexture;
  uniform sampler2D overlayTexture;
  varying vec2 vTex;
  void main() {
    float confidence = texture2D(maskTexture, vTex).r;
    vec4 defaultColor = texture2D(defaultTexture, vTex);
    vec4 overlayColor = texture2D(overlayTexture, vTex);
    // Apply the alpha from the overlay and merge in the default color
    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);
    gl_FragColor = mix(defaultColor, overlayColor, confidence);
  }
 `;
  }
  C() {
    const e = this.g;
    e.activeTexture(e.TEXTURE1), this.j = Mt(this, e), e.activeTexture(e.TEXTURE2), this.B = Mt(this, e);
  }
  m() {
    super.m();
    const e = this.g;
    this.K = Ce(e.getUniformLocation(this.h, "defaultTexture"), "Uniform location"), this.L = Ce(e.getUniformLocation(this.h, "overlayTexture"), "Uniform location"), this.H = Ce(e.getUniformLocation(this.h, "maskTexture"), "Uniform location");
  }
  l() {
    super.l();
    const e = this.g;
    e.uniform1i(this.H, 0), e.uniform1i(this.K, 1), e.uniform1i(this.L, 2);
  }
  close() {
    this.j && this.g.deleteTexture(this.j), this.B && this.g.deleteTexture(this.B), super.close();
  }
};
function ht(e, t) {
  switch (t) {
    case 0:
      return e.g.find((r) => r instanceof Uint8Array);
    case 1:
      return e.g.find((r) => r instanceof Float32Array);
    case 2:
      return e.g.find((r) => typeof WebGLTexture < "u" && r instanceof WebGLTexture);
    default:
      throw Error(`Type is not supported: ${t}`);
  }
}
function vo(e) {
  var t = ht(e, 1);
  if (!t) {
    if (t = ht(e, 0)) t = new Float32Array(t).map((i) => i / 255);
    else {
      t = new Float32Array(e.width * e.height);
      const i = fr(e);
      var r = ks(e);
      if (un(r, i, Xl(e)), "iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform) || navigator.userAgent.includes("Mac") && "document" in self && "ontouchend" in self.document) {
        r = new Float32Array(e.width * e.height * 4), i.readPixels(0, 0, e.width, e.height, i.RGBA, i.FLOAT, r);
        for (let n = 0, o = 0; n < t.length; ++n, o += 4) t[n] = r[o];
      } else i.readPixels(0, 0, e.width, e.height, i.RED, i.FLOAT, t);
    }
    e.g.push(t);
  }
  return t;
}
function Xl(e) {
  let t = ht(e, 2);
  if (!t) {
    const r = fr(e);
    t = Yl(e);
    const i = vo(e), n = Zl(e);
    r.texImage2D(r.TEXTURE_2D, 0, n, e.width, e.height, 0, r.RED, r.FLOAT, i), _o(e);
  }
  return t;
}
function fr(e) {
  if (!e.canvas) throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");
  return e.h || (e.h = Ce(e.canvas.getContext("webgl2"), "You cannot use a canvas that is already bound to a different type of rendering context.")), e.h;
}
function Zl(e) {
  if (e = fr(e), !di) if (e.getExtension("EXT_color_buffer_float") && e.getExtension("OES_texture_float_linear") && e.getExtension("EXT_float_blend")) di = e.R32F;
  else {
    if (!e.getExtension("EXT_color_buffer_half_float")) throw Error("GPU does not fully support 4-channel float32 or float16 formats");
    di = e.R16F;
  }
  return di;
}
function ks(e) {
  return e.l || (e.l = new Tr()), e.l;
}
function Yl(e) {
  const t = fr(e);
  t.viewport(0, 0, e.width, e.height), t.activeTexture(t.TEXTURE0);
  let r = ht(e, 2);
  return r || (r = Mt(ks(e), t, e.m ? t.LINEAR : t.NEAREST), e.g.push(r), e.j = !0), t.bindTexture(t.TEXTURE_2D, r), r;
}
function _o(e) {
  e.h.bindTexture(e.h.TEXTURE_2D, null);
}
var di, de = class {
  constructor(e, t, r, i, n, o, s) {
    this.g = e, this.m = t, this.j = r, this.canvas = i, this.l = n, this.width = o, this.height = s, this.j && --rc === 0 && console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.");
  }
  Da() {
    return !!ht(this, 0);
  }
  ja() {
    return !!ht(this, 1);
  }
  R() {
    return !!ht(this, 2);
  }
  ia() {
    return (t = ht(e = this, 0)) || (t = vo(e), t = new Uint8Array(t.map((r) => 255 * r)), e.g.push(t)), t;
    var e, t;
  }
  ha() {
    return vo(this);
  }
  N() {
    return Xl(this);
  }
  clone() {
    const e = [];
    for (const t of this.g) {
      let r;
      if (t instanceof Uint8Array) r = new Uint8Array(t);
      else if (t instanceof Float32Array) r = new Float32Array(t);
      else {
        if (!(t instanceof WebGLTexture)) throw Error(`Type is not supported: ${t}`);
        {
          const i = fr(this), n = ks(this);
          i.activeTexture(i.TEXTURE1), r = Mt(n, i, this.m ? i.LINEAR : i.NEAREST), i.bindTexture(i.TEXTURE_2D, r);
          const o = Zl(this);
          i.texImage2D(i.TEXTURE_2D, 0, o, this.width, this.height, 0, i.RED, i.FLOAT, null), i.bindTexture(i.TEXTURE_2D, null), un(n, i, r), ri(n, i, !1, () => {
            Yl(this), i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT), i.drawArrays(i.TRIANGLE_FAN, 0, 4), _o(this);
          }), Cs(n), _o(this);
        }
      }
      e.push(r);
    }
    return new de(e, this.m, this.R(), this.canvas, this.l, this.width, this.height);
  }
  close() {
    this.j && fr(this).deleteTexture(ht(this, 2)), rc = -1;
  }
};
de.prototype.close = de.prototype.close, de.prototype.clone = de.prototype.clone, de.prototype.getAsWebGLTexture = de.prototype.N, de.prototype.getAsFloat32Array = de.prototype.ha, de.prototype.getAsUint8Array = de.prototype.ia, de.prototype.hasWebGLTexture = de.prototype.R, de.prototype.hasFloat32Array = de.prototype.ja, de.prototype.hasUint8Array = de.prototype.Da;
var rc = 250;
const Sh = { color: "white", lineWidth: 4, radius: 6 };
function qn(e) {
  return { ...Sh, fillColor: (e = e || {}).color, ...e };
}
function lt(e, t) {
  return e instanceof Function ? e(t) : e;
}
function ic(e, t, r) {
  return Math.max(Math.min(t, r), Math.min(Math.max(t, r), e));
}
function Ir(e) {
  if (!e.l) throw Error("CPU rendering requested but CanvasRenderingContext2D not provided.");
  return e.l;
}
function Zr(e) {
  if (!e.j) throw Error("GPU rendering requested but WebGL2RenderingContext not provided.");
  return e.j;
}
function nc(e, t, r) {
  if (t.R()) r(t.N());
  else {
    const i = t.ja() ? t.ha() : t.ia();
    e.m = e.m ?? new Tr();
    const n = Zr(e);
    r((e = new de([i], t.m, !1, n.canvas, e.m, t.width, t.height)).N()), e.close();
  }
}
function oc(e, t, r, i) {
  const n = function(a) {
    return a.g || (a.g = new xh()), a.g;
  }(e), o = Zr(e), s = Array.isArray(r) ? new ImageData(new Uint8ClampedArray(r), 1, 1) : r;
  ri(n, o, !0, () => {
    (function(c, l, h, u) {
      const d = c.g;
      if (d.activeTexture(d.TEXTURE0), d.bindTexture(d.TEXTURE_2D, l), d.activeTexture(d.TEXTURE1), d.bindTexture(d.TEXTURE_2D, c.B), d.texImage2D(d.TEXTURE_2D, 0, d.RGBA, d.RGBA, d.UNSIGNED_BYTE, h), c.H && function(f, m) {
        if (f !== m) return !1;
        f = f.entries(), m = m.entries();
        for (const [p, _] of f) {
          f = p;
          const g = _;
          var y = m.next();
          if (y.done) return !1;
          const [x, T] = y.value;
          if (y = T, f !== x || g[0] !== y[0] || g[1] !== y[1] || g[2] !== y[2] || g[3] !== y[3]) return !1;
        }
        return !!m.next().done;
      }(c.H, u)) d.activeTexture(d.TEXTURE2), d.bindTexture(d.TEXTURE_2D, c.j);
      else {
        c.H = u;
        const f = Array(1024).fill(0);
        u.forEach((m, y) => {
          if (m.length !== 4) throw Error(`Color at index ${y} is not a four-channel value.`);
          f[4 * y] = m[0], f[4 * y + 1] = m[1], f[4 * y + 2] = m[2], f[4 * y + 3] = m[3];
        }), d.activeTexture(d.TEXTURE2), d.bindTexture(d.TEXTURE_2D, c.j), d.texImage2D(d.TEXTURE_2D, 0, d.RGBA, 256, 1, 0, d.RGBA, d.UNSIGNED_BYTE, new Uint8Array(f));
      }
    })(n, t, s, i), o.clearColor(0, 0, 0, 0), o.clear(o.COLOR_BUFFER_BIT), o.drawArrays(o.TRIANGLE_FAN, 0, 4);
    const a = n.g;
    a.activeTexture(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, null), a.activeTexture(a.TEXTURE1), a.bindTexture(a.TEXTURE_2D, null), a.activeTexture(a.TEXTURE2), a.bindTexture(a.TEXTURE_2D, null);
  });
}
function sc(e, t, r, i) {
  const n = Zr(e), o = function(c) {
    return c.h || (c.h = new Th()), c.h;
  }(e), s = Array.isArray(r) ? new ImageData(new Uint8ClampedArray(r), 1, 1) : r, a = Array.isArray(i) ? new ImageData(new Uint8ClampedArray(i), 1, 1) : i;
  ri(o, n, !0, () => {
    var c = o.g;
    c.activeTexture(c.TEXTURE0), c.bindTexture(c.TEXTURE_2D, t), c.activeTexture(c.TEXTURE1), c.bindTexture(c.TEXTURE_2D, o.j), c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, c.RGBA, c.UNSIGNED_BYTE, s), c.activeTexture(c.TEXTURE2), c.bindTexture(c.TEXTURE_2D, o.B), c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, c.RGBA, c.UNSIGNED_BYTE, a), n.clearColor(0, 0, 0, 0), n.clear(n.COLOR_BUFFER_BIT), n.drawArrays(n.TRIANGLE_FAN, 0, 4), n.bindTexture(n.TEXTURE_2D, null), (c = o.g).activeTexture(c.TEXTURE0), c.bindTexture(c.TEXTURE_2D, null), c.activeTexture(c.TEXTURE1), c.bindTexture(c.TEXTURE_2D, null), c.activeTexture(c.TEXTURE2), c.bindTexture(c.TEXTURE_2D, null);
  });
}
var Ee = class {
  constructor(e, t) {
    typeof CanvasRenderingContext2D < "u" && e instanceof CanvasRenderingContext2D || e instanceof OffscreenCanvasRenderingContext2D ? (this.l = e, this.j = t) : this.j = e;
  }
  wa(e, t) {
    if (e) {
      var r = Ir(this);
      t = qn(t), r.save();
      var i = r.canvas, n = 0;
      for (const o of e) r.fillStyle = lt(t.fillColor, { index: n, from: o }), r.strokeStyle = lt(t.color, { index: n, from: o }), r.lineWidth = lt(t.lineWidth, { index: n, from: o }), (e = new Path2D()).arc(o.x * i.width, o.y * i.height, lt(t.radius, { index: n, from: o }), 0, 2 * Math.PI), r.fill(e), r.stroke(e), ++n;
      r.restore();
    }
  }
  va(e, t, r) {
    if (e && t) {
      var i = Ir(this);
      r = qn(r), i.save();
      var n = i.canvas, o = 0;
      for (const s of t) {
        i.beginPath(), t = e[s.start];
        const a = e[s.end];
        t && a && (i.strokeStyle = lt(r.color, { index: o, from: t, to: a }), i.lineWidth = lt(r.lineWidth, { index: o, from: t, to: a }), i.moveTo(t.x * n.width, t.y * n.height), i.lineTo(a.x * n.width, a.y * n.height)), ++o, i.stroke();
      }
      i.restore();
    }
  }
  sa(e, t) {
    const r = Ir(this);
    t = qn(t), r.save(), r.beginPath(), r.lineWidth = lt(t.lineWidth, {}), r.strokeStyle = lt(t.color, {}), r.fillStyle = lt(t.fillColor, {}), r.moveTo(e.originX, e.originY), r.lineTo(e.originX + e.width, e.originY), r.lineTo(e.originX + e.width, e.originY + e.height), r.lineTo(e.originX, e.originY + e.height), r.lineTo(e.originX, e.originY), r.stroke(), r.fill(), r.restore();
  }
  ta(e, t, r = [0, 0, 0, 255]) {
    this.l ? function(i, n, o, s) {
      const a = Zr(i);
      nc(i, n, (c) => {
        oc(i, c, o, s), (c = Ir(i)).drawImage(a.canvas, 0, 0, c.canvas.width, c.canvas.height);
      });
    }(this, e, r, t) : oc(this, e.N(), r, t);
  }
  ua(e, t, r) {
    this.l ? function(i, n, o, s) {
      const a = Zr(i);
      nc(i, n, (c) => {
        sc(i, c, o, s), (c = Ir(i)).drawImage(a.canvas, 0, 0, c.canvas.width, c.canvas.height);
      });
    }(this, e, t, r) : sc(this, e.N(), t, r);
  }
  close() {
    this.g?.close(), this.g = void 0, this.h?.close(), this.h = void 0, this.m?.close(), this.m = void 0;
  }
};
function nt(e, t) {
  switch (t) {
    case 0:
      return e.g.find((r) => r instanceof ImageData);
    case 1:
      return e.g.find((r) => typeof ImageBitmap < "u" && r instanceof ImageBitmap);
    case 2:
      return e.g.find((r) => typeof WebGLTexture < "u" && r instanceof WebGLTexture);
    default:
      throw Error(`Type is not supported: ${t}`);
  }
}
function Kl(e) {
  var t = nt(e, 0);
  if (!t) {
    t = pr(e);
    const r = hn(e), i = new Uint8Array(e.width * e.height * 4);
    un(r, t, yi(e)), t.readPixels(0, 0, e.width, e.height, t.RGBA, t.UNSIGNED_BYTE, i), Cs(r), t = new ImageData(new Uint8ClampedArray(i.buffer), e.width, e.height), e.g.push(t);
  }
  return t;
}
function yi(e) {
  let t = nt(e, 2);
  if (!t) {
    const r = pr(e);
    t = bi(e);
    const i = nt(e, 1) || Kl(e);
    r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, r.RGBA, r.UNSIGNED_BYTE, i), Or(e);
  }
  return t;
}
function pr(e) {
  if (!e.canvas) throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");
  return e.h || (e.h = Ce(e.canvas.getContext("webgl2"), "You cannot use a canvas that is already bound to a different type of rendering context.")), e.h;
}
function hn(e) {
  return e.l || (e.l = new Tr()), e.l;
}
function bi(e) {
  const t = pr(e);
  t.viewport(0, 0, e.width, e.height), t.activeTexture(t.TEXTURE0);
  let r = nt(e, 2);
  return r || (r = Mt(hn(e), t), e.g.push(r), e.m = !0), t.bindTexture(t.TEXTURE_2D, r), r;
}
function Or(e) {
  e.h.bindTexture(e.h.TEXTURE_2D, null);
}
function ac(e) {
  const t = pr(e);
  return ri(hn(e), t, !0, () => function(r, i) {
    const n = r.canvas;
    if (n.width === r.width && n.height === r.height) return i();
    const o = n.width, s = n.height;
    return n.width = r.width, n.height = r.height, r = i(), n.width = o, n.height = s, r;
  }(e, () => {
    if (t.bindFramebuffer(t.FRAMEBUFFER, null), t.clearColor(0, 0, 0, 0), t.clear(t.COLOR_BUFFER_BIT), t.drawArrays(t.TRIANGLE_FAN, 0, 4), !(e.canvas instanceof OffscreenCanvas)) throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");
    return e.canvas.transferToImageBitmap();
  }));
}
Ee.prototype.close = Ee.prototype.close, Ee.prototype.drawConfidenceMask = Ee.prototype.ua, Ee.prototype.drawCategoryMask = Ee.prototype.ta, Ee.prototype.drawBoundingBox = Ee.prototype.sa, Ee.prototype.drawConnectors = Ee.prototype.va, Ee.prototype.drawLandmarks = Ee.prototype.wa, Ee.lerp = function(e, t, r, i, n) {
  return ic(i * (1 - (e - t) / (r - t)) + n * (1 - (r - e) / (r - t)), i, n);
}, Ee.clamp = ic;
var me = class {
  constructor(e, t, r, i, n, o, s) {
    this.g = e, this.j = t, this.m = r, this.canvas = i, this.l = n, this.width = o, this.height = s, (this.j || this.m) && --cc === 0 && console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.");
  }
  Ca() {
    return !!nt(this, 0);
  }
  ka() {
    return !!nt(this, 1);
  }
  R() {
    return !!nt(this, 2);
  }
  Aa() {
    return Kl(this);
  }
  za() {
    var e = nt(this, 1);
    return e || (yi(this), bi(this), e = ac(this), Or(this), this.g.push(e), this.j = !0), e;
  }
  N() {
    return yi(this);
  }
  clone() {
    const e = [];
    for (const t of this.g) {
      let r;
      if (t instanceof ImageData) r = new ImageData(t.data, this.width, this.height);
      else if (t instanceof WebGLTexture) {
        const i = pr(this), n = hn(this);
        i.activeTexture(i.TEXTURE1), r = Mt(n, i), i.bindTexture(i.TEXTURE_2D, r), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, this.width, this.height, 0, i.RGBA, i.UNSIGNED_BYTE, null), i.bindTexture(i.TEXTURE_2D, null), un(n, i, r), ri(n, i, !1, () => {
          bi(this), i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT), i.drawArrays(i.TRIANGLE_FAN, 0, 4), Or(this);
        }), Cs(n), Or(this);
      } else {
        if (!(t instanceof ImageBitmap)) throw Error(`Type is not supported: ${t}`);
        yi(this), bi(this), r = ac(this), Or(this);
      }
      e.push(r);
    }
    return new me(e, this.ka(), this.R(), this.canvas, this.l, this.width, this.height);
  }
  close() {
    this.j && nt(this, 1).close(), this.m && pr(this).deleteTexture(nt(this, 2)), cc = -1;
  }
};
me.prototype.close = me.prototype.close, me.prototype.clone = me.prototype.clone, me.prototype.getAsWebGLTexture = me.prototype.N, me.prototype.getAsImageBitmap = me.prototype.za, me.prototype.getAsImageData = me.prototype.Aa, me.prototype.hasWebGLTexture = me.prototype.R, me.prototype.hasImageBitmap = me.prototype.ka, me.prototype.hasImageData = me.prototype.Ca;
var cc = 250;
function et(...e) {
  return e.map(([t, r]) => ({ start: t, end: r }));
}
const Lh = /* @__PURE__ */ function(e) {
  return class extends e {
    Ha() {
      this.i._registerModelResourcesGraphService();
    }
  };
}((lc = class {
  constructor(e, t) {
    this.l = !0, this.i = e, this.g = null, this.h = 0, this.m = typeof this.i._addIntToInputStream == "function", t !== void 0 ? this.i.canvas = t : zl() ? this.i.canvas = new OffscreenCanvas(1, 1) : (console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."), this.i.canvas = document.createElement("canvas"));
  }
  async initializeGraph(e) {
    const t = await (await fetch(e)).arrayBuffer();
    e = !(e.endsWith(".pbtxt") || e.endsWith(".textproto")), this.setGraph(new Uint8Array(t), e);
  }
  setGraphFromString(e) {
    this.setGraph(new TextEncoder().encode(e), !1);
  }
  setGraph(e, t) {
    const r = e.length, i = this.i._malloc(r);
    this.i.HEAPU8.set(e, i), t ? this.i._changeBinaryGraph(r, i) : this.i._changeTextGraph(r, i), this.i._free(i);
  }
  configureAudio(e, t, r, i, n) {
    this.i._configureAudio || console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'), E(this, i || "input_audio", (o) => {
      E(this, n = n || "audio_header", (s) => {
        this.i._configureAudio(o, s, e, t ?? 0, r);
      });
    });
  }
  setAutoResizeCanvas(e) {
    this.l = e;
  }
  setAutoRenderToScreen(e) {
    this.i._setAutoRenderToScreen(e);
  }
  setGpuBufferVerticalFlip(e) {
    this.i.gpuOriginForWebTexturesIsBottomLeft = e;
  }
  ca(e) {
    tt(this, "__graph_config__", (t) => {
      e(t);
    }), E(this, "__graph_config__", (t) => {
      this.i._getGraphConfig(t, void 0);
    }), delete this.i.simpleListeners.__graph_config__;
  }
  attachErrorListener(e) {
    this.i.errorListener = e;
  }
  attachEmptyPacketListener(e, t) {
    this.i.emptyPacketListeners = this.i.emptyPacketListeners || {}, this.i.emptyPacketListeners[e] = t;
  }
  addAudioToStream(e, t, r) {
    this.addAudioToStreamWithShape(e, 0, 0, t, r);
  }
  addAudioToStreamWithShape(e, t, r, i, n) {
    const o = 4 * e.length;
    this.h !== o && (this.g && this.i._free(this.g), this.g = this.i._malloc(o), this.h = o), this.i.HEAPF32.set(e, this.g / 4), E(this, i, (s) => {
      this.i._addAudioToInputStream(this.g, t, r, s, n);
    });
  }
  addGpuBufferToStream(e, t, r) {
    E(this, t, (i) => {
      const [n, o] = Ka(this, e, i);
      this.i._addBoundTextureToStream(i, n, o, r);
    });
  }
  addBoolToStream(e, t, r) {
    E(this, t, (i) => {
      this.i._addBoolToInputStream(e, i, r);
    });
  }
  addDoubleToStream(e, t, r) {
    E(this, t, (i) => {
      this.i._addDoubleToInputStream(e, i, r);
    });
  }
  addFloatToStream(e, t, r) {
    E(this, t, (i) => {
      this.i._addFloatToInputStream(e, i, r);
    });
  }
  addIntToStream(e, t, r) {
    E(this, t, (i) => {
      this.i._addIntToInputStream(e, i, r);
    });
  }
  addUintToStream(e, t, r) {
    E(this, t, (i) => {
      this.i._addUintToInputStream(e, i, r);
    });
  }
  addStringToStream(e, t, r) {
    E(this, t, (i) => {
      E(this, e, (n) => {
        this.i._addStringToInputStream(n, i, r);
      });
    });
  }
  addStringRecordToStream(e, t, r) {
    E(this, t, (i) => {
      Ja(this, Object.keys(e), (n) => {
        Ja(this, Object.values(e), (o) => {
          this.i._addFlatHashMapToInputStream(n, o, Object.keys(e).length, i, r);
        });
      });
    });
  }
  addProtoToStream(e, t, r, i) {
    E(this, r, (n) => {
      E(this, t, (o) => {
        const s = this.i._malloc(e.length);
        this.i.HEAPU8.set(e, s), this.i._addProtoToInputStream(s, e.length, o, n, i), this.i._free(s);
      });
    });
  }
  addEmptyPacketToStream(e, t) {
    E(this, e, (r) => {
      this.i._addEmptyPacketToInputStream(r, t);
    });
  }
  addBoolVectorToStream(e, t, r) {
    E(this, t, (i) => {
      const n = this.i._allocateBoolVector(e.length);
      if (!n) throw Error("Unable to allocate new bool vector on heap.");
      for (const o of e) this.i._addBoolVectorEntry(n, o);
      this.i._addBoolVectorToInputStream(n, i, r);
    });
  }
  addDoubleVectorToStream(e, t, r) {
    E(this, t, (i) => {
      const n = this.i._allocateDoubleVector(e.length);
      if (!n) throw Error("Unable to allocate new double vector on heap.");
      for (const o of e) this.i._addDoubleVectorEntry(n, o);
      this.i._addDoubleVectorToInputStream(n, i, r);
    });
  }
  addFloatVectorToStream(e, t, r) {
    E(this, t, (i) => {
      const n = this.i._allocateFloatVector(e.length);
      if (!n) throw Error("Unable to allocate new float vector on heap.");
      for (const o of e) this.i._addFloatVectorEntry(n, o);
      this.i._addFloatVectorToInputStream(n, i, r);
    });
  }
  addIntVectorToStream(e, t, r) {
    E(this, t, (i) => {
      const n = this.i._allocateIntVector(e.length);
      if (!n) throw Error("Unable to allocate new int vector on heap.");
      for (const o of e) this.i._addIntVectorEntry(n, o);
      this.i._addIntVectorToInputStream(n, i, r);
    });
  }
  addUintVectorToStream(e, t, r) {
    E(this, t, (i) => {
      const n = this.i._allocateUintVector(e.length);
      if (!n) throw Error("Unable to allocate new unsigned int vector on heap.");
      for (const o of e) this.i._addUintVectorEntry(n, o);
      this.i._addUintVectorToInputStream(n, i, r);
    });
  }
  addStringVectorToStream(e, t, r) {
    E(this, t, (i) => {
      const n = this.i._allocateStringVector(e.length);
      if (!n) throw Error("Unable to allocate new string vector on heap.");
      for (const o of e) E(this, o, (s) => {
        this.i._addStringVectorEntry(n, s);
      });
      this.i._addStringVectorToInputStream(n, i, r);
    });
  }
  addBoolToInputSidePacket(e, t) {
    E(this, t, (r) => {
      this.i._addBoolToInputSidePacket(e, r);
    });
  }
  addDoubleToInputSidePacket(e, t) {
    E(this, t, (r) => {
      this.i._addDoubleToInputSidePacket(e, r);
    });
  }
  addFloatToInputSidePacket(e, t) {
    E(this, t, (r) => {
      this.i._addFloatToInputSidePacket(e, r);
    });
  }
  addIntToInputSidePacket(e, t) {
    E(this, t, (r) => {
      this.i._addIntToInputSidePacket(e, r);
    });
  }
  addUintToInputSidePacket(e, t) {
    E(this, t, (r) => {
      this.i._addUintToInputSidePacket(e, r);
    });
  }
  addStringToInputSidePacket(e, t) {
    E(this, t, (r) => {
      E(this, e, (i) => {
        this.i._addStringToInputSidePacket(i, r);
      });
    });
  }
  addProtoToInputSidePacket(e, t, r) {
    E(this, r, (i) => {
      E(this, t, (n) => {
        const o = this.i._malloc(e.length);
        this.i.HEAPU8.set(e, o), this.i._addProtoToInputSidePacket(o, e.length, n, i), this.i._free(o);
      });
    });
  }
  addBoolVectorToInputSidePacket(e, t) {
    E(this, t, (r) => {
      const i = this.i._allocateBoolVector(e.length);
      if (!i) throw Error("Unable to allocate new bool vector on heap.");
      for (const n of e) this.i._addBoolVectorEntry(i, n);
      this.i._addBoolVectorToInputSidePacket(i, r);
    });
  }
  addDoubleVectorToInputSidePacket(e, t) {
    E(this, t, (r) => {
      const i = this.i._allocateDoubleVector(e.length);
      if (!i) throw Error("Unable to allocate new double vector on heap.");
      for (const n of e) this.i._addDoubleVectorEntry(i, n);
      this.i._addDoubleVectorToInputSidePacket(i, r);
    });
  }
  addFloatVectorToInputSidePacket(e, t) {
    E(this, t, (r) => {
      const i = this.i._allocateFloatVector(e.length);
      if (!i) throw Error("Unable to allocate new float vector on heap.");
      for (const n of e) this.i._addFloatVectorEntry(i, n);
      this.i._addFloatVectorToInputSidePacket(i, r);
    });
  }
  addIntVectorToInputSidePacket(e, t) {
    E(this, t, (r) => {
      const i = this.i._allocateIntVector(e.length);
      if (!i) throw Error("Unable to allocate new int vector on heap.");
      for (const n of e) this.i._addIntVectorEntry(i, n);
      this.i._addIntVectorToInputSidePacket(i, r);
    });
  }
  addUintVectorToInputSidePacket(e, t) {
    E(this, t, (r) => {
      const i = this.i._allocateUintVector(e.length);
      if (!i) throw Error("Unable to allocate new unsigned int vector on heap.");
      for (const n of e) this.i._addUintVectorEntry(i, n);
      this.i._addUintVectorToInputSidePacket(i, r);
    });
  }
  addStringVectorToInputSidePacket(e, t) {
    E(this, t, (r) => {
      const i = this.i._allocateStringVector(e.length);
      if (!i) throw Error("Unable to allocate new string vector on heap.");
      for (const n of e) E(this, n, (o) => {
        this.i._addStringVectorEntry(i, o);
      });
      this.i._addStringVectorToInputSidePacket(i, r);
    });
  }
  attachBoolListener(e, t) {
    tt(this, e, t), E(this, e, (r) => {
      this.i._attachBoolListener(r);
    });
  }
  attachBoolVectorListener(e, t) {
    bt(this, e, t), E(this, e, (r) => {
      this.i._attachBoolVectorListener(r);
    });
  }
  attachIntListener(e, t) {
    tt(this, e, t), E(this, e, (r) => {
      this.i._attachIntListener(r);
    });
  }
  attachIntVectorListener(e, t) {
    bt(this, e, t), E(this, e, (r) => {
      this.i._attachIntVectorListener(r);
    });
  }
  attachUintListener(e, t) {
    tt(this, e, t), E(this, e, (r) => {
      this.i._attachUintListener(r);
    });
  }
  attachUintVectorListener(e, t) {
    bt(this, e, t), E(this, e, (r) => {
      this.i._attachUintVectorListener(r);
    });
  }
  attachDoubleListener(e, t) {
    tt(this, e, t), E(this, e, (r) => {
      this.i._attachDoubleListener(r);
    });
  }
  attachDoubleVectorListener(e, t) {
    bt(this, e, t), E(this, e, (r) => {
      this.i._attachDoubleVectorListener(r);
    });
  }
  attachFloatListener(e, t) {
    tt(this, e, t), E(this, e, (r) => {
      this.i._attachFloatListener(r);
    });
  }
  attachFloatVectorListener(e, t) {
    bt(this, e, t), E(this, e, (r) => {
      this.i._attachFloatVectorListener(r);
    });
  }
  attachStringListener(e, t) {
    tt(this, e, t), E(this, e, (r) => {
      this.i._attachStringListener(r);
    });
  }
  attachStringVectorListener(e, t) {
    bt(this, e, t), E(this, e, (r) => {
      this.i._attachStringVectorListener(r);
    });
  }
  attachProtoListener(e, t, r) {
    tt(this, e, t), E(this, e, (i) => {
      this.i._attachProtoListener(i, r || !1);
    });
  }
  attachProtoVectorListener(e, t, r) {
    bt(this, e, t), E(this, e, (i) => {
      this.i._attachProtoVectorListener(i, r || !1);
    });
  }
  attachAudioListener(e, t, r) {
    this.i._attachAudioListener || console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'), tt(this, e, (i, n) => {
      i = new Float32Array(i.buffer, i.byteOffset, i.length / 4), t(i, n);
    }), E(this, e, (i) => {
      this.i._attachAudioListener(i, r || !1);
    });
  }
  finishProcessing() {
    this.i._waitUntilIdle();
  }
  closeGraph() {
    this.i._closeGraph(), this.i.simpleListeners = void 0, this.i.emptyPacketListeners = void 0;
  }
}, class extends lc {
  get ea() {
    return this.i;
  }
  oa(e, t, r) {
    E(this, t, (i) => {
      const [n, o] = Ka(this, e, i);
      this.ea._addBoundTextureAsImageToStream(i, n, o, r);
    });
  }
  V(e, t) {
    tt(this, e, t), E(this, e, (r) => {
      this.ea._attachImageListener(r);
    });
  }
  ba(e, t) {
    bt(this, e, t), E(this, e, (r) => {
      this.ea._attachImageVectorListener(r);
    });
  }
}));
var lc, Xe = class extends Lh {
};
async function M(e, t, r) {
  return async function(i, n, o, s) {
    return kh(i, n, o, s);
  }(e, r.canvas ?? (zl() ? void 0 : document.createElement("canvas")), t, r);
}
function Jl(e, t, r, i) {
  if (e.U) {
    const o = new wl();
    if (r?.regionOfInterest) {
      if (!e.na) throw Error("This task doesn't support region-of-interest.");
      var n = r.regionOfInterest;
      if (n.left >= n.right || n.top >= n.bottom) throw Error("Expected RectF with left < right and top < bottom.");
      if (n.left < 0 || n.top < 0 || n.right > 1 || n.bottom > 1) throw Error("Expected RectF values to be in [0,1].");
      w(o, 1, (n.left + n.right) / 2), w(o, 2, (n.top + n.bottom) / 2), w(o, 4, n.right - n.left), w(o, 3, n.bottom - n.top);
    } else w(o, 1, 0.5), w(o, 2, 0.5), w(o, 4, 1), w(o, 3, 1);
    if (r?.rotationDegrees) {
      if (r?.rotationDegrees % 90 != 0) throw Error("Expected rotation to be a multiple of 90.");
      if (w(o, 5, -Math.PI * r.rotationDegrees / 180), r?.rotationDegrees % 180 != 0) {
        const [s, a] = ql(t);
        r = oe(o, 3) * a / s, n = oe(o, 4) * s / a, w(o, 4, r), w(o, 3, n);
      }
    }
    e.g.addProtoToStream(o.g(), "mediapipe.NormalizedRect", e.U, i);
  }
  e.g.oa(t, e.Z, i ?? performance.now()), e.finishProcessing();
}
function Ze(e, t, r) {
  if (e.baseOptions?.g()) throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");
  Jl(e, t, r, e.B + 1);
}
function ct(e, t, r, i) {
  if (!e.baseOptions?.g()) throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");
  Jl(e, t, r, i);
}
function mr(e, t, r, i) {
  var n = t.data;
  const o = t.width, s = o * (t = t.height);
  if ((n instanceof Uint8Array || n instanceof Float32Array) && n.length !== s) throw Error("Unsupported channel count: " + n.length / s);
  return e = new de([n], r, !1, e.g.i.canvas, e.P, o, t), i ? e.clone() : e;
}
var Me = class extends go {
  constructor(e, t, r, i) {
    super(e), this.g = e, this.Z = t, this.U = r, this.na = i, this.P = new Tr();
  }
  l(e, t = !0) {
    if ("runningMode" in e && qr(this.baseOptions, 2, !!e.runningMode && e.runningMode !== "IMAGE"), e.canvas !== void 0 && this.g.i.canvas !== e.canvas) throw Error("You must create a new task to reset the canvas.");
    return super.l(e, t);
  }
  close() {
    this.P.close(), super.close();
  }
};
Me.prototype.close = Me.prototype.close;
var He = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect_in", !1), this.j = { detections: [] }, A(e = this.h = new sn(), 0, 1, t = new Y()), w(this.h, 2, 0.5), w(this.h, 3, 0.3);
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return "minDetectionConfidence" in e && w(this.h, 2, e.minDetectionConfidence ?? 0.5), "minSuppressionThreshold" in e && w(this.h, 3, e.minSuppressionThreshold ?? 0.3), this.l(e);
  }
  D(e, t) {
    return this.j = { detections: [] }, Ze(this, e, t), this.j;
  }
  F(e, t, r) {
    return this.j = { detections: [] }, ct(this, e, r, t), this.j;
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect_in"), O(e, "detections");
    const t = new Ue();
    Ke(t, uh, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.face_detector.FaceDetectorGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect_in"), I(r, "DETECTIONS:detections"), r.o(t), je(e, r), this.g.attachProtoVectorListener("detections", (i, n) => {
      for (const o of i) i = _l(o), this.j.detections.push(Vl(i));
      v(this, n);
    }), this.g.attachEmptyPacketListener("detections", (i) => {
      v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
He.prototype.detectForVideo = He.prototype.F, He.prototype.detect = He.prototype.D, He.prototype.setOptions = He.prototype.o, He.createFromModelPath = async function(e, t) {
  return M(He, e, { baseOptions: { modelAssetPath: t } });
}, He.createFromModelBuffer = function(e, t) {
  return M(He, e, { baseOptions: { modelAssetBuffer: t } });
}, He.createFromOptions = function(e, t) {
  return M(He, e, t);
};
var As = et([61, 146], [146, 91], [91, 181], [181, 84], [84, 17], [17, 314], [314, 405], [405, 321], [321, 375], [375, 291], [61, 185], [185, 40], [40, 39], [39, 37], [37, 0], [0, 267], [267, 269], [269, 270], [270, 409], [409, 291], [78, 95], [95, 88], [88, 178], [178, 87], [87, 14], [14, 317], [317, 402], [402, 318], [318, 324], [324, 308], [78, 191], [191, 80], [80, 81], [81, 82], [82, 13], [13, 312], [312, 311], [311, 310], [310, 415], [415, 308]), xs = et([263, 249], [249, 390], [390, 373], [373, 374], [374, 380], [380, 381], [381, 382], [382, 362], [263, 466], [466, 388], [388, 387], [387, 386], [386, 385], [385, 384], [384, 398], [398, 362]), Ts = et([276, 283], [283, 282], [282, 295], [295, 285], [300, 293], [293, 334], [334, 296], [296, 336]), Ql = et([474, 475], [475, 476], [476, 477], [477, 474]), Ss = et([33, 7], [7, 163], [163, 144], [144, 145], [145, 153], [153, 154], [154, 155], [155, 133], [33, 246], [246, 161], [161, 160], [160, 159], [159, 158], [158, 157], [157, 173], [173, 133]), Ls = et([46, 53], [53, 52], [52, 65], [65, 55], [70, 63], [63, 105], [105, 66], [66, 107]), e1 = et([469, 470], [470, 471], [471, 472], [472, 469]), Ms = et([10, 338], [338, 297], [297, 332], [332, 284], [284, 251], [251, 389], [389, 356], [356, 454], [454, 323], [323, 361], [361, 288], [288, 397], [397, 365], [365, 379], [379, 378], [378, 400], [400, 377], [377, 152], [152, 148], [148, 176], [176, 149], [149, 150], [150, 136], [136, 172], [172, 58], [58, 132], [132, 93], [93, 234], [234, 127], [127, 162], [162, 21], [21, 54], [54, 103], [103, 67], [67, 109], [109, 10]), t1 = [...As, ...xs, ...Ts, ...Ss, ...Ls, ...Ms], r1 = et([127, 34], [34, 139], [139, 127], [11, 0], [0, 37], [37, 11], [232, 231], [231, 120], [120, 232], [72, 37], [37, 39], [39, 72], [128, 121], [121, 47], [47, 128], [232, 121], [121, 128], [128, 232], [104, 69], [69, 67], [67, 104], [175, 171], [171, 148], [148, 175], [118, 50], [50, 101], [101, 118], [73, 39], [39, 40], [40, 73], [9, 151], [151, 108], [108, 9], [48, 115], [115, 131], [131, 48], [194, 204], [204, 211], [211, 194], [74, 40], [40, 185], [185, 74], [80, 42], [42, 183], [183, 80], [40, 92], [92, 186], [186, 40], [230, 229], [229, 118], [118, 230], [202, 212], [212, 214], [214, 202], [83, 18], [18, 17], [17, 83], [76, 61], [61, 146], [146, 76], [160, 29], [29, 30], [30, 160], [56, 157], [157, 173], [173, 56], [106, 204], [204, 194], [194, 106], [135, 214], [214, 192], [192, 135], [203, 165], [165, 98], [98, 203], [21, 71], [71, 68], [68, 21], [51, 45], [45, 4], [4, 51], [144, 24], [24, 23], [23, 144], [77, 146], [146, 91], [91, 77], [205, 50], [50, 187], [187, 205], [201, 200], [200, 18], [18, 201], [91, 106], [106, 182], [182, 91], [90, 91], [91, 181], [181, 90], [85, 84], [84, 17], [17, 85], [206, 203], [203, 36], [36, 206], [148, 171], [171, 140], [140, 148], [92, 40], [40, 39], [39, 92], [193, 189], [189, 244], [244, 193], [159, 158], [158, 28], [28, 159], [247, 246], [246, 161], [161, 247], [236, 3], [3, 196], [196, 236], [54, 68], [68, 104], [104, 54], [193, 168], [168, 8], [8, 193], [117, 228], [228, 31], [31, 117], [189, 193], [193, 55], [55, 189], [98, 97], [97, 99], [99, 98], [126, 47], [47, 100], [100, 126], [166, 79], [79, 218], [218, 166], [155, 154], [154, 26], [26, 155], [209, 49], [49, 131], [131, 209], [135, 136], [136, 150], [150, 135], [47, 126], [126, 217], [217, 47], [223, 52], [52, 53], [53, 223], [45, 51], [51, 134], [134, 45], [211, 170], [170, 140], [140, 211], [67, 69], [69, 108], [108, 67], [43, 106], [106, 91], [91, 43], [230, 119], [119, 120], [120, 230], [226, 130], [130, 247], [247, 226], [63, 53], [53, 52], [52, 63], [238, 20], [20, 242], [242, 238], [46, 70], [70, 156], [156, 46], [78, 62], [62, 96], [96, 78], [46, 53], [53, 63], [63, 46], [143, 34], [34, 227], [227, 143], [123, 117], [117, 111], [111, 123], [44, 125], [125, 19], [19, 44], [236, 134], [134, 51], [51, 236], [216, 206], [206, 205], [205, 216], [154, 153], [153, 22], [22, 154], [39, 37], [37, 167], [167, 39], [200, 201], [201, 208], [208, 200], [36, 142], [142, 100], [100, 36], [57, 212], [212, 202], [202, 57], [20, 60], [60, 99], [99, 20], [28, 158], [158, 157], [157, 28], [35, 226], [226, 113], [113, 35], [160, 159], [159, 27], [27, 160], [204, 202], [202, 210], [210, 204], [113, 225], [225, 46], [46, 113], [43, 202], [202, 204], [204, 43], [62, 76], [76, 77], [77, 62], [137, 123], [123, 116], [116, 137], [41, 38], [38, 72], [72, 41], [203, 129], [129, 142], [142, 203], [64, 98], [98, 240], [240, 64], [49, 102], [102, 64], [64, 49], [41, 73], [73, 74], [74, 41], [212, 216], [216, 207], [207, 212], [42, 74], [74, 184], [184, 42], [169, 170], [170, 211], [211, 169], [170, 149], [149, 176], [176, 170], [105, 66], [66, 69], [69, 105], [122, 6], [6, 168], [168, 122], [123, 147], [147, 187], [187, 123], [96, 77], [77, 90], [90, 96], [65, 55], [55, 107], [107, 65], [89, 90], [90, 180], [180, 89], [101, 100], [100, 120], [120, 101], [63, 105], [105, 104], [104, 63], [93, 137], [137, 227], [227, 93], [15, 86], [86, 85], [85, 15], [129, 102], [102, 49], [49, 129], [14, 87], [87, 86], [86, 14], [55, 8], [8, 9], [9, 55], [100, 47], [47, 121], [121, 100], [145, 23], [23, 22], [22, 145], [88, 89], [89, 179], [179, 88], [6, 122], [122, 196], [196, 6], [88, 95], [95, 96], [96, 88], [138, 172], [172, 136], [136, 138], [215, 58], [58, 172], [172, 215], [115, 48], [48, 219], [219, 115], [42, 80], [80, 81], [81, 42], [195, 3], [3, 51], [51, 195], [43, 146], [146, 61], [61, 43], [171, 175], [175, 199], [199, 171], [81, 82], [82, 38], [38, 81], [53, 46], [46, 225], [225, 53], [144, 163], [163, 110], [110, 144], [52, 65], [65, 66], [66, 52], [229, 228], [228, 117], [117, 229], [34, 127], [127, 234], [234, 34], [107, 108], [108, 69], [69, 107], [109, 108], [108, 151], [151, 109], [48, 64], [64, 235], [235, 48], [62, 78], [78, 191], [191, 62], [129, 209], [209, 126], [126, 129], [111, 35], [35, 143], [143, 111], [117, 123], [123, 50], [50, 117], [222, 65], [65, 52], [52, 222], [19, 125], [125, 141], [141, 19], [221, 55], [55, 65], [65, 221], [3, 195], [195, 197], [197, 3], [25, 7], [7, 33], [33, 25], [220, 237], [237, 44], [44, 220], [70, 71], [71, 139], [139, 70], [122, 193], [193, 245], [245, 122], [247, 130], [130, 33], [33, 247], [71, 21], [21, 162], [162, 71], [170, 169], [169, 150], [150, 170], [188, 174], [174, 196], [196, 188], [216, 186], [186, 92], [92, 216], [2, 97], [97, 167], [167, 2], [141, 125], [125, 241], [241, 141], [164, 167], [167, 37], [37, 164], [72, 38], [38, 12], [12, 72], [38, 82], [82, 13], [13, 38], [63, 68], [68, 71], [71, 63], [226, 35], [35, 111], [111, 226], [101, 50], [50, 205], [205, 101], [206, 92], [92, 165], [165, 206], [209, 198], [198, 217], [217, 209], [165, 167], [167, 97], [97, 165], [220, 115], [115, 218], [218, 220], [133, 112], [112, 243], [243, 133], [239, 238], [238, 241], [241, 239], [214, 135], [135, 169], [169, 214], [190, 173], [173, 133], [133, 190], [171, 208], [208, 32], [32, 171], [125, 44], [44, 237], [237, 125], [86, 87], [87, 178], [178, 86], [85, 86], [86, 179], [179, 85], [84, 85], [85, 180], [180, 84], [83, 84], [84, 181], [181, 83], [201, 83], [83, 182], [182, 201], [137, 93], [93, 132], [132, 137], [76, 62], [62, 183], [183, 76], [61, 76], [76, 184], [184, 61], [57, 61], [61, 185], [185, 57], [212, 57], [57, 186], [186, 212], [214, 207], [207, 187], [187, 214], [34, 143], [143, 156], [156, 34], [79, 239], [239, 237], [237, 79], [123, 137], [137, 177], [177, 123], [44, 1], [1, 4], [4, 44], [201, 194], [194, 32], [32, 201], [64, 102], [102, 129], [129, 64], [213, 215], [215, 138], [138, 213], [59, 166], [166, 219], [219, 59], [242, 99], [99, 97], [97, 242], [2, 94], [94, 141], [141, 2], [75, 59], [59, 235], [235, 75], [24, 110], [110, 228], [228, 24], [25, 130], [130, 226], [226, 25], [23, 24], [24, 229], [229, 23], [22, 23], [23, 230], [230, 22], [26, 22], [22, 231], [231, 26], [112, 26], [26, 232], [232, 112], [189, 190], [190, 243], [243, 189], [221, 56], [56, 190], [190, 221], [28, 56], [56, 221], [221, 28], [27, 28], [28, 222], [222, 27], [29, 27], [27, 223], [223, 29], [30, 29], [29, 224], [224, 30], [247, 30], [30, 225], [225, 247], [238, 79], [79, 20], [20, 238], [166, 59], [59, 75], [75, 166], [60, 75], [75, 240], [240, 60], [147, 177], [177, 215], [215, 147], [20, 79], [79, 166], [166, 20], [187, 147], [147, 213], [213, 187], [112, 233], [233, 244], [244, 112], [233, 128], [128, 245], [245, 233], [128, 114], [114, 188], [188, 128], [114, 217], [217, 174], [174, 114], [131, 115], [115, 220], [220, 131], [217, 198], [198, 236], [236, 217], [198, 131], [131, 134], [134, 198], [177, 132], [132, 58], [58, 177], [143, 35], [35, 124], [124, 143], [110, 163], [163, 7], [7, 110], [228, 110], [110, 25], [25, 228], [356, 389], [389, 368], [368, 356], [11, 302], [302, 267], [267, 11], [452, 350], [350, 349], [349, 452], [302, 303], [303, 269], [269, 302], [357, 343], [343, 277], [277, 357], [452, 453], [453, 357], [357, 452], [333, 332], [332, 297], [297, 333], [175, 152], [152, 377], [377, 175], [347, 348], [348, 330], [330, 347], [303, 304], [304, 270], [270, 303], [9, 336], [336, 337], [337, 9], [278, 279], [279, 360], [360, 278], [418, 262], [262, 431], [431, 418], [304, 408], [408, 409], [409, 304], [310, 415], [415, 407], [407, 310], [270, 409], [409, 410], [410, 270], [450, 348], [348, 347], [347, 450], [422, 430], [430, 434], [434, 422], [313, 314], [314, 17], [17, 313], [306, 307], [307, 375], [375, 306], [387, 388], [388, 260], [260, 387], [286, 414], [414, 398], [398, 286], [335, 406], [406, 418], [418, 335], [364, 367], [367, 416], [416, 364], [423, 358], [358, 327], [327, 423], [251, 284], [284, 298], [298, 251], [281, 5], [5, 4], [4, 281], [373, 374], [374, 253], [253, 373], [307, 320], [320, 321], [321, 307], [425, 427], [427, 411], [411, 425], [421, 313], [313, 18], [18, 421], [321, 405], [405, 406], [406, 321], [320, 404], [404, 405], [405, 320], [315, 16], [16, 17], [17, 315], [426, 425], [425, 266], [266, 426], [377, 400], [400, 369], [369, 377], [322, 391], [391, 269], [269, 322], [417, 465], [465, 464], [464, 417], [386, 257], [257, 258], [258, 386], [466, 260], [260, 388], [388, 466], [456, 399], [399, 419], [419, 456], [284, 332], [332, 333], [333, 284], [417, 285], [285, 8], [8, 417], [346, 340], [340, 261], [261, 346], [413, 441], [441, 285], [285, 413], [327, 460], [460, 328], [328, 327], [355, 371], [371, 329], [329, 355], [392, 439], [439, 438], [438, 392], [382, 341], [341, 256], [256, 382], [429, 420], [420, 360], [360, 429], [364, 394], [394, 379], [379, 364], [277, 343], [343, 437], [437, 277], [443, 444], [444, 283], [283, 443], [275, 440], [440, 363], [363, 275], [431, 262], [262, 369], [369, 431], [297, 338], [338, 337], [337, 297], [273, 375], [375, 321], [321, 273], [450, 451], [451, 349], [349, 450], [446, 342], [342, 467], [467, 446], [293, 334], [334, 282], [282, 293], [458, 461], [461, 462], [462, 458], [276, 353], [353, 383], [383, 276], [308, 324], [324, 325], [325, 308], [276, 300], [300, 293], [293, 276], [372, 345], [345, 447], [447, 372], [352, 345], [345, 340], [340, 352], [274, 1], [1, 19], [19, 274], [456, 248], [248, 281], [281, 456], [436, 427], [427, 425], [425, 436], [381, 256], [256, 252], [252, 381], [269, 391], [391, 393], [393, 269], [200, 199], [199, 428], [428, 200], [266, 330], [330, 329], [329, 266], [287, 273], [273, 422], [422, 287], [250, 462], [462, 328], [328, 250], [258, 286], [286, 384], [384, 258], [265, 353], [353, 342], [342, 265], [387, 259], [259, 257], [257, 387], [424, 431], [431, 430], [430, 424], [342, 353], [353, 276], [276, 342], [273, 335], [335, 424], [424, 273], [292, 325], [325, 307], [307, 292], [366, 447], [447, 345], [345, 366], [271, 303], [303, 302], [302, 271], [423, 266], [266, 371], [371, 423], [294, 455], [455, 460], [460, 294], [279, 278], [278, 294], [294, 279], [271, 272], [272, 304], [304, 271], [432, 434], [434, 427], [427, 432], [272, 407], [407, 408], [408, 272], [394, 430], [430, 431], [431, 394], [395, 369], [369, 400], [400, 395], [334, 333], [333, 299], [299, 334], [351, 417], [417, 168], [168, 351], [352, 280], [280, 411], [411, 352], [325, 319], [319, 320], [320, 325], [295, 296], [296, 336], [336, 295], [319, 403], [403, 404], [404, 319], [330, 348], [348, 349], [349, 330], [293, 298], [298, 333], [333, 293], [323, 454], [454, 447], [447, 323], [15, 16], [16, 315], [315, 15], [358, 429], [429, 279], [279, 358], [14, 15], [15, 316], [316, 14], [285, 336], [336, 9], [9, 285], [329, 349], [349, 350], [350, 329], [374, 380], [380, 252], [252, 374], [318, 402], [402, 403], [403, 318], [6, 197], [197, 419], [419, 6], [318, 319], [319, 325], [325, 318], [367, 364], [364, 365], [365, 367], [435, 367], [367, 397], [397, 435], [344, 438], [438, 439], [439, 344], [272, 271], [271, 311], [311, 272], [195, 5], [5, 281], [281, 195], [273, 287], [287, 291], [291, 273], [396, 428], [428, 199], [199, 396], [311, 271], [271, 268], [268, 311], [283, 444], [444, 445], [445, 283], [373, 254], [254, 339], [339, 373], [282, 334], [334, 296], [296, 282], [449, 347], [347, 346], [346, 449], [264, 447], [447, 454], [454, 264], [336, 296], [296, 299], [299, 336], [338, 10], [10, 151], [151, 338], [278, 439], [439, 455], [455, 278], [292, 407], [407, 415], [415, 292], [358, 371], [371, 355], [355, 358], [340, 345], [345, 372], [372, 340], [346, 347], [347, 280], [280, 346], [442, 443], [443, 282], [282, 442], [19, 94], [94, 370], [370, 19], [441, 442], [442, 295], [295, 441], [248, 419], [419, 197], [197, 248], [263, 255], [255, 359], [359, 263], [440, 275], [275, 274], [274, 440], [300, 383], [383, 368], [368, 300], [351, 412], [412, 465], [465, 351], [263, 467], [467, 466], [466, 263], [301, 368], [368, 389], [389, 301], [395, 378], [378, 379], [379, 395], [412, 351], [351, 419], [419, 412], [436, 426], [426, 322], [322, 436], [2, 164], [164, 393], [393, 2], [370, 462], [462, 461], [461, 370], [164, 0], [0, 267], [267, 164], [302, 11], [11, 12], [12, 302], [268, 12], [12, 13], [13, 268], [293, 300], [300, 301], [301, 293], [446, 261], [261, 340], [340, 446], [330, 266], [266, 425], [425, 330], [426, 423], [423, 391], [391, 426], [429, 355], [355, 437], [437, 429], [391, 327], [327, 326], [326, 391], [440, 457], [457, 438], [438, 440], [341, 382], [382, 362], [362, 341], [459, 457], [457, 461], [461, 459], [434, 430], [430, 394], [394, 434], [414, 463], [463, 362], [362, 414], [396, 369], [369, 262], [262, 396], [354, 461], [461, 457], [457, 354], [316, 403], [403, 402], [402, 316], [315, 404], [404, 403], [403, 315], [314, 405], [405, 404], [404, 314], [313, 406], [406, 405], [405, 313], [421, 418], [418, 406], [406, 421], [366, 401], [401, 361], [361, 366], [306, 408], [408, 407], [407, 306], [291, 409], [409, 408], [408, 291], [287, 410], [410, 409], [409, 287], [432, 436], [436, 410], [410, 432], [434, 416], [416, 411], [411, 434], [264, 368], [368, 383], [383, 264], [309, 438], [438, 457], [457, 309], [352, 376], [376, 401], [401, 352], [274, 275], [275, 4], [4, 274], [421, 428], [428, 262], [262, 421], [294, 327], [327, 358], [358, 294], [433, 416], [416, 367], [367, 433], [289, 455], [455, 439], [439, 289], [462, 370], [370, 326], [326, 462], [2, 326], [326, 370], [370, 2], [305, 460], [460, 455], [455, 305], [254, 449], [449, 448], [448, 254], [255, 261], [261, 446], [446, 255], [253, 450], [450, 449], [449, 253], [252, 451], [451, 450], [450, 252], [256, 452], [452, 451], [451, 256], [341, 453], [453, 452], [452, 341], [413, 464], [464, 463], [463, 413], [441, 413], [413, 414], [414, 441], [258, 442], [442, 441], [441, 258], [257, 443], [443, 442], [442, 257], [259, 444], [444, 443], [443, 259], [260, 445], [445, 444], [444, 260], [467, 342], [342, 445], [445, 467], [459, 458], [458, 250], [250, 459], [289, 392], [392, 290], [290, 289], [290, 328], [328, 460], [460, 290], [376, 433], [433, 435], [435, 376], [250, 290], [290, 392], [392, 250], [411, 416], [416, 433], [433, 411], [341, 463], [463, 464], [464, 341], [453, 464], [464, 465], [465, 453], [357, 465], [465, 412], [412, 357], [343, 412], [412, 399], [399, 343], [360, 363], [363, 440], [440, 360], [437, 399], [399, 456], [456, 437], [420, 456], [456, 363], [363, 420], [401, 435], [435, 288], [288, 401], [372, 383], [383, 353], [353, 372], [339, 255], [255, 249], [249, 339], [448, 261], [261, 255], [255, 448], [133, 243], [243, 190], [190, 133], [133, 155], [155, 112], [112, 133], [33, 246], [246, 247], [247, 33], [33, 130], [130, 25], [25, 33], [398, 384], [384, 286], [286, 398], [362, 398], [398, 414], [414, 362], [362, 463], [463, 341], [341, 362], [263, 359], [359, 467], [467, 263], [263, 249], [249, 255], [255, 263], [466, 467], [467, 260], [260, 466], [75, 60], [60, 166], [166, 75], [238, 239], [239, 79], [79, 238], [162, 127], [127, 139], [139, 162], [72, 11], [11, 37], [37, 72], [121, 232], [232, 120], [120, 121], [73, 72], [72, 39], [39, 73], [114, 128], [128, 47], [47, 114], [233, 232], [232, 128], [128, 233], [103, 104], [104, 67], [67, 103], [152, 175], [175, 148], [148, 152], [119, 118], [118, 101], [101, 119], [74, 73], [73, 40], [40, 74], [107, 9], [9, 108], [108, 107], [49, 48], [48, 131], [131, 49], [32, 194], [194, 211], [211, 32], [184, 74], [74, 185], [185, 184], [191, 80], [80, 183], [183, 191], [185, 40], [40, 186], [186, 185], [119, 230], [230, 118], [118, 119], [210, 202], [202, 214], [214, 210], [84, 83], [83, 17], [17, 84], [77, 76], [76, 146], [146, 77], [161, 160], [160, 30], [30, 161], [190, 56], [56, 173], [173, 190], [182, 106], [106, 194], [194, 182], [138, 135], [135, 192], [192, 138], [129, 203], [203, 98], [98, 129], [54, 21], [21, 68], [68, 54], [5, 51], [51, 4], [4, 5], [145, 144], [144, 23], [23, 145], [90, 77], [77, 91], [91, 90], [207, 205], [205, 187], [187, 207], [83, 201], [201, 18], [18, 83], [181, 91], [91, 182], [182, 181], [180, 90], [90, 181], [181, 180], [16, 85], [85, 17], [17, 16], [205, 206], [206, 36], [36, 205], [176, 148], [148, 140], [140, 176], [165, 92], [92, 39], [39, 165], [245, 193], [193, 244], [244, 245], [27, 159], [159, 28], [28, 27], [30, 247], [247, 161], [161, 30], [174, 236], [236, 196], [196, 174], [103, 54], [54, 104], [104, 103], [55, 193], [193, 8], [8, 55], [111, 117], [117, 31], [31, 111], [221, 189], [189, 55], [55, 221], [240, 98], [98, 99], [99, 240], [142, 126], [126, 100], [100, 142], [219, 166], [166, 218], [218, 219], [112, 155], [155, 26], [26, 112], [198, 209], [209, 131], [131, 198], [169, 135], [135, 150], [150, 169], [114, 47], [47, 217], [217, 114], [224, 223], [223, 53], [53, 224], [220, 45], [45, 134], [134, 220], [32, 211], [211, 140], [140, 32], [109, 67], [67, 108], [108, 109], [146, 43], [43, 91], [91, 146], [231, 230], [230, 120], [120, 231], [113, 226], [226, 247], [247, 113], [105, 63], [63, 52], [52, 105], [241, 238], [238, 242], [242, 241], [124, 46], [46, 156], [156, 124], [95, 78], [78, 96], [96, 95], [70, 46], [46, 63], [63, 70], [116, 143], [143, 227], [227, 116], [116, 123], [123, 111], [111, 116], [1, 44], [44, 19], [19, 1], [3, 236], [236, 51], [51, 3], [207, 216], [216, 205], [205, 207], [26, 154], [154, 22], [22, 26], [165, 39], [39, 167], [167, 165], [199, 200], [200, 208], [208, 199], [101, 36], [36, 100], [100, 101], [43, 57], [57, 202], [202, 43], [242, 20], [20, 99], [99, 242], [56, 28], [28, 157], [157, 56], [124, 35], [35, 113], [113, 124], [29, 160], [160, 27], [27, 29], [211, 204], [204, 210], [210, 211], [124, 113], [113, 46], [46, 124], [106, 43], [43, 204], [204, 106], [96, 62], [62, 77], [77, 96], [227, 137], [137, 116], [116, 227], [73, 41], [41, 72], [72, 73], [36, 203], [203, 142], [142, 36], [235, 64], [64, 240], [240, 235], [48, 49], [49, 64], [64, 48], [42, 41], [41, 74], [74, 42], [214, 212], [212, 207], [207, 214], [183, 42], [42, 184], [184, 183], [210, 169], [169, 211], [211, 210], [140, 170], [170, 176], [176, 140], [104, 105], [105, 69], [69, 104], [193, 122], [122, 168], [168, 193], [50, 123], [123, 187], [187, 50], [89, 96], [96, 90], [90, 89], [66, 65], [65, 107], [107, 66], [179, 89], [89, 180], [180, 179], [119, 101], [101, 120], [120, 119], [68, 63], [63, 104], [104, 68], [234, 93], [93, 227], [227, 234], [16, 15], [15, 85], [85, 16], [209, 129], [129, 49], [49, 209], [15, 14], [14, 86], [86, 15], [107, 55], [55, 9], [9, 107], [120, 100], [100, 121], [121, 120], [153, 145], [145, 22], [22, 153], [178, 88], [88, 179], [179, 178], [197, 6], [6, 196], [196, 197], [89, 88], [88, 96], [96, 89], [135, 138], [138, 136], [136, 135], [138, 215], [215, 172], [172, 138], [218, 115], [115, 219], [219, 218], [41, 42], [42, 81], [81, 41], [5, 195], [195, 51], [51, 5], [57, 43], [43, 61], [61, 57], [208, 171], [171, 199], [199, 208], [41, 81], [81, 38], [38, 41], [224, 53], [53, 225], [225, 224], [24, 144], [144, 110], [110, 24], [105, 52], [52, 66], [66, 105], [118, 229], [229, 117], [117, 118], [227, 34], [34, 234], [234, 227], [66, 107], [107, 69], [69, 66], [10, 109], [109, 151], [151, 10], [219, 48], [48, 235], [235, 219], [183, 62], [62, 191], [191, 183], [142, 129], [129, 126], [126, 142], [116, 111], [111, 143], [143, 116], [118, 117], [117, 50], [50, 118], [223, 222], [222, 52], [52, 223], [94, 19], [19, 141], [141, 94], [222, 221], [221, 65], [65, 222], [196, 3], [3, 197], [197, 196], [45, 220], [220, 44], [44, 45], [156, 70], [70, 139], [139, 156], [188, 122], [122, 245], [245, 188], [139, 71], [71, 162], [162, 139], [149, 170], [170, 150], [150, 149], [122, 188], [188, 196], [196, 122], [206, 216], [216, 92], [92, 206], [164, 2], [2, 167], [167, 164], [242, 141], [141, 241], [241, 242], [0, 164], [164, 37], [37, 0], [11, 72], [72, 12], [12, 11], [12, 38], [38, 13], [13, 12], [70, 63], [63, 71], [71, 70], [31, 226], [226, 111], [111, 31], [36, 101], [101, 205], [205, 36], [203, 206], [206, 165], [165, 203], [126, 209], [209, 217], [217, 126], [98, 165], [165, 97], [97, 98], [237, 220], [220, 218], [218, 237], [237, 239], [239, 241], [241, 237], [210, 214], [214, 169], [169, 210], [140, 171], [171, 32], [32, 140], [241, 125], [125, 237], [237, 241], [179, 86], [86, 178], [178, 179], [180, 85], [85, 179], [179, 180], [181, 84], [84, 180], [180, 181], [182, 83], [83, 181], [181, 182], [194, 201], [201, 182], [182, 194], [177, 137], [137, 132], [132, 177], [184, 76], [76, 183], [183, 184], [185, 61], [61, 184], [184, 185], [186, 57], [57, 185], [185, 186], [216, 212], [212, 186], [186, 216], [192, 214], [214, 187], [187, 192], [139, 34], [34, 156], [156, 139], [218, 79], [79, 237], [237, 218], [147, 123], [123, 177], [177, 147], [45, 44], [44, 4], [4, 45], [208, 201], [201, 32], [32, 208], [98, 64], [64, 129], [129, 98], [192, 213], [213, 138], [138, 192], [235, 59], [59, 219], [219, 235], [141, 242], [242, 97], [97, 141], [97, 2], [2, 141], [141, 97], [240, 75], [75, 235], [235, 240], [229, 24], [24, 228], [228, 229], [31, 25], [25, 226], [226, 31], [230, 23], [23, 229], [229, 230], [231, 22], [22, 230], [230, 231], [232, 26], [26, 231], [231, 232], [233, 112], [112, 232], [232, 233], [244, 189], [189, 243], [243, 244], [189, 221], [221, 190], [190, 189], [222, 28], [28, 221], [221, 222], [223, 27], [27, 222], [222, 223], [224, 29], [29, 223], [223, 224], [225, 30], [30, 224], [224, 225], [113, 247], [247, 225], [225, 113], [99, 60], [60, 240], [240, 99], [213, 147], [147, 215], [215, 213], [60, 20], [20, 166], [166, 60], [192, 187], [187, 213], [213, 192], [243, 112], [112, 244], [244, 243], [244, 233], [233, 245], [245, 244], [245, 128], [128, 188], [188, 245], [188, 114], [114, 174], [174, 188], [134, 131], [131, 220], [220, 134], [174, 217], [217, 236], [236, 174], [236, 198], [198, 134], [134, 236], [215, 177], [177, 58], [58, 215], [156, 143], [143, 124], [124, 156], [25, 110], [110, 7], [7, 25], [31, 228], [228, 25], [25, 31], [264, 356], [356, 368], [368, 264], [0, 11], [11, 267], [267, 0], [451, 452], [452, 349], [349, 451], [267, 302], [302, 269], [269, 267], [350, 357], [357, 277], [277, 350], [350, 452], [452, 357], [357, 350], [299, 333], [333, 297], [297, 299], [396, 175], [175, 377], [377, 396], [280, 347], [347, 330], [330, 280], [269, 303], [303, 270], [270, 269], [151, 9], [9, 337], [337, 151], [344, 278], [278, 360], [360, 344], [424, 418], [418, 431], [431, 424], [270, 304], [304, 409], [409, 270], [272, 310], [310, 407], [407, 272], [322, 270], [270, 410], [410, 322], [449, 450], [450, 347], [347, 449], [432, 422], [422, 434], [434, 432], [18, 313], [313, 17], [17, 18], [291, 306], [306, 375], [375, 291], [259, 387], [387, 260], [260, 259], [424, 335], [335, 418], [418, 424], [434, 364], [364, 416], [416, 434], [391, 423], [423, 327], [327, 391], [301, 251], [251, 298], [298, 301], [275, 281], [281, 4], [4, 275], [254, 373], [373, 253], [253, 254], [375, 307], [307, 321], [321, 375], [280, 425], [425, 411], [411, 280], [200, 421], [421, 18], [18, 200], [335, 321], [321, 406], [406, 335], [321, 320], [320, 405], [405, 321], [314, 315], [315, 17], [17, 314], [423, 426], [426, 266], [266, 423], [396, 377], [377, 369], [369, 396], [270, 322], [322, 269], [269, 270], [413, 417], [417, 464], [464, 413], [385, 386], [386, 258], [258, 385], [248, 456], [456, 419], [419, 248], [298, 284], [284, 333], [333, 298], [168, 417], [417, 8], [8, 168], [448, 346], [346, 261], [261, 448], [417, 413], [413, 285], [285, 417], [326, 327], [327, 328], [328, 326], [277, 355], [355, 329], [329, 277], [309, 392], [392, 438], [438, 309], [381, 382], [382, 256], [256, 381], [279, 429], [429, 360], [360, 279], [365, 364], [364, 379], [379, 365], [355, 277], [277, 437], [437, 355], [282, 443], [443, 283], [283, 282], [281, 275], [275, 363], [363, 281], [395, 431], [431, 369], [369, 395], [299, 297], [297, 337], [337, 299], [335, 273], [273, 321], [321, 335], [348, 450], [450, 349], [349, 348], [359, 446], [446, 467], [467, 359], [283, 293], [293, 282], [282, 283], [250, 458], [458, 462], [462, 250], [300, 276], [276, 383], [383, 300], [292, 308], [308, 325], [325, 292], [283, 276], [276, 293], [293, 283], [264, 372], [372, 447], [447, 264], [346, 352], [352, 340], [340, 346], [354, 274], [274, 19], [19, 354], [363, 456], [456, 281], [281, 363], [426, 436], [436, 425], [425, 426], [380, 381], [381, 252], [252, 380], [267, 269], [269, 393], [393, 267], [421, 200], [200, 428], [428, 421], [371, 266], [266, 329], [329, 371], [432, 287], [287, 422], [422, 432], [290, 250], [250, 328], [328, 290], [385, 258], [258, 384], [384, 385], [446, 265], [265, 342], [342, 446], [386, 387], [387, 257], [257, 386], [422, 424], [424, 430], [430, 422], [445, 342], [342, 276], [276, 445], [422, 273], [273, 424], [424, 422], [306, 292], [292, 307], [307, 306], [352, 366], [366, 345], [345, 352], [268, 271], [271, 302], [302, 268], [358, 423], [423, 371], [371, 358], [327, 294], [294, 460], [460, 327], [331, 279], [279, 294], [294, 331], [303, 271], [271, 304], [304, 303], [436, 432], [432, 427], [427, 436], [304, 272], [272, 408], [408, 304], [395, 394], [394, 431], [431, 395], [378, 395], [395, 400], [400, 378], [296, 334], [334, 299], [299, 296], [6, 351], [351, 168], [168, 6], [376, 352], [352, 411], [411, 376], [307, 325], [325, 320], [320, 307], [285, 295], [295, 336], [336, 285], [320, 319], [319, 404], [404, 320], [329, 330], [330, 349], [349, 329], [334, 293], [293, 333], [333, 334], [366, 323], [323, 447], [447, 366], [316, 15], [15, 315], [315, 316], [331, 358], [358, 279], [279, 331], [317, 14], [14, 316], [316, 317], [8, 285], [285, 9], [9, 8], [277, 329], [329, 350], [350, 277], [253, 374], [374, 252], [252, 253], [319, 318], [318, 403], [403, 319], [351, 6], [6, 419], [419, 351], [324, 318], [318, 325], [325, 324], [397, 367], [367, 365], [365, 397], [288, 435], [435, 397], [397, 288], [278, 344], [344, 439], [439, 278], [310, 272], [272, 311], [311, 310], [248, 195], [195, 281], [281, 248], [375, 273], [273, 291], [291, 375], [175, 396], [396, 199], [199, 175], [312, 311], [311, 268], [268, 312], [276, 283], [283, 445], [445, 276], [390, 373], [373, 339], [339, 390], [295, 282], [282, 296], [296, 295], [448, 449], [449, 346], [346, 448], [356, 264], [264, 454], [454, 356], [337, 336], [336, 299], [299, 337], [337, 338], [338, 151], [151, 337], [294, 278], [278, 455], [455, 294], [308, 292], [292, 415], [415, 308], [429, 358], [358, 355], [355, 429], [265, 340], [340, 372], [372, 265], [352, 346], [346, 280], [280, 352], [295, 442], [442, 282], [282, 295], [354, 19], [19, 370], [370, 354], [285, 441], [441, 295], [295, 285], [195, 248], [248, 197], [197, 195], [457, 440], [440, 274], [274, 457], [301, 300], [300, 368], [368, 301], [417, 351], [351, 465], [465, 417], [251, 301], [301, 389], [389, 251], [394, 395], [395, 379], [379, 394], [399, 412], [412, 419], [419, 399], [410, 436], [436, 322], [322, 410], [326, 2], [2, 393], [393, 326], [354, 370], [370, 461], [461, 354], [393, 164], [164, 267], [267, 393], [268, 302], [302, 12], [12, 268], [312, 268], [268, 13], [13, 312], [298, 293], [293, 301], [301, 298], [265, 446], [446, 340], [340, 265], [280, 330], [330, 425], [425, 280], [322, 426], [426, 391], [391, 322], [420, 429], [429, 437], [437, 420], [393, 391], [391, 326], [326, 393], [344, 440], [440, 438], [438, 344], [458, 459], [459, 461], [461, 458], [364, 434], [434, 394], [394, 364], [428, 396], [396, 262], [262, 428], [274, 354], [354, 457], [457, 274], [317, 316], [316, 402], [402, 317], [316, 315], [315, 403], [403, 316], [315, 314], [314, 404], [404, 315], [314, 313], [313, 405], [405, 314], [313, 421], [421, 406], [406, 313], [323, 366], [366, 361], [361, 323], [292, 306], [306, 407], [407, 292], [306, 291], [291, 408], [408, 306], [291, 287], [287, 409], [409, 291], [287, 432], [432, 410], [410, 287], [427, 434], [434, 411], [411, 427], [372, 264], [264, 383], [383, 372], [459, 309], [309, 457], [457, 459], [366, 352], [352, 401], [401, 366], [1, 274], [274, 4], [4, 1], [418, 421], [421, 262], [262, 418], [331, 294], [294, 358], [358, 331], [435, 433], [433, 367], [367, 435], [392, 289], [289, 439], [439, 392], [328, 462], [462, 326], [326, 328], [94, 2], [2, 370], [370, 94], [289, 305], [305, 455], [455, 289], [339, 254], [254, 448], [448, 339], [359, 255], [255, 446], [446, 359], [254, 253], [253, 449], [449, 254], [253, 252], [252, 450], [450, 253], [252, 256], [256, 451], [451, 252], [256, 341], [341, 452], [452, 256], [414, 413], [413, 463], [463, 414], [286, 441], [441, 414], [414, 286], [286, 258], [258, 441], [441, 286], [258, 257], [257, 442], [442, 258], [257, 259], [259, 443], [443, 257], [259, 260], [260, 444], [444, 259], [260, 467], [467, 445], [445, 260], [309, 459], [459, 250], [250, 309], [305, 289], [289, 290], [290, 305], [305, 290], [290, 460], [460, 305], [401, 376], [376, 435], [435, 401], [309, 250], [250, 392], [392, 309], [376, 411], [411, 433], [433, 376], [453, 341], [341, 464], [464, 453], [357, 453], [453, 465], [465, 357], [343, 357], [357, 412], [412, 343], [437, 343], [343, 399], [399, 437], [344, 360], [360, 440], [440, 344], [420, 437], [437, 456], [456, 420], [360, 420], [420, 363], [363, 360], [361, 401], [401, 288], [288, 361], [265, 372], [372, 353], [353, 265], [390, 339], [339, 249], [249, 390], [339, 448], [448, 255], [255, 339]);
function uc(e) {
  e.j = { faceLandmarks: [], faceBlendshapes: [], facialTransformationMatrixes: [] };
}
var z = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect", !1), this.j = { faceLandmarks: [], faceBlendshapes: [], facialTransformationMatrixes: [] }, this.outputFacialTransformationMatrixes = this.outputFaceBlendshapes = !1, A(e = this.h = new xl(), 0, 1, t = new Y()), this.v = new Al(), A(this.h, 0, 3, this.v), this.s = new sn(), A(this.h, 0, 2, this.s), at(this.s, 4, 1), w(this.s, 2, 0.5), w(this.v, 2, 0.5), w(this.h, 4, 0.5);
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return "numFaces" in e && at(this.s, 4, e.numFaces ?? 1), "minFaceDetectionConfidence" in e && w(this.s, 2, e.minFaceDetectionConfidence ?? 0.5), "minTrackingConfidence" in e && w(this.h, 4, e.minTrackingConfidence ?? 0.5), "minFacePresenceConfidence" in e && w(this.v, 2, e.minFacePresenceConfidence ?? 0.5), "outputFaceBlendshapes" in e && (this.outputFaceBlendshapes = !!e.outputFaceBlendshapes), "outputFacialTransformationMatrixes" in e && (this.outputFacialTransformationMatrixes = !!e.outputFacialTransformationMatrixes), this.l(e);
  }
  D(e, t) {
    return uc(this), Ze(this, e, t), this.j;
  }
  F(e, t, r) {
    return uc(this), ct(this, e, r, t), this.j;
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect"), O(e, "face_landmarks");
    const t = new Ue();
    Ke(t, dh, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect"), I(r, "NORM_LANDMARKS:face_landmarks"), r.o(t), je(e, r), this.g.attachProtoVectorListener("face_landmarks", (i, n) => {
      for (const o of i) i = ti(o), this.j.faceLandmarks.push(an(i));
      v(this, n);
    }), this.g.attachEmptyPacketListener("face_landmarks", (i) => {
      v(this, i);
    }), this.outputFaceBlendshapes && (O(e, "blendshapes"), I(r, "BLENDSHAPES:blendshapes"), this.g.attachProtoVectorListener("blendshapes", (i, n) => {
      if (this.outputFaceBlendshapes) for (const o of i) i = on(o), this.j.faceBlendshapes.push(ws(i.g() ?? []));
      v(this, n);
    }), this.g.attachEmptyPacketListener("blendshapes", (i) => {
      v(this, i);
    })), this.outputFacialTransformationMatrixes && (O(e, "face_geometry"), I(r, "FACE_GEOMETRY:face_geometry"), this.g.attachProtoVectorListener("face_geometry", (i, n) => {
      if (this.outputFacialTransformationMatrixes) for (const o of i) (i = R(hh(o), rh, 2)) && this.j.facialTransformationMatrixes.push({ rows: ze(i, 1) ?? 0 ?? 0, columns: ze(i, 2) ?? 0 ?? 0, data: jt(i, 3, Rt, $t()).slice() ?? [] });
      v(this, n);
    }), this.g.attachEmptyPacketListener("face_geometry", (i) => {
      v(this, i);
    })), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
z.prototype.detectForVideo = z.prototype.F, z.prototype.detect = z.prototype.D, z.prototype.setOptions = z.prototype.o, z.createFromModelPath = function(e, t) {
  return M(z, e, { baseOptions: { modelAssetPath: t } });
}, z.createFromModelBuffer = function(e, t) {
  return M(z, e, { baseOptions: { modelAssetBuffer: t } });
}, z.createFromOptions = function(e, t) {
  return M(z, e, t);
}, z.FACE_LANDMARKS_LIPS = As, z.FACE_LANDMARKS_LEFT_EYE = xs, z.FACE_LANDMARKS_LEFT_EYEBROW = Ts, z.FACE_LANDMARKS_LEFT_IRIS = Ql, z.FACE_LANDMARKS_RIGHT_EYE = Ss, z.FACE_LANDMARKS_RIGHT_EYEBROW = Ls, z.FACE_LANDMARKS_RIGHT_IRIS = e1, z.FACE_LANDMARKS_FACE_OVAL = Ms, z.FACE_LANDMARKS_CONTOURS = t1, z.FACE_LANDMARKS_TESSELATION = r1;
var rt = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect", !0), A(e = this.j = new Sl(), 0, 1, t = new Y());
  }
  get baseOptions() {
    return R(this.j, Y, 1);
  }
  set baseOptions(e) {
    A(this.j, 0, 1, e);
  }
  o(e) {
    return super.l(e);
  }
  Ka(e, t, r) {
    const i = typeof t != "function" ? t : {};
    if (this.h = typeof t == "function" ? t : r, Ze(this, e, i ?? {}), !this.h) return this.s;
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect"), O(e, "stylized_image");
    const t = new Ue();
    Ke(t, fh, this.j);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect"), I(r, "STYLIZED_IMAGE:stylized_image"), r.o(t), je(e, r), this.g.V("stylized_image", (i, n) => {
      var o = !this.h, s = i.data, a = i.width;
      const c = a * (i = i.height);
      if (s instanceof Uint8Array) if (s.length === 3 * c) {
        const l = new Uint8ClampedArray(4 * c);
        for (let h = 0; h < c; ++h) l[4 * h] = s[3 * h], l[4 * h + 1] = s[3 * h + 1], l[4 * h + 2] = s[3 * h + 2], l[4 * h + 3] = 255;
        s = new ImageData(l, a, i);
      } else {
        if (s.length !== 4 * c) throw Error("Unsupported channel count: " + s.length / c);
        s = new ImageData(new Uint8ClampedArray(s.buffer, s.byteOffset, s.length), a, i);
      }
      else if (!(s instanceof WebGLTexture)) throw Error(`Unsupported format: ${s.constructor.name}`);
      a = new me([s], !1, !1, this.g.i.canvas, this.P, a, i), this.s = o = o ? a.clone() : a, this.h && this.h(o), v(this, n);
    }), this.g.attachEmptyPacketListener("stylized_image", (i) => {
      this.s = null, this.h && this.h(null), v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
rt.prototype.stylize = rt.prototype.Ka, rt.prototype.setOptions = rt.prototype.o, rt.createFromModelPath = function(e, t) {
  return M(rt, e, { baseOptions: { modelAssetPath: t } });
}, rt.createFromModelBuffer = function(e, t) {
  return M(rt, e, { baseOptions: { modelAssetBuffer: t } });
}, rt.createFromOptions = function(e, t) {
  return M(rt, e, t);
};
var Is = et([0, 1], [1, 2], [2, 3], [3, 4], [0, 5], [5, 6], [6, 7], [7, 8], [5, 9], [9, 10], [10, 11], [11, 12], [9, 13], [13, 14], [14, 15], [15, 16], [13, 17], [0, 17], [17, 18], [18, 19], [19, 20]);
function hc(e) {
  e.gestures = [], e.landmarks = [], e.worldLandmarks = [], e.handedness = [];
}
function dc(e) {
  return e.gestures.length === 0 ? { gestures: [], landmarks: [], worldLandmarks: [], handedness: [], handednesses: [] } : { gestures: e.gestures, landmarks: e.landmarks, worldLandmarks: e.worldLandmarks, handedness: e.handedness, handednesses: e.handedness };
}
function fc(e, t = !0) {
  const r = [];
  for (const n of e) {
    var i = on(n);
    e = [];
    for (const o of i.g()) i = t && ze(o, 1) != null ? ze(o, 1) ?? 0 : -1, e.push({ score: oe(o, 2) ?? 0, index: i, categoryName: qe(o, 3) ?? "" ?? "", displayName: qe(o, 4) ?? "" ?? "" });
    r.push(e);
  }
  return r;
}
var Re = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect", !1), this.gestures = [], this.landmarks = [], this.worldLandmarks = [], this.handedness = [], A(e = this.j = new Il(), 0, 1, t = new Y()), this.s = new vs(), A(this.j, 0, 2, this.s), this.C = new gs(), A(this.s, 0, 3, this.C), this.v = new Ml(), A(this.s, 0, 2, this.v), this.h = new ph(), A(this.j, 0, 3, this.h), w(this.v, 2, 0.5), w(this.s, 4, 0.5), w(this.C, 2, 0.5);
  }
  get baseOptions() {
    return R(this.j, Y, 1);
  }
  set baseOptions(e) {
    A(this.j, 0, 1, e);
  }
  o(e) {
    if (at(this.v, 3, e.numHands ?? 1), "minHandDetectionConfidence" in e && w(this.v, 2, e.minHandDetectionConfidence ?? 0.5), "minTrackingConfidence" in e && w(this.s, 4, e.minTrackingConfidence ?? 0.5), "minHandPresenceConfidence" in e && w(this.C, 2, e.minHandPresenceConfidence ?? 0.5), e.cannedGesturesClassifierOptions) {
      var t = new Kt(), r = t, i = mo(e.cannedGesturesClassifierOptions, R(this.h, Kt, 3)?.h());
      A(r, 0, 2, i), A(this.h, 0, 3, t);
    } else e.cannedGesturesClassifierOptions === void 0 && R(this.h, Kt, 3)?.g();
    return e.customGesturesClassifierOptions ? (A(r = t = new Kt(), 0, 2, i = mo(e.customGesturesClassifierOptions, R(this.h, Kt, 4)?.h())), A(this.h, 0, 4, t)) : e.customGesturesClassifierOptions === void 0 && R(this.h, Kt, 4)?.g(), this.l(e);
  }
  Fa(e, t) {
    return hc(this), Ze(this, e, t), dc(this);
  }
  Ga(e, t, r) {
    return hc(this), ct(this, e, r, t), dc(this);
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect"), O(e, "hand_gestures"), O(e, "hand_landmarks"), O(e, "world_hand_landmarks"), O(e, "handedness");
    const t = new Ue();
    Ke(t, mh, this.j);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect"), I(r, "HAND_GESTURES:hand_gestures"), I(r, "LANDMARKS:hand_landmarks"), I(r, "WORLD_LANDMARKS:world_hand_landmarks"), I(r, "HANDEDNESS:handedness"), r.o(t), je(e, r), this.g.attachProtoVectorListener("hand_landmarks", (i, n) => {
      for (const o of i) {
        i = ti(o);
        const s = [];
        for (const a of gt(i, bl, 1)) s.push({ x: oe(a, 1) ?? 0, y: oe(a, 2) ?? 0, z: oe(a, 3) ?? 0, visibility: oe(a, 4) ?? 0 });
        this.landmarks.push(s);
      }
      v(this, n);
    }), this.g.attachEmptyPacketListener("hand_landmarks", (i) => {
      v(this, i);
    }), this.g.attachProtoVectorListener("world_hand_landmarks", (i, n) => {
      for (const o of i) {
        i = ir(o);
        const s = [];
        for (const a of gt(i, yl, 1)) s.push({ x: oe(a, 1) ?? 0, y: oe(a, 2) ?? 0, z: oe(a, 3) ?? 0, visibility: oe(a, 4) ?? 0 });
        this.worldLandmarks.push(s);
      }
      v(this, n);
    }), this.g.attachEmptyPacketListener("world_hand_landmarks", (i) => {
      v(this, i);
    }), this.g.attachProtoVectorListener("hand_gestures", (i, n) => {
      this.gestures.push(...fc(i, !1)), v(this, n);
    }), this.g.attachEmptyPacketListener("hand_gestures", (i) => {
      v(this, i);
    }), this.g.attachProtoVectorListener("handedness", (i, n) => {
      this.handedness.push(...fc(i)), v(this, n);
    }), this.g.attachEmptyPacketListener("handedness", (i) => {
      v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
function pc(e) {
  return { landmarks: e.landmarks, worldLandmarks: e.worldLandmarks, handednesses: e.handedness, handedness: e.handedness };
}
Re.prototype.recognizeForVideo = Re.prototype.Ga, Re.prototype.recognize = Re.prototype.Fa, Re.prototype.setOptions = Re.prototype.o, Re.createFromModelPath = function(e, t) {
  return M(Re, e, { baseOptions: { modelAssetPath: t } });
}, Re.createFromModelBuffer = function(e, t) {
  return M(Re, e, { baseOptions: { modelAssetBuffer: t } });
}, Re.createFromOptions = function(e, t) {
  return M(Re, e, t);
}, Re.HAND_CONNECTIONS = Is;
var Oe = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect", !1), this.landmarks = [], this.worldLandmarks = [], this.handedness = [], A(e = this.h = new vs(), 0, 1, t = new Y()), this.s = new gs(), A(this.h, 0, 3, this.s), this.j = new Ml(), A(this.h, 0, 2, this.j), at(this.j, 3, 1), w(this.j, 2, 0.5), w(this.s, 2, 0.5), w(this.h, 4, 0.5);
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return "numHands" in e && at(this.j, 3, e.numHands ?? 1), "minHandDetectionConfidence" in e && w(this.j, 2, e.minHandDetectionConfidence ?? 0.5), "minTrackingConfidence" in e && w(this.h, 4, e.minTrackingConfidence ?? 0.5), "minHandPresenceConfidence" in e && w(this.s, 2, e.minHandPresenceConfidence ?? 0.5), this.l(e);
  }
  D(e, t) {
    return this.landmarks = [], this.worldLandmarks = [], this.handedness = [], Ze(this, e, t), pc(this);
  }
  F(e, t, r) {
    return this.landmarks = [], this.worldLandmarks = [], this.handedness = [], ct(this, e, r, t), pc(this);
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect"), O(e, "hand_landmarks"), O(e, "world_hand_landmarks"), O(e, "handedness");
    const t = new Ue();
    Ke(t, gh, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect"), I(r, "LANDMARKS:hand_landmarks"), I(r, "WORLD_LANDMARKS:world_hand_landmarks"), I(r, "HANDEDNESS:handedness"), r.o(t), je(e, r), this.g.attachProtoVectorListener("hand_landmarks", (i, n) => {
      for (const o of i) i = ti(o), this.landmarks.push(an(i));
      v(this, n);
    }), this.g.attachEmptyPacketListener("hand_landmarks", (i) => {
      v(this, i);
    }), this.g.attachProtoVectorListener("world_hand_landmarks", (i, n) => {
      for (const o of i) i = ir(o), this.worldLandmarks.push($r(i));
      v(this, n);
    }), this.g.attachEmptyPacketListener("world_hand_landmarks", (i) => {
      v(this, i);
    }), this.g.attachProtoVectorListener("handedness", (i, n) => {
      var o = this.handedness, s = o.push;
      const a = [];
      for (const c of i) {
        i = on(c);
        const l = [];
        for (const h of i.g()) l.push({ score: oe(h, 2) ?? 0, index: ze(h, 1) ?? 0 ?? -1, categoryName: qe(h, 3) ?? "" ?? "", displayName: qe(h, 4) ?? "" ?? "" });
        a.push(l);
      }
      s.call(o, ...a), v(this, n);
    }), this.g.attachEmptyPacketListener("handedness", (i) => {
      v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
Oe.prototype.detectForVideo = Oe.prototype.F, Oe.prototype.detect = Oe.prototype.D, Oe.prototype.setOptions = Oe.prototype.o, Oe.createFromModelPath = function(e, t) {
  return M(Oe, e, { baseOptions: { modelAssetPath: t } });
}, Oe.createFromModelBuffer = function(e, t) {
  return M(Oe, e, { baseOptions: { modelAssetBuffer: t } });
}, Oe.createFromOptions = function(e, t) {
  return M(Oe, e, t);
}, Oe.HAND_CONNECTIONS = Is;
var i1 = et([0, 1], [1, 2], [2, 3], [3, 7], [0, 4], [4, 5], [5, 6], [6, 8], [9, 10], [11, 12], [11, 13], [13, 15], [15, 17], [15, 19], [15, 21], [17, 19], [12, 14], [14, 16], [16, 18], [16, 20], [16, 22], [18, 20], [11, 23], [12, 24], [23, 24], [23, 25], [24, 26], [25, 27], [26, 28], [27, 29], [28, 30], [29, 31], [30, 32], [27, 31], [28, 32]);
function mc(e) {
  e.h = { faceLandmarks: [], faceBlendshapes: [], poseLandmarks: [], poseWorldLandmarks: [], poseSegmentationMasks: [], leftHandLandmarks: [], leftHandWorldLandmarks: [], rightHandLandmarks: [], rightHandWorldLandmarks: [] };
}
function gc(e) {
  try {
    if (!e.C) return e.h;
    e.C(e.h);
  } finally {
    ln(e);
  }
}
function fi(e, t) {
  e = ti(e), t.push(an(e));
}
var X = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "input_frames_image", null, !1), this.h = { faceLandmarks: [], faceBlendshapes: [], poseLandmarks: [], poseWorldLandmarks: [], poseSegmentationMasks: [], leftHandLandmarks: [], leftHandWorldLandmarks: [], rightHandLandmarks: [], rightHandWorldLandmarks: [] }, this.outputPoseSegmentationMasks = this.outputFaceBlendshapes = !1, A(e = this.j = new Nl(), 0, 1, t = new Y()), this.K = new gs(), A(this.j, 0, 2, this.K), this.Y = new vh(), A(this.j, 0, 3, this.Y), this.s = new sn(), A(this.j, 0, 4, this.s), this.H = new Al(), A(this.j, 0, 5, this.H), this.v = new Ol(), A(this.j, 0, 6, this.v), this.L = new Pl(), A(this.j, 0, 7, this.L), w(this.s, 2, 0.5), w(this.s, 3, 0.3), w(this.H, 2, 0.5), w(this.v, 2, 0.5), w(this.v, 3, 0.3), w(this.L, 2, 0.5), w(this.K, 2, 0.5);
  }
  get baseOptions() {
    return R(this.j, Y, 1);
  }
  set baseOptions(e) {
    A(this.j, 0, 1, e);
  }
  o(e) {
    return "minFaceDetectionConfidence" in e && w(this.s, 2, e.minFaceDetectionConfidence ?? 0.5), "minFaceSuppressionThreshold" in e && w(this.s, 3, e.minFaceSuppressionThreshold ?? 0.3), "minFacePresenceConfidence" in e && w(this.H, 2, e.minFacePresenceConfidence ?? 0.5), "outputFaceBlendshapes" in e && (this.outputFaceBlendshapes = !!e.outputFaceBlendshapes), "minPoseDetectionConfidence" in e && w(this.v, 2, e.minPoseDetectionConfidence ?? 0.5), "minPoseSuppressionThreshold" in e && w(this.v, 3, e.minPoseSuppressionThreshold ?? 0.3), "minPosePresenceConfidence" in e && w(this.L, 2, e.minPosePresenceConfidence ?? 0.5), "outputPoseSegmentationMasks" in e && (this.outputPoseSegmentationMasks = !!e.outputPoseSegmentationMasks), "minHandLandmarksConfidence" in e && w(this.K, 2, e.minHandLandmarksConfidence ?? 0.5), this.l(e);
  }
  D(e, t, r) {
    const i = typeof t != "function" ? t : {};
    return this.C = typeof t == "function" ? t : r, mc(this), Ze(this, e, i), gc(this);
  }
  F(e, t, r, i) {
    const n = typeof r != "function" ? r : {};
    return this.C = typeof r == "function" ? r : i, mc(this), ct(this, e, n, t), gc(this);
  }
  m() {
    var e = new Ie();
    q(e, "input_frames_image"), O(e, "pose_landmarks"), O(e, "pose_world_landmarks"), O(e, "face_landmarks"), O(e, "left_hand_landmarks"), O(e, "left_hand_world_landmarks"), O(e, "right_hand_landmarks"), O(e, "right_hand_world_landmarks");
    const t = new Ue(), r = new Pa();
    co(r, 1, wr("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"), ""), function(n, o) {
      if (o != null) if (Array.isArray(o)) V(n, 2, Wi(o, Wo, void 0, void 0, !1));
      else {
        if (!(typeof o == "string" || o instanceof pt || Gt(o))) throw Error("invalid value in Any.value field: " + o + " expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");
        co(n, 2, Do(o, !1), Vt());
      }
    }(r, this.j.g());
    const i = new ke();
    $e(i, "mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"), xi(i, 8, Pa, r), W(i, "IMAGE:input_frames_image"), I(i, "POSE_LANDMARKS:pose_landmarks"), I(i, "POSE_WORLD_LANDMARKS:pose_world_landmarks"), I(i, "FACE_LANDMARKS:face_landmarks"), I(i, "LEFT_HAND_LANDMARKS:left_hand_landmarks"), I(i, "LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"), I(i, "RIGHT_HAND_LANDMARKS:right_hand_landmarks"), I(i, "RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"), i.o(t), je(e, i), cn(this, e), this.g.attachProtoListener("pose_landmarks", (n, o) => {
      fi(n, this.h.poseLandmarks), v(this, o);
    }), this.g.attachEmptyPacketListener("pose_landmarks", (n) => {
      v(this, n);
    }), this.g.attachProtoListener("pose_world_landmarks", (n, o) => {
      var s = this.h.poseWorldLandmarks;
      n = ir(n), s.push($r(n)), v(this, o);
    }), this.g.attachEmptyPacketListener("pose_world_landmarks", (n) => {
      v(this, n);
    }), this.outputPoseSegmentationMasks && (I(i, "POSE_SEGMENTATION_MASK:pose_segmentation_mask"), dr(this, "pose_segmentation_mask"), this.g.V("pose_segmentation_mask", (n, o) => {
      this.h.poseSegmentationMasks = [mr(this, n, !0, !this.C)], v(this, o);
    }), this.g.attachEmptyPacketListener("pose_segmentation_mask", (n) => {
      this.h.poseSegmentationMasks = [], v(this, n);
    })), this.g.attachProtoListener("face_landmarks", (n, o) => {
      fi(n, this.h.faceLandmarks), v(this, o);
    }), this.g.attachEmptyPacketListener("face_landmarks", (n) => {
      v(this, n);
    }), this.outputFaceBlendshapes && (O(e, "extra_blendshapes"), I(i, "FACE_BLENDSHAPES:extra_blendshapes"), this.g.attachProtoListener("extra_blendshapes", (n, o) => {
      var s = this.h.faceBlendshapes;
      this.outputFaceBlendshapes && (n = on(n), s.push(ws(n.g() ?? []))), v(this, o);
    }), this.g.attachEmptyPacketListener("extra_blendshapes", (n) => {
      v(this, n);
    })), this.g.attachProtoListener("left_hand_landmarks", (n, o) => {
      fi(n, this.h.leftHandLandmarks), v(this, o);
    }), this.g.attachEmptyPacketListener("left_hand_landmarks", (n) => {
      v(this, n);
    }), this.g.attachProtoListener("left_hand_world_landmarks", (n, o) => {
      var s = this.h.leftHandWorldLandmarks;
      n = ir(n), s.push($r(n)), v(this, o);
    }), this.g.attachEmptyPacketListener("left_hand_world_landmarks", (n) => {
      v(this, n);
    }), this.g.attachProtoListener("right_hand_landmarks", (n, o) => {
      fi(n, this.h.rightHandLandmarks), v(this, o);
    }), this.g.attachEmptyPacketListener("right_hand_landmarks", (n) => {
      v(this, n);
    }), this.g.attachProtoListener("right_hand_world_landmarks", (n, o) => {
      var s = this.h.rightHandWorldLandmarks;
      n = ir(n), s.push($r(n)), v(this, o);
    }), this.g.attachEmptyPacketListener("right_hand_world_landmarks", (n) => {
      v(this, n);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
X.prototype.detectForVideo = X.prototype.F, X.prototype.detect = X.prototype.D, X.prototype.setOptions = X.prototype.o, X.createFromModelPath = function(e, t) {
  return M(X, e, { baseOptions: { modelAssetPath: t } });
}, X.createFromModelBuffer = function(e, t) {
  return M(X, e, { baseOptions: { modelAssetBuffer: t } });
}, X.createFromOptions = function(e, t) {
  return M(X, e, t);
}, X.HAND_CONNECTIONS = Is, X.POSE_CONNECTIONS = i1, X.FACE_LANDMARKS_LIPS = As, X.FACE_LANDMARKS_LEFT_EYE = xs, X.FACE_LANDMARKS_LEFT_EYEBROW = Ts, X.FACE_LANDMARKS_LEFT_IRIS = Ql, X.FACE_LANDMARKS_RIGHT_EYE = Ss, X.FACE_LANDMARKS_RIGHT_EYEBROW = Ls, X.FACE_LANDMARKS_RIGHT_IRIS = e1, X.FACE_LANDMARKS_FACE_OVAL = Ms, X.FACE_LANDMARKS_CONTOURS = t1, X.FACE_LANDMARKS_TESSELATION = r1;
var Ge = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "input_image", "norm_rect", !0), this.j = { classifications: [] }, A(e = this.h = new Dl(), 0, 1, t = new Y());
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return A(this.h, 0, 2, mo(e, R(this.h, fs, 2))), this.l(e);
  }
  qa(e, t) {
    return this.j = { classifications: [] }, Ze(this, e, t), this.j;
  }
  ra(e, t, r) {
    return this.j = { classifications: [] }, ct(this, e, r, t), this.j;
  }
  m() {
    var e = new Ie();
    q(e, "input_image"), q(e, "norm_rect"), O(e, "classifications");
    const t = new Ue();
    Ke(t, _h, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"), W(r, "IMAGE:input_image"), W(r, "NORM_RECT:norm_rect"), I(r, "CLASSIFICATIONS:classifications"), r.o(t), je(e, r), this.g.attachProtoListener("classifications", (i, n) => {
      this.j = function(o) {
        const s = { classifications: gt(o, nh, 1).map((a) => ws(R(a, gl, 4)?.g() ?? [], ze(a, 2) ?? 0, qe(a, 3) ?? "")) };
        return oo(ur(o, 2)) != null && (s.timestampMs = oo(ur(o, 2)) ?? 0), s;
      }(oh(i)), v(this, n);
    }), this.g.attachEmptyPacketListener("classifications", (i) => {
      v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
Ge.prototype.classifyForVideo = Ge.prototype.ra, Ge.prototype.classify = Ge.prototype.qa, Ge.prototype.setOptions = Ge.prototype.o, Ge.createFromModelPath = function(e, t) {
  return M(Ge, e, { baseOptions: { modelAssetPath: t } });
}, Ge.createFromModelBuffer = function(e, t) {
  return M(Ge, e, { baseOptions: { modelAssetBuffer: t } });
}, Ge.createFromOptions = function(e, t) {
  return M(Ge, e, t);
};
var Pe = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect", !0), this.h = new Ul(), this.embeddings = { embeddings: [] }, A(e = this.h, 0, 1, t = new Y());
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    var t = this.h, r = R(this.h, Va, 2);
    return r = r ? r.clone() : new Va(), e.l2Normalize !== void 0 ? qr(r, 1, e.l2Normalize) : "l2Normalize" in e && V(r, 1), e.quantize !== void 0 ? qr(r, 2, e.quantize) : "quantize" in e && V(r, 2), A(t, 0, 2, r), this.l(e);
  }
  xa(e, t) {
    return Ze(this, e, t), this.embeddings;
  }
  ya(e, t, r) {
    return ct(this, e, r, t), this.embeddings;
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect"), O(e, "embeddings_out");
    const t = new Ue();
    Ke(t, yh, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect"), I(r, "EMBEDDINGS:embeddings_out"), r.o(t), je(e, r), this.g.attachProtoListener("embeddings_out", (i, n) => {
      i = ch(i), this.embeddings = function(o) {
        return { embeddings: gt(o, ah, 1).map((s) => {
          const a = { headIndex: ze(s, 3) ?? 0 ?? -1, headName: qe(s, 4) ?? "" ?? "" };
          if (N2(s, Ga, jn(s, 1)) !== void 0) s = jt(s = R(s, Ga, jn(s, 1)), 1, Rt, $t()), a.floatEmbedding = s.slice();
          else {
            const c = new Uint8Array(0);
            a.quantizedEmbedding = R(s, sh, jn(s, 2))?.ma()?.h() ?? c;
          }
          return a;
        }), timestampMs: oo(ur(o, 2)) ?? 0 };
      }(i), v(this, n);
    }), this.g.attachEmptyPacketListener("embeddings_out", (i) => {
      v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
Pe.cosineSimilarity = function(e, t) {
  if (e.floatEmbedding && t.floatEmbedding) e = Za(e.floatEmbedding, t.floatEmbedding);
  else {
    if (!e.quantizedEmbedding || !t.quantizedEmbedding) throw Error("Cannot compute cosine similarity between quantized and float embeddings.");
    e = Za(Xa(e.quantizedEmbedding), Xa(t.quantizedEmbedding));
  }
  return e;
}, Pe.prototype.embedForVideo = Pe.prototype.ya, Pe.prototype.embed = Pe.prototype.xa, Pe.prototype.setOptions = Pe.prototype.o, Pe.createFromModelPath = function(e, t) {
  return M(Pe, e, { baseOptions: { modelAssetPath: t } });
}, Pe.createFromModelBuffer = function(e, t) {
  return M(Pe, e, { baseOptions: { modelAssetBuffer: t } });
}, Pe.createFromOptions = function(e, t) {
  return M(Pe, e, t);
};
var yo = class {
  constructor(e, t, r) {
    this.confidenceMasks = e, this.categoryMask = t, this.qualityScores = r;
  }
  close() {
    this.confidenceMasks?.forEach((e) => {
      e.close();
    }), this.categoryMask?.close();
  }
};
function vc(e) {
  e.categoryMask = void 0, e.confidenceMasks = void 0, e.qualityScores = void 0;
}
function _c(e) {
  try {
    const t = new yo(e.confidenceMasks, e.categoryMask, e.qualityScores);
    if (!e.j) return t;
    e.j(t);
  } finally {
    ln(e);
  }
}
yo.prototype.close = yo.prototype.close;
var Se = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect", !1), this.s = [], this.outputCategoryMask = !1, this.outputConfidenceMasks = !0, this.h = new bs(), this.v = new Bl(), A(this.h, 0, 3, this.v), A(e = this.h, 0, 1, t = new Y());
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return e.displayNamesLocale !== void 0 ? V(this.h, 2, wr(e.displayNamesLocale)) : "displayNamesLocale" in e && V(this.h, 2), "outputCategoryMask" in e && (this.outputCategoryMask = e.outputCategoryMask ?? !1), "outputConfidenceMasks" in e && (this.outputConfidenceMasks = e.outputConfidenceMasks ?? !0), super.l(e);
  }
  J() {
    (function(e) {
      const t = gt(e.ca(), ke, 1).filter((r) => (qe(r, 1) ?? "").includes("mediapipe.tasks.TensorsToSegmentationCalculator"));
      if (e.s = [], t.length > 1) throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");
      t.length === 1 && (R(t[0], Ue, 7)?.l()?.g() ?? /* @__PURE__ */ new Map()).forEach((r, i) => {
        e.s[Number(i)] = qe(r, 1) ?? "";
      });
    })(this);
  }
  segment(e, t, r) {
    const i = typeof t != "function" ? t : {};
    return this.j = typeof t == "function" ? t : r, vc(this), Ze(this, e, i), _c(this);
  }
  Ia(e, t, r, i) {
    const n = typeof r != "function" ? r : {};
    return this.j = typeof r == "function" ? r : i, vc(this), ct(this, e, n, t), _c(this);
  }
  Ba() {
    return this.s;
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect");
    const t = new Ue();
    Ke(t, jl, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect"), r.o(t), je(e, r), cn(this, e), this.outputConfidenceMasks && (O(e, "confidence_masks"), I(r, "CONFIDENCE_MASKS:confidence_masks"), dr(this, "confidence_masks"), this.g.ba("confidence_masks", (i, n) => {
      this.confidenceMasks = i.map((o) => mr(this, o, !0, !this.j)), v(this, n);
    }), this.g.attachEmptyPacketListener("confidence_masks", (i) => {
      this.confidenceMasks = [], v(this, i);
    })), this.outputCategoryMask && (O(e, "category_mask"), I(r, "CATEGORY_MASK:category_mask"), dr(this, "category_mask"), this.g.V("category_mask", (i, n) => {
      this.categoryMask = mr(this, i, !1, !this.j), v(this, n);
    }), this.g.attachEmptyPacketListener("category_mask", (i) => {
      this.categoryMask = void 0, v(this, i);
    })), O(e, "quality_scores"), I(r, "QUALITY_SCORES:quality_scores"), this.g.attachFloatVectorListener("quality_scores", (i, n) => {
      this.qualityScores = i, v(this, n);
    }), this.g.attachEmptyPacketListener("quality_scores", (i) => {
      this.categoryMask = void 0, v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
Se.prototype.getLabels = Se.prototype.Ba, Se.prototype.segmentForVideo = Se.prototype.Ia, Se.prototype.segment = Se.prototype.segment, Se.prototype.setOptions = Se.prototype.o, Se.createFromModelPath = function(e, t) {
  return M(Se, e, { baseOptions: { modelAssetPath: t } });
}, Se.createFromModelBuffer = function(e, t) {
  return M(Se, e, { baseOptions: { modelAssetBuffer: t } });
}, Se.createFromOptions = function(e, t) {
  return M(Se, e, t);
};
var bo = class {
  constructor(e, t, r) {
    this.confidenceMasks = e, this.categoryMask = t, this.qualityScores = r;
  }
  close() {
    this.confidenceMasks?.forEach((e) => {
      e.close();
    }), this.categoryMask?.close();
  }
};
bo.prototype.close = bo.prototype.close;
var Mh = class extends b {
  constructor(e) {
    super(e);
  }
}, Jt = [0, re, -2], Mi = [0, ut, -3, Z, ut, -1], yc = [0, Mi], bc = [0, Mi, re, -1], Xn = class extends b {
  constructor(e) {
    super(e);
  }
}, wc = [0, ut, -1, Z], Ih = class extends b {
  constructor(e) {
    super(e);
  }
}, Ec = class extends b {
  constructor(e) {
    super(e);
  }
}, wo = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 14, 15], n1 = class extends b {
  constructor(e) {
    super(e);
  }
};
n1.prototype.g = nn([0, pe, [0, wo, P, Mi, P, [0, Mi, Jt], P, yc, P, [0, yc, Jt], P, wc, P, [0, ut, -3, Z, De], P, [0, ut, -3, Z], P, [0, D, ut, -2, Z, re, Z, -1, 2, ut, Jt], P, bc, P, [0, bc, Jt], ut, Jt, D, P, [0, ut, -3, Z, Jt, -1], P, [0, pe, wc]], D, [0, D, re, -1, Z]]);
var it = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect_in", !1), this.outputCategoryMask = !1, this.outputConfidenceMasks = !0, this.h = new bs(), this.s = new Bl(), A(this.h, 0, 3, this.s), A(e = this.h, 0, 1, t = new Y());
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return "outputCategoryMask" in e && (this.outputCategoryMask = e.outputCategoryMask ?? !1), "outputConfidenceMasks" in e && (this.outputConfidenceMasks = e.outputConfidenceMasks ?? !0), super.l(e);
  }
  segment(e, t, r, i) {
    const n = typeof r != "function" ? r : {};
    this.j = typeof r == "function" ? r : i, this.qualityScores = this.categoryMask = this.confidenceMasks = void 0, r = this.B + 1, i = new n1();
    const o = new Ec();
    var s = new Mh();
    if (at(s, 1, 255), A(o, 0, 12, s), t.keypoint && t.scribble) throw Error("Cannot provide both keypoint and scribble.");
    if (t.keypoint) {
      var a = new Xn();
      qr(a, 3, !0), w(a, 1, t.keypoint.x), w(a, 2, t.keypoint.y), Ur(o, 5, wo, a);
    } else {
      if (!t.scribble) throw Error("Must provide either a keypoint or a scribble.");
      for (a of (s = new Ih(), t.scribble)) qr(t = new Xn(), 3, !0), w(t, 1, a.x), w(t, 2, a.y), xi(s, 1, Xn, t);
      Ur(o, 15, wo, s);
    }
    xi(i, 1, Ec, o), this.g.addProtoToStream(i.g(), "drishti.RenderData", "roi_in", r), Ze(this, e, n);
    e: {
      try {
        const l = new bo(this.confidenceMasks, this.categoryMask, this.qualityScores);
        if (!this.j) {
          var c = l;
          break e;
        }
        this.j(l);
      } finally {
        ln(this);
      }
      c = void 0;
    }
    return c;
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "roi_in"), q(e, "norm_rect_in");
    const t = new Ue();
    Ke(t, jl, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"), W(r, "IMAGE:image_in"), W(r, "ROI:roi_in"), W(r, "NORM_RECT:norm_rect_in"), r.o(t), je(e, r), cn(this, e), this.outputConfidenceMasks && (O(e, "confidence_masks"), I(r, "CONFIDENCE_MASKS:confidence_masks"), dr(this, "confidence_masks"), this.g.ba("confidence_masks", (i, n) => {
      this.confidenceMasks = i.map((o) => mr(this, o, !0, !this.j)), v(this, n);
    }), this.g.attachEmptyPacketListener("confidence_masks", (i) => {
      this.confidenceMasks = [], v(this, i);
    })), this.outputCategoryMask && (O(e, "category_mask"), I(r, "CATEGORY_MASK:category_mask"), dr(this, "category_mask"), this.g.V("category_mask", (i, n) => {
      this.categoryMask = mr(this, i, !1, !this.j), v(this, n);
    }), this.g.attachEmptyPacketListener("category_mask", (i) => {
      this.categoryMask = void 0, v(this, i);
    })), O(e, "quality_scores"), I(r, "QUALITY_SCORES:quality_scores"), this.g.attachFloatVectorListener("quality_scores", (i, n) => {
      this.qualityScores = i, v(this, n);
    }), this.g.attachEmptyPacketListener("quality_scores", (i) => {
      this.categoryMask = void 0, v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
it.prototype.segment = it.prototype.segment, it.prototype.setOptions = it.prototype.o, it.createFromModelPath = function(e, t) {
  return M(it, e, { baseOptions: { modelAssetPath: t } });
}, it.createFromModelBuffer = function(e, t) {
  return M(it, e, { baseOptions: { modelAssetBuffer: t } });
}, it.createFromOptions = function(e, t) {
  return M(it, e, t);
};
var Ve = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "input_frame_gpu", "norm_rect", !1), this.j = { detections: [] }, A(e = this.h = new Hl(), 0, 1, t = new Y());
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return e.displayNamesLocale !== void 0 ? V(this.h, 2, wr(e.displayNamesLocale)) : "displayNamesLocale" in e && V(this.h, 2), e.maxResults !== void 0 ? at(this.h, 3, e.maxResults) : "maxResults" in e && V(this.h, 3), e.scoreThreshold !== void 0 ? w(this.h, 4, e.scoreThreshold) : "scoreThreshold" in e && V(this.h, 4), e.categoryAllowlist !== void 0 ? Ti(this.h, 5, e.categoryAllowlist) : "categoryAllowlist" in e && V(this.h, 5), e.categoryDenylist !== void 0 ? Ti(this.h, 6, e.categoryDenylist) : "categoryDenylist" in e && V(this.h, 6), this.l(e);
  }
  D(e, t) {
    return this.j = { detections: [] }, Ze(this, e, t), this.j;
  }
  F(e, t, r) {
    return this.j = { detections: [] }, ct(this, e, r, t), this.j;
  }
  m() {
    var e = new Ie();
    q(e, "input_frame_gpu"), q(e, "norm_rect"), O(e, "detections");
    const t = new Ue();
    Ke(t, wh, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.ObjectDetectorGraph"), W(r, "IMAGE:input_frame_gpu"), W(r, "NORM_RECT:norm_rect"), I(r, "DETECTIONS:detections"), r.o(t), je(e, r), this.g.attachProtoVectorListener("detections", (i, n) => {
      for (const o of i) i = _l(o), this.j.detections.push(Vl(i));
      v(this, n);
    }), this.g.attachEmptyPacketListener("detections", (i) => {
      v(this, i);
    }), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
Ve.prototype.detectForVideo = Ve.prototype.F, Ve.prototype.detect = Ve.prototype.D, Ve.prototype.setOptions = Ve.prototype.o, Ve.createFromModelPath = async function(e, t) {
  return M(Ve, e, { baseOptions: { modelAssetPath: t } });
}, Ve.createFromModelBuffer = function(e, t) {
  return M(Ve, e, { baseOptions: { modelAssetBuffer: t } });
}, Ve.createFromOptions = function(e, t) {
  return M(Ve, e, t);
};
var Eo = class {
  constructor(e, t, r) {
    this.landmarks = e, this.worldLandmarks = t, this.segmentationMasks = r;
  }
  close() {
    this.segmentationMasks?.forEach((e) => {
      e.close();
    });
  }
};
function Cc(e) {
  e.landmarks = [], e.worldLandmarks = [], e.segmentationMasks = void 0;
}
function kc(e) {
  try {
    const t = new Eo(e.landmarks, e.worldLandmarks, e.segmentationMasks);
    if (!e.s) return t;
    e.s(t);
  } finally {
    ln(e);
  }
}
Eo.prototype.close = Eo.prototype.close;
var Ne = class extends Me {
  constructor(e, t) {
    super(new Xe(e, t), "image_in", "norm_rect", !1), this.landmarks = [], this.worldLandmarks = [], this.outputSegmentationMasks = !1, A(e = this.h = new Gl(), 0, 1, t = new Y()), this.v = new Pl(), A(this.h, 0, 3, this.v), this.j = new Ol(), A(this.h, 0, 2, this.j), at(this.j, 4, 1), w(this.j, 2, 0.5), w(this.v, 2, 0.5), w(this.h, 4, 0.5);
  }
  get baseOptions() {
    return R(this.h, Y, 1);
  }
  set baseOptions(e) {
    A(this.h, 0, 1, e);
  }
  o(e) {
    return "numPoses" in e && at(this.j, 4, e.numPoses ?? 1), "minPoseDetectionConfidence" in e && w(this.j, 2, e.minPoseDetectionConfidence ?? 0.5), "minTrackingConfidence" in e && w(this.h, 4, e.minTrackingConfidence ?? 0.5), "minPosePresenceConfidence" in e && w(this.v, 2, e.minPosePresenceConfidence ?? 0.5), "outputSegmentationMasks" in e && (this.outputSegmentationMasks = e.outputSegmentationMasks ?? !1), this.l(e);
  }
  D(e, t, r) {
    const i = typeof t != "function" ? t : {};
    return this.s = typeof t == "function" ? t : r, Cc(this), Ze(this, e, i), kc(this);
  }
  F(e, t, r, i) {
    const n = typeof r != "function" ? r : {};
    return this.s = typeof r == "function" ? r : i, Cc(this), ct(this, e, n, t), kc(this);
  }
  m() {
    var e = new Ie();
    q(e, "image_in"), q(e, "norm_rect"), O(e, "normalized_landmarks"), O(e, "world_landmarks"), O(e, "segmentation_masks");
    const t = new Ue();
    Ke(t, Eh, this.h);
    const r = new ke();
    $e(r, "mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"), W(r, "IMAGE:image_in"), W(r, "NORM_RECT:norm_rect"), I(r, "NORM_LANDMARKS:normalized_landmarks"), I(r, "WORLD_LANDMARKS:world_landmarks"), r.o(t), je(e, r), cn(this, e), this.g.attachProtoVectorListener("normalized_landmarks", (i, n) => {
      this.landmarks = [];
      for (const o of i) i = ti(o), this.landmarks.push(an(i));
      v(this, n);
    }), this.g.attachEmptyPacketListener("normalized_landmarks", (i) => {
      this.landmarks = [], v(this, i);
    }), this.g.attachProtoVectorListener("world_landmarks", (i, n) => {
      this.worldLandmarks = [];
      for (const o of i) i = ir(o), this.worldLandmarks.push($r(i));
      v(this, n);
    }), this.g.attachEmptyPacketListener("world_landmarks", (i) => {
      this.worldLandmarks = [], v(this, i);
    }), this.outputSegmentationMasks && (I(r, "SEGMENTATION_MASK:segmentation_masks"), dr(this, "segmentation_masks"), this.g.ba("segmentation_masks", (i, n) => {
      this.segmentationMasks = i.map((o) => mr(this, o, !0, !this.s)), v(this, n);
    }), this.g.attachEmptyPacketListener("segmentation_masks", (i) => {
      this.segmentationMasks = [], v(this, i);
    })), e = e.g(), this.setGraph(new Uint8Array(e), !0);
  }
};
Ne.prototype.detectForVideo = Ne.prototype.F, Ne.prototype.detect = Ne.prototype.D, Ne.prototype.setOptions = Ne.prototype.o, Ne.createFromModelPath = function(e, t) {
  return M(Ne, e, { baseOptions: { modelAssetPath: t } });
}, Ne.createFromModelBuffer = function(e, t) {
  return M(Ne, e, { baseOptions: { modelAssetBuffer: t } });
}, Ne.createFromOptions = function(e, t) {
  return M(Ne, e, t);
}, Ne.POSE_CONNECTIONS = i1;
const Fh = (e) => {
  if (!e || e.length === 0) return 0;
  const t = e[0];
  if (!t || t.length === 0) return 0;
  let r = 1, i = 0, n = 1, o = 0;
  t.forEach((l) => {
    l && typeof l.x == "number" && typeof l.y == "number" && (r = Math.min(r, l.x), i = Math.max(i, l.x), n = Math.min(n, l.y), o = Math.max(o, l.y));
  });
  const s = i - r, a = o - n;
  return Math.max(s, a);
}, Rh = (e, t) => {
  if (!e || e.length === 0) return !1;
  const r = e[0];
  let i = 1, n = 0, o = 1, s = 0;
  r.forEach((K) => {
    i = Math.min(i, K.x), n = Math.max(n, K.x), o = Math.min(o, K.y), s = Math.max(s, K.y);
  });
  const a = 0.5, c = 0.6, l = t > 1;
  let h, u;
  l ? (h = 0.4, u = 0.3) : (h = 0.35, u = 0.5);
  const d = (i + n) / 2, f = (o + s) / 2, m = 0.2, y = h * (1 + m), p = u * (1 + m), g = ((K, B) => {
    const ie = (K - a) / y, ne = (B - c) / p;
    return ie * ie + ne * ne <= 1;
  })(d, f), x = 0.2, T = 0.1, S = h * (1 + x), k = u * (1 + T), F = (K, B) => {
    const ie = (K - a) / S, ne = (B - c) / k;
    return ie * ie + ne * ne <= 1;
  }, $ = F(i, o), j = F(n, o), we = F(i, s), Q = F(n, s);
  return g && $ && j && we && Q;
}, Oh = (e) => {
  if (!e || e.length === 0) return 0;
  const t = e[0];
  if (!t || t.length === 0) return 0;
  const r = t[13], i = t[14];
  if (!r || !i) return 0;
  const n = Math.abs(i.y - r.y), o = Math.min(...t.map((c) => c.y)), a = Math.max(...t.map((c) => c.y)) - o;
  return a > 0 ? n / a : 0;
}, Ph = (e) => {
  const t = document.createElement("canvas"), r = t.getContext("2d");
  if (!r) return null;
  const i = e.videoWidth, n = e.videoHeight, o = Math.min(i, n), s = (i - o) / 2, a = (n - o) / 2;
  return t.width = o, t.height = o, r.drawImage(
    e,
    s,
    a,
    o,
    o,
    0,
    0,
    o,
    o
  ), t;
}, Ac = (e, t, r, i) => {
  const n = e.getContext("2d");
  if (!n) return;
  const o = e.width, s = e.height;
  n.clearRect(0, 0, o, s);
  const a = new Ee(n);
  t.forEach((c) => {
    if (!c || c.length === 0) return;
    const l = "rgba(162, 155, 254,0.4)", h = 2;
    n.strokeStyle = "rgba(255, 255, 255, 0.6)", n.lineWidth = h, n.lineCap = "round", n.lineJoin = "round", a.drawLandmarks(c, {
      color: "rgba(9, 132, 227,0.7)",
      lineWidth: 0.5,
      radius: 0.5
    }), a.drawConnectors(
      c,
      z.FACE_LANDMARKS_FACE_OVAL,
      {
        color: l,
        lineWidth: h
      }
    ), r > 0 && r >= i && a.drawConnectors(
      c,
      z.FACE_LANDMARKS_LIPS,
      {
        color: l,
        lineWidth: h
      }
    );
  });
}, xc = (e) => {
  const t = e.getContext("2d");
  t && t.clearRect(0, 0, e.width, e.height);
}, Nh = (e, t = !1) => {
  const r = document.createElement("canvas"), i = r.getContext("2d");
  if (!i) return null;
  const n = e.videoHeight > e.videoWidth;
  t ? n ? (r.width = 480, r.height = Math.max(
    640,
    r.width * e.videoHeight / e.videoWidth
  )) : (r.width = 640, r.height = Math.max(
    480,
    r.width * e.videoHeight / e.videoWidth
  )) : n ? (r.width = 240, r.height = Math.max(
    320,
    r.width * e.videoHeight / e.videoWidth
  )) : (r.width = 320, r.height = Math.max(
    240,
    r.width * e.videoHeight / e.videoWidth
  ));
  const o = 1, s = e.videoWidth * o, a = e.videoHeight * o, c = (s - e.videoWidth) / 2, l = (a - e.videoHeight) / 2;
  return i.drawImage(
    e,
    -c,
    -l - 0,
    s,
    a,
    0,
    0,
    r.width,
    r.height
  ), r.toDataURL("image/jpeg");
}, Tc = {
  /** LIVENESS_IMAGE_BASE64 Base64 encoded liveness image (.jpg or .png) */
  LIVENESS_IMAGE_BASE64: 6,
  /** SELFIE_IMAGE_BASE64 Base64 encoded selfie image (.png or .jpg) */
  SELFIE_IMAGE_BASE64: 2
}, Sc = {
  "multiple-faces": "Ensure only one face is visible",
  "no-face": "Position your face in the oval",
  "out-of-bounds": "Position your face in the oval",
  "too-close": "Move farther away",
  "too-far": "Move closer",
  "neutral-expression": "Neutral expression",
  "smile-required": "Smile!",
  "open-mouth-smile": "Wider smile - teeth visible",
  initializing: "Initializing..."
}, Dh = ["sm-s936", "sm-s931", "sm-s938"], Uh = async () => {
  if (typeof navigator < "u" && navigator.userAgentData)
    try {
      const { model: e } = await navigator.userAgentData.getHighEntropyValues([
        "model"
      ]);
      if (!e)
        return !1;
      const t = e.toLowerCase();
      return Dh.some((r) => t.includes(r));
    } catch (e) {
      return console.warn(
        "UA-CH model fetch failed, falling back to UA string check.",
        e
      ), !1;
    }
  return !1;
}, Bh = () => {
  const e = document.createElement("canvas"), t = e.getContext("webgl") || e.getContext("experimental-webgl");
  if (!t) return !1;
  const r = t.getExtension("OES_texture_half_float"), i = t.getExtension(
    "OES_texture_half_float_linear"
  ), n = t.getExtension(
    "EXT_color_buffer_half_float"
  );
  return !!(r && n && i);
}, o1 = async () => {
  window.__smileIdentityMediapipe || (window.__smileIdentityMediapipe = {
    instance: null,
    loading: null,
    loaded: !1
  });
  const e = window.__smileIdentityMediapipe;
  return e.loaded && e.instance ? e.instance : (e.loading || (e.loading = (async () => {
    try {
      const t = await Dt.forVisionTasks(
        "https://web-models.smileidentity.com/mediapipe-tasks-vision-wasm"
      ), r = await Uh(), i = await z.createFromOptions(t, {
        baseOptions: {
          modelAssetPath: "https://web-models.smileidentity.com/face_landmarker/face_landmarker.task",
          delegate: r || !Bh() ? "CPU" : "GPU"
        },
        outputFaceBlendshapes: !0,
        runningMode: "VIDEO",
        numFaces: 2
      });
      return e.instance = i, e.loaded = !0, e.loading = null, i;
    } catch (t) {
      throw e.loading = null, t;
    }
  })()), e.loading);
}, Fr = ko.version, $h = ({
  videoRef: e,
  canvasRef: t,
  interval: r,
  duration: i,
  smileThreshold: n,
  mouthOpenThreshold: o,
  minFaceSize: s,
  maxFaceSize: a,
  smileCooldown: c,
  getFacingMode: l
}) => {
  const h = be(null), u = be(null), d = be(null), f = be(null), m = ee(!1), y = ee(!1), p = ee("good"), _ = ee(!1), g = ee(16 / 9), x = ee([]), T = ee(0), S = ee(0), k = ee(0), F = ee(0), $ = ee(""), j = ee(!0), we = ee(!1), Q = ee(!1), K = ee(0), B = ee([]), ie = ee(null), ne = ee(1), _e = ee(0), Fs = ee(!1), Xt = yn(
    () => Math.floor(ne.value * 0.4)
  ), Rs = yn(() => Math.floor(ne.value * 0.2)), s1 = yn(
    () => m.value && y.value && p.value === "good" && !_.value
  ), dn = (H) => {
    H && Sc[H] ? $.value = Sc[H] : $.value = "";
  }, Fe = be(
    l2((H) => {
      dn(H);
    }, 600)
  ).current, a1 = async () => {
    try {
      window.__smileIdentityMediapipe?.loaded && window.__smileIdentityMediapipe?.instance || (j.value = !0, dn("initializing")), h.current = await o1(), j.value = !1;
    } catch (H) {
      console.error("Failed to initialize MediaPipe:", H), j.value = !1;
    }
  }, c1 = () => {
    if (e.current && t.current) {
      const { videoWidth: H, videoHeight: Te } = e.current;
      g.value = H / Te, t.current.width = H, t.current.height = Te, e.current.parentElement && (t.current.style.left = "50%", t.current.style.top = "50%");
    }
  }, l1 = () => {
    const H = _e.value < Rs.value, Te = _e.value >= Xt.value;
    H ? $.value = "Capturing..." : Te ? Date.now() - F.value > c ? T.value >= n && k.value < o ? Fe("open-mouth-smile") : Fe("smile-required") : $.value = "Keep smiling!" : Fe(null);
  }, u1 = () => {
    j.value ? dn("initializing") : _.value ? Fe("multiple-faces") : m.value ? p.value === "too-close" ? Fe("too-close") : p.value === "too-far" ? Fe("too-far") : y.value ? we.value ? l1() : $.value = "Ready to capture" : Fe("out-of-bounds") : Fe("no-face");
  }, fn = () => {
    u.current && (cancelAnimationFrame(u.current), u.current = null);
  }, pn = async () => {
    if (!h.current || !e.current) {
      fn();
      return;
    }
    if (e.current.videoWidth <= 0 || e.current.videoHeight <= 0 || e.current.readyState < 2) {
      u.current = requestAnimationFrame(pn);
      return;
    }
    try {
      j.value && (j.value = !1);
      const H = Ph(e.current), Te = H || e.current, ge = h.current.detectForVideo(
        Te,
        performance.now()
      );
      if (x.value = ge.faceLandmarks || [], ge.faceLandmarks && t.current && e.current)
        if (H) {
          const yt = e.current.videoWidth, Pt = e.current.videoHeight, Zt = Math.min(yt, Pt), mn = (yt - Zt) / (2 * yt), oi = (Pt - Zt) / (2 * Pt), si = Zt / yt, Yt = Zt / Pt, f1 = ge.faceLandmarks.map(
            (p1) => p1.map((gn) => ({
              x: gn.x * si + mn,
              y: gn.y * Yt + oi,
              z: gn.z
            }))
          );
          Ac(
            t.current,
            f1,
            _e.value,
            Xt.value
          );
        } else
          Ac(
            t.current,
            ge.faceLandmarks,
            _e.value,
            Xt.value
          );
      else t.current && xc(t.current);
      const ni = ge.faceLandmarks ? ge.faceLandmarks.length : 0;
      _.value = ni > 1;
      const Ns = ge.faceBlendshapes && ge.faceBlendshapes.length > 0 && ni === 1;
      if (m.value = Ns, Ns && ge.faceLandmarks) {
        const yt = Fh(ge.faceLandmarks);
        S.value = yt, yt > a ? p.value = "too-close" : yt < s ? p.value = "too-far" : p.value = "good", y.value = Rh(
          ge.faceLandmarks,
          g.value
        );
        const Pt = ge.faceBlendshapes[0].categories, Zt = Pt.find((Yt) => Yt.categoryName === "mouthSmileLeft")?.score || 0, mn = Pt.find((Yt) => Yt.categoryName === "mouthSmileRight")?.score || 0, oi = Oh(ge.faceLandmarks), si = (Zt + mn) / 2;
        T.value = si, k.value = oi, si >= n && oi >= o && (F.value = Date.now(), Q.value && we.value && f.current && setTimeout(() => {
          Date.now() - F.value <= 100 && Q.value && we.value && f.current && f.current();
        }, 0));
      } else
        T.value = 0, S.value = 0, k.value = 0, y.value = !1, p.value = "good";
      u1();
    } catch {
      m.value = !1, y.value = !1, _.value = !1, p.value = "good", k.value = 0, we.value && Fe("no-face");
    }
    u.current = requestAnimationFrame(pn);
  }, h1 = () => {
    u.current && cancelAnimationFrame(u.current), u.current = requestAnimationFrame(pn);
  }, d1 = () => {
    if (!e.current) return;
    const H = _e.value === ne.value - 1, Te = Nh(e.current, H);
    Te && (H ? ie.value = Te : B.value = [...B.value, Te], _e.value++, K.value = ne.value - _e.value);
  }, ii = () => {
    if (d.current && (clearInterval(d.current), d.current = null), we.value = !1, Q.value = !1, _e.value >= ne.value && ie.value) {
      const H = B.value.map((ni) => ({
        image: ni.split(",")[1],
        image_type_id: Tc.LIVENESS_IMAGE_BASE64
      })), Te = {
        image: ie.value.split(",")[1],
        image_type_id: Tc.SELFIE_IMAGE_BASE64
      }, ge = {
        images: [...H, Te],
        referenceImage: ie.value,
        previewImage: ie.value,
        facingMode: l(),
        meta: { libraryVersion: Fr }
      };
      window.dispatchEvent(
        new CustomEvent("selfie-capture.publish", {
          detail: ge
        })
      ), Fs.value = !0;
    }
  }, Sr = () => {
    d.current && (clearInterval(d.current), d.current = null), Q.value = !0, !_.value && m.value && y.value && p.value === "good" && Fe("smile-required");
  }, Os = () => {
    d.current && clearInterval(d.current), d.current = setInterval(() => {
      if (_e.value >= ne.value) {
        ii();
        return;
      }
      if (_.value) {
        Sr();
        return;
      }
      if (!m.value)
        return;
      if (!y.value) {
        Sr();
        return;
      }
      if (p.value !== "good") {
        Sr();
        return;
      }
      if (_e.value >= Xt.value && Date.now() - F.value > c) {
        Sr();
        return;
      }
      d1();
    }, r);
  }, Ps = () => {
    if (m.value && p.value === "good" && y.value && !_.value) {
      if (_e.value >= Xt.value && Date.now() - F.value > c)
        return;
      Q.value = !1, Fe(null), Os();
    }
  };
  return f.current = Ps, {
    faceDetected: m,
    faceInBounds: y,
    faceProximity: p,
    multipleFaces: _,
    videoAspectRatio: g,
    faceLandmarks: x,
    currentSmileScore: T,
    currentFaceSize: S,
    currentMouthOpen: k,
    lastSmileTime: F,
    alertTitle: $,
    isInitializing: j,
    isReadyToCapture: s1,
    isCapturing: we,
    isPaused: Q,
    countdown: K,
    capturedImages: B,
    referencePhoto: ie,
    totalCaptures: ne,
    capturesTaken: _e,
    hasFinishedCapture: Fs,
    smileCheckpoint: Xt,
    neutralZone: Rs,
    initializeFaceLandmarker: a1,
    setupCanvas: c1,
    startDetectionLoop: h1,
    stopDetectionLoop: fn,
    updateAlert: Fe,
    startCapture: async () => {
      B.value = [], we.value = !0, Q.value = !1, ne.value = Math.ceil(i / r), _e.value = 0, K.value = ne.value;
      const H = document.querySelector("smart-camera-web");
      H?.dispatchEvent(
        new CustomEvent("metadata.selfie-capture-start")
      ), H?.dispatchEvent(
        new CustomEvent("metadata.selfie-origin", {
          detail: {
            imageOrigin: {
              environment: "back_camera",
              user: "front_camera"
            }[l()]
          }
        })
      ), Os();
    },
    stopCapture: ii,
    pauseCapture: Sr,
    resumeCapture: Ps,
    handleCancel: () => {
      ii(), window.dispatchEvent(
        new CustomEvent("selfie-capture.cancelled", {
          detail: { meta: { libraryVersion: Fr } }
        })
      ), window.dispatchEvent(
        new CustomEvent("selfie-capture-screens.cancelled", {
          detail: { meta: { libraryVersion: Fr } }
        })
      );
    },
    handleClose: () => {
      ii(), window.dispatchEvent(
        new CustomEvent("selfie-capture.close", {
          detail: { meta: { libraryVersion: Fr } }
        })
      ), window.dispatchEvent(
        new CustomEvent("selfie-capture-screens.close", {
          detail: { meta: { libraryVersion: Fr } }
        })
      );
    },
    cleanup: () => {
      d.current && clearInterval(d.current), fn(), Fe.cancel();
    },
    resetFaceDetectionState: () => {
      m.value = !1, y.value = !1, p.value = "good", _.value = !1, x.value = [], T.value = 0, S.value = 0, k.value = 0, F.value = 0, t.current && xc(t.current);
    }
  };
}, jh = ({
  progress: e,
  duration: t = 1e3,
  themeColor: r = "#001096"
}) => {
  const i = be(null), n = be(e);
  return Ye(() => {
    const o = i.current;
    if (!o) return;
    const s = o.getTotalLength();
    o.style.opacity = e > 0 ? "1" : "0";
    const a = s * (1 - n.current), c = s * (1 - e);
    a !== c && (o.style.transition = "none", o.style.strokeDasharray = `${s} ${s}`, o.style.strokeDashoffset = `${a}`, o.getBoundingClientRect(), o.style.transition = `stroke-dashoffset ${t}ms ease-out`, o.style.strokeDashoffset = `${c}`, n.current = e);
  }, [e, t]), /* @__PURE__ */ L(
    "div",
    {
      style: {
        position: "absolute",
        top: "0",
        left: "0",
        width: "100%",
        height: "100%",
        pointerEvents: "none"
      },
      children: /* @__PURE__ */ L(
        "svg",
        {
          viewBox: "0 0 285 380",
          preserveAspectRatio: "xMidYMid meet",
          style: { width: "100%", height: "100%" },
          children: [
            /* @__PURE__ */ L("clipPath", { id: "selfie-clip-path", clipPathUnits: "objectBoundingBox", children: /* @__PURE__ */ L("path", { d: "M0.085 0.382 C0.087 0.357 0.092 0.294 0.131 0.236 C0.200 0.133 0.340 0.063 0.501 0.063 C0.730 0.063 0.915 0.205 0.915 0.382 C0.915 0.424 0.899 0.513 0.891 0.549 C0.882 0.588 0.871 0.626 0.857 0.664 C0.792 0.825 0.639 0.937 0.501 0.937 C0.314 0.937 0.182 0.755 0.144 0.666 C0.126 0.624 0.110 0.557 0.107 0.547 C0.092 0.485 0.081 0.439 0.085 0.382 Z" }) }),
            /* @__PURE__ */ L(
              "path",
              {
                d: "M142.693 24C208.319 24 261 77.97 261 145.008C261 160.97 256.319 194.788 254.129 208.356C251.64 223.188 248.348 237.875 244.27 252.35C225.747 313.203 182.328 356 142.693 356C89.414 356 51.871 286.667 41.016 252.948C35.937 236.987 31.356 211.748 30.559 207.857C26.277 184.114 22.991 166.556 24.285 145.008C24.883 135.631 26.277 111.789 37.431 89.742C57.049 50.636 96.983 24 142.693 24Z",
                stroke: r,
                fill: "none",
                style: { strokeWidth: "8" }
              }
            ),
            /* @__PURE__ */ L(
              "path",
              {
                ref: i,
                d: "M142.693 24C208.319 24 261 77.97 261 145.008C261 160.97 256.319 194.788 254.129 208.356C251.64 223.188 248.348 237.875 244.27 252.35C225.747 313.203 182.328 356 142.693 356C89.414 356 51.871 286.667 41.016 252.948C35.937 236.987 31.356 211.748 30.559 207.857C26.277 184.114 22.991 166.556 24.285 145.008C24.883 135.631 26.277 111.789 37.431 89.742C57.049 50.636 96.983 24 142.693 24Z",
                stroke: "#22c55e",
                style: { strokeWidth: "8" },
                fill: "none",
                strokeLinecap: "round"
              }
            )
          ]
        }
      )
    }
  );
}, Hh = ({
  videoRef: e,
  canvasRef: t,
  facingMode: r,
  multipleFaces: i,
  progress: n,
  interval: o,
  themeColor: s
}) => /* @__PURE__ */ L(It, { children: [
  /* @__PURE__ */ L("div", { className: "camera-preview-container", children: [
    /* @__PURE__ */ L(
      "div",
      {
        className: "video-wrapper",
        style: {
          clipPath: i ? "none" : "url(#selfie-clip-path)"
        },
        children: /* @__PURE__ */ L("div", { className: "video-container", children: [
          /* @__PURE__ */ L(
            "video",
            {
              ref: e,
              autoPlay: !0,
              playsInline: !0,
              muted: !0,
              className: `camera-video ${r === "user" ? "mirror" : ""}`
            }
          ),
          /* @__PURE__ */ L(
            "canvas",
            {
              ref: t,
              className: `camera-canvas ${r === "user" ? "mirror" : ""}`
            }
          )
        ] })
      }
    ),
    !i && /* @__PURE__ */ L(
      jh,
      {
        progress: n,
        duration: o,
        themeColor: s
      }
    )
  ] }),
  /* @__PURE__ */ L("style", { children: `
      .camera-preview-container {
        position: relative;
        width: 100%;
        max-width: 300px;
        margin: 0 auto;
      }

      .video-wrapper {
        width: 100%;
        max-width: 300px;
        margin: 0 auto;
        position: relative;
        aspect-ratio: 3 / 4;
        overflow: hidden;
      }

      .video-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      .camera-video,
      .camera-canvas {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .camera-video.mirror,
      .camera-canvas.mirror {
        transform: translate(-50%, -50%) scaleX(-1);
      }

      .camera-canvas {
        pointer-events: none;
      }
    ` })
] }), Gh = ({
  alertTitle: e
}) => e ? /* @__PURE__ */ L(It, { children: [
  /* @__PURE__ */ L("div", { className: "alert-message", children: /* @__PURE__ */ L("div", { className: "alert-title", children: e }) }),
  /* @__PURE__ */ L("style", { children: `
        .alert-message {
          margin-top: 1.5rem;
          color: #000;
          color: #151F72;
          padding: 0.5rem 1.5rem;
          border-radius: 4px;
          text-align: start;
          width: 100%;
        }

        .alert-title {
          font-size: 16px;
          font-weight: bold;
          text-align: center;
        }
      ` })
] }) : null, Vh = ({
  isCapturing: e,
  hasFinishedCapture: t,
  isReadyToCapture: r,
  allowAgentMode: i,
  agentSupported: n,
  showAgentModeForTests: o,
  facingMode: s,
  themeColor: a = "#001096",
  onStartCapture: c,
  onSwitchCamera: l
}) => /* @__PURE__ */ L(It, { children: [
  /* @__PURE__ */ L("div", { className: "controls", children: [
    /* @__PURE__ */ L(
      "button",
      {
        id: "start-image-capture",
        class: "btn-primary",
        onClick: c,
        disabled: e || t || !r,
        children: "Start Capture"
      }
    ),
    i && (n || o) && /* @__PURE__ */ L(
      "button",
      {
        id: "switch-camera",
        onClick: l,
        className: "agent-mode-btn",
        disabled: e || t,
        children: s === "user" ? "Agent Mode Off" : "Agent Mode On"
      }
    )
  ] }),
  /* @__PURE__ */ L("style", { children: `
      .controls {
        margin: 1.5rem 0;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        justify-content: center;
        max-width: 356px;
        margin: 0 auto;
      }

      .agent-mode-btn {
        padding: 8px 16px;
        font-size: 14px;
        background: ${a};
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      .agent-mode-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
    ` })
] }), Co = ({
  interval: e = 350,
  duration: t = 2800,
  "theme-color": r = "#001096",
  "show-navigation": i = !1,
  "allow-agent-mode": n = !1,
  "show-agent-mode-for-tests": o = !1,
  "hide-attribution": s = !1
}) => {
  const a = be(null), c = be(null), l = Qt(i), h = Qt(n), u = Qt(o), d = Qt(s), f = 300, m = 0.25, y = 0.05, p = 0.35, _ = 0.5, g = h ? "environment" : "user", x = ru(g), T = ee(!1), S = be(
    l2((F) => {
      T.value = F;
    }, 100)
  ).current, k = $h({
    videoRef: x.videoRef,
    canvasRef: a,
    interval: e,
    duration: t,
    smileThreshold: m,
    mouthOpenThreshold: y,
    minFaceSize: p,
    maxFaceSize: _,
    smileCooldown: f,
    getFacingMode: () => x.facingMode
  });
  return Ye(() => {
    const F = async () => {
      await x.startCamera(g, ($) => {
        document.querySelector("smart-camera-web")?.dispatchEvent(
          new CustomEvent("metadata.camera-name", {
            detail: { cameraName: $ }
          })
        );
      }), await x.checkAgentSupport(), await k.initializeFaceLandmarker(), setTimeout(() => {
        k.setupCanvas(), k.startDetectionLoop();
      }, 500);
    };
    return x.registerCameraSwitchCallback(() => {
      try {
        k.resetFaceDetectionState(), k.setupCanvas(), k.stopDetectionLoop(), k.startDetectionLoop();
      } catch ($) {
        console.error("Error during camera switch callback:", $);
      }
    }), F(), () => {
      k.stopDetectionLoop(), x.stopCamera(), k.cleanup(), S.cancel();
    };
  }, []), Ye(() => {
    S(k.multipleFaces.value);
  }, [k.multipleFaces.value]), Ye(() => {
    const F = c.current;
    if (F && l) {
      const $ = () => {
        k.handleCancel();
      }, j = () => {
        k.handleClose();
      };
      return F.addEventListener("navigation.back", $), F.addEventListener("navigation.close", j), () => {
        F.removeEventListener("navigation.back", $), F.removeEventListener(
          "navigation.close",
          j
        );
      };
    }
  }, [l]), Ye(() => {
    k.hasFinishedCapture.value && document.querySelector("smart-camera-web")?.dispatchEvent(
      new CustomEvent("metadata.selfie-capture-end")
    );
  }, [k.hasFinishedCapture.value]), /* @__PURE__ */ L("div", { className: "smartselfie-capture", children: [
    l && // @ts-ignore
    /* @__PURE__ */ L("smileid-navigation", { ref: c, "theme-color": r }),
    /* @__PURE__ */ L(
      Hh,
      {
        videoRef: x.videoRef,
        canvasRef: a,
        facingMode: x.facingMode,
        multipleFaces: T.value,
        progress: k.capturesTaken.value > 0 ? k.capturesTaken.value / k.totalCaptures.value : 0,
        interval: e,
        themeColor: r
      }
    ),
    /* @__PURE__ */ L(Gh, { alertTitle: k.alertTitle.value }),
    !k.isCapturing.value && !k.hasFinishedCapture.value && /* @__PURE__ */ L(
      Vh,
      {
        isCapturing: k.isCapturing.value,
        hasFinishedCapture: k.hasFinishedCapture.value,
        isReadyToCapture: k.isReadyToCapture.value,
        allowAgentMode: h,
        agentSupported: x.agentSupported,
        showAgentModeForTests: u,
        facingMode: x.facingMode,
        themeColor: r,
        onStartCapture: k.startCapture,
        onSwitchCamera: x.switchCamera
      }
    ),
    !d && /* @__PURE__ */ L("powered-by-smile-id", {}),
    /* @__PURE__ */ L("style", { children: `
        * {
          box-sizing: border-box;
        }

        button {
          padding: 10px 20px;
          background: ${r || "#001096"};
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
        }

        button:disabled {
          background: #ccc;
          cursor: not-allowed;
        }

        button.btn-primary {
          background-color: ${r || "#001096"};
          border-radius: 2.5rem;
          color: white;
          border: none;
          height: 3.125rem;
          display: inline-block;
          padding: 0.75rem 1.5rem;
          text-align: center;
          font-size: 1.125rem;
          font-weight: 600;
          font-family: "DM Sans", sans-serif;
          cursor: pointer;
        }
        
        button.btn-primary:hover {
          background-color: #2d2b2a;
        }
          
        button.btn-primary:disabled {
          background-color: #666;
          cursor: not-allowed;
        }

        .smartselfie-capture {
          padding: 1rem;
          font-family: sans-serif;
        }
      ` })
  ] });
};
customElements.get("smartselfie-capture") || Zc(
  Co,
  "smartselfie-capture",
  [
    "interval",
    "duration",
    "theme-color",
    "show-navigation",
    "allow-agent-mode",
    "show-agent-mode-for-tests",
    "hide-attribution",
    "disable-image-tests"
  ],
  { shadow: !0 }
);
const Wh = ko.version, zh = 8;
function qh(e, t = 16) {
  const r = /* @__PURE__ */ new Set();
  for (let i = 0; i < Math.min(e.length, 1e4); i += 4)
    if (r.add(e[i] << 16 | e[i + 1] << 8 | e[i + 2]), r.size > t)
      return !0;
  return !1;
}
function Xh(e, t = zh) {
  const r = [];
  if (e < t)
    throw new Error(
      "SmartCameraWeb: Minimum required no of frames is ",
      t
    );
  const i = t - 1, n = Math.floor(e / i);
  let o = 1;
  for (let a = 0; a < e; a += n)
    r.length < 8 ? r.push(a) : (r[o] = a, r.sort((c, l) => c - l), o += 1);
  const s = e - 1;
  return r.length < 8 && !r.includes(s) && r.push(s), r;
}
function Zh() {
  return `
    ${Ii(this.themeColor)}
  <style>
  :host {
    --theme-color: ${this.themeColor || "#001096"};
    --color-active: #001096;
    --color-default: #2D2B2A;
    --color-disabled: #848282;
  }

  * {
    font-family: 'DM Sans', sans-serif;
  }

  [hidden] {
    display: none !important;
  }

  [disabled] {
    cursor: not-allowed !important;
    filter: grayscale(75%);
  }

  .visually-hidden {
    border: 0;
    clip: rect(1px 1px 1px 1px);
    clip: rect(1px, 1px, 1px, 1px);
    height: auto;
    margin: 0;
    overflow: hidden;
    padding: 0;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }

  img {
    height: auto;
    max-width: 100%;
    transform: scaleX(-1);
  }

  video {
    background-color: black;
  }

  a {
    color: currentColor;
    text-decoration: none;
  }

  svg {
    max-width: 100%;
  }

  .color-gray {
    color: #797979;
  }

  .color-red {
    color: red;
  }

  .color-richblue {
    color: #4E6577;
  }

  .color-richblue-shade {
    color: #0E1B42;
  }

  .color-digital-blue {
    color: #001096 !important;
  }

  .color-deep-blue {
    color: #001096;
  }

  .title-color {
    color: ${this.themeColor};
  }
  
  .theme-color {
    color: ${this.themeColor};
  }

  .center {
    text-align: center;
    margin-left: auto;
    margin-right: auto;
  }

  .font-size-small {
    font-size: .75rem;
  }

  .font-size-large {
    font-size: 1.5rem;
  }

  .text-transform-uppercase {
    text-transform: uppercase;
  }

  [id*=-"screen"] {
    min-block-size: 100%;
  }

  [data-variant~="full-width"] {
    inline-size: 100%;
  }

  .flow > * + * {
    margin-top: 1rem;
  }

  .button {
    --button-color: ${this.themeColor};
    -webkit-appearance: none;
    appearance: none;
    border-radius: 2.5rem;
    border: 0;
    background-color: transparent;
    color: #fff;
    cursor: pointer;
    display: block;
    font-size: 18px;
    font-weight: 600;
    padding: .75rem 1.5rem;
    text-align: center;
  }

  .button:hover,
  .button:focus,
  .button:active {
    --button-color: var(--color-default);
  }

  .button:disabled {
    --button-color: var(--color-disabled);
  }

  .button[data-variant~='solid'] {
    background-color: var(--button-color);
    border: 2px solid var(--button-color);
  }

  .button[data-variant~='outline'] {
    color: var(--button-color);
    border: 2px solid var(--button-color);
  }

  .button[data-variant~='ghost'] {
    padding: 0px;
    color: var(--button-color);
    background-color: transparent;
  }

  .icon-btn {
    appearance: none;
    background: none;
    border: none;
    color: hsl(0deg 0% 94%);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4px 8px;
  }
  .justify-right {
    justify-content: end !important;
  }
  .nav {
    display: flex;
    justify-content: space-between;
  }

  .back-wrapper {
    display: flex;
    align-items: center;
  }

  .back-button {
    display: block !important;
  }
  .back-button-text {
    font-size: 11px;
    line-height: 11px;
    color: rgb(21, 31, 114);
  }
  .section {
    border-radius: .5rem;
    margin-left: auto;
    margin-right: auto;
    max-width: 35ch;
    padding: 1rem;
  }

  .selfie-capture-review-image {
    overflow: hidden;
    aspect-ratio: 1/1;
  }

  #review-image {
    scale: 1.75;
  }

  @media (max-aspect-ratio: 1/1) {
    #review-image {
      transform: scaleX(-1) translateY(-10%);
    }
  }

  .tips,
  .powered-by {
    align-items: center;
    border-radius: .25rem;
    display: flex;
    justify-content: center;
    letter-spacing: .075em;
  }

  .powered-by {
    box-shadow: 0px 2.57415px 2.57415px rgba(0, 0, 0, 0.06);
    display: inline-flex;
    font-size: .5rem;
  }

  .tips {
    margin-left: auto;
    margin-right: auto;
    max-width: 17rem;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .tips > * + *,
  .powered-by > * + * {
    display: inline-block;
    margin-left: .5em;
  }

  .powered-by .company {
    color: #18406D;
    font-weight: 700;
    letter-spacing: .15rem;
  }

  .logo-mark {
    background-color: #004071;
    display: inline-block;
    padding: .25em .5em;
  }

  .logo-mark svg {
    height: auto;
    justify-self: center;
    width: .75em;
  }

  .id-video-container.portrait {
    width: 100%;
    position: relative;
    height: calc(200px * 1.4);
  }

  .id-video-container.portrait video {
    width: calc(213px + 0.9rem);
    height: 100%;
    position: absolute;
    top: 239px;
    left: 161px;
    padding-bottom: calc((214px * 1.4) / 3);
    padding-top: calc((191px * 1.4) / 3);
    object-fit: cover;

    transform: translateX(-50%) translateY(-50%);
    z-index: 1;
    block-size: 100%;
  }

  .video-container,
  .id-video-container.landscape {
    position: relative;
    z-index: 1;
    width: 100%;
    overflow: hidden;
  }

  .video-container video,
  .id-video-container.landscape video {
    left: 50%;
    min-width: auto;
    position: absolute;
    top: 50%;
    transform: translateX(-50%) translateY(50%);
  }

  .video-container #smile-cta-box {
    color: #fff;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    padding: 2rem 0;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
  }

  .video-container #smile-cta {
    font-size: 1.2rem;
    font-weight: bold;
    margin-top: 0;
    margin-bottom: 0;
  }

  .video-container video {
    height: 150%;
    transform: scaleX(-1) translateX(50%) translateY(-50%);
  }

  .video-container video.agent-mode {
    min-height: 100%;
    transform: scaleX(1) translateX(-50%) translateY(-50%);
  }

  .video-container .video {
    background-color: black;
    position: absolute;
    left: 50%;
    height: calc(100% - 6px);
    clip-path: ellipse(101px 118px);
  }

  .id-video-container.landscape {
    min-height: calc((2 * 10rem) + 198px);
    height: auto;
  }

  .id-video-container.portrait .image-frame-portrait {
    border-width: 0.9rem;
    border-color: rgba(0, 0, 0, 0.7);
    border-style: solid;
    height: auto;
    position: absolute;
    top: 80px;
    left: 47px;
    z-index: 2;
    width: 200px;
    height: calc(200px * 1.4);
  }

  .id-video-container.landscape .image-frame {
    border-width: 10rem 1rem;
    border-color: rgba(0, 0, 0, 0.7);
    border-style: solid;
    height: auto;
    width: 90%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
  }

  .id-video-container.landscape video {
    width: 100%;
    transform: translateX(-50%) translateY(-50%);
    z-index: 1;
    height: 100%;
    block-size: 100%;
  }

  .id-video-container.landscape img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
    max-width: 90%;
  }

  .actions {
    background-color: rgba(0, 0, 0, .7);
    bottom: 0;
    display: flex;
    justify-content: space-between;
    padding: 1rem;
    position: absolute;
    width: 90%;
    z-index: 2;
  }

  #back-of-id-camera-screen .id-video-container.portrait .actions,
  #id-camera-screen .id-video-container.portrait .actions {
    top: 145%;
    width: calc(200px * 1.4);
  }

  #back-of-id-camera-screen .section.portrait, #id-camera-screen .section.portrait {
    min-height: calc((200px * 1.4) + 260px);
  }

  #selfie-capture-screen,
  #back-of-id-entry-screen {
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    max-block-size: 100%;
    max-inline-size: 40ch;
    padding: 1rem;
  }

  #selfie-capture-screen header p {
    margin-block: 0 !important;
  }

  .document-tips {
    margin-block-start: 1.5rem;
    display: flex;
    align-items: center;
    text-align: initial;
  }

  .document-tips svg {
    flex-shrink: 0;
    margin-inline-end: 1rem;
  }

  .document-tips p {
    margin-block: 0;
  }

  .document-tips p:first-of-type {
    font-size; 1.875rem;
    font-weight: bold
  }

  [type='file'] {
    display: none;
  }

  .document-tips > * + * {
    margin-inline-start; 1em;
  }
  </style>
  <div id='selfie-capture-screen' class='flow center'>
    <smileid-navigation theme-color='${this.themeColor}' ${this.showNavigation ? "show-navigation" : ""} ${this.hideBack ? "hide-back" : ""}></smileid-navigation>

    <div class='tips'>Fit your head inside the oval frame</div>

    <div className="error">
      ${this.cameraError ? `<p class="color-red">${this.cameraError}</p>` : ""}
    </div>
    <div class='section | flow' ${this.cameraError ? "hidden" : ""}>
      <div class='video-container'>
        <div class='video'>
        </div>
        <svg id="image-outline" width="215" height="245" viewBox="0 0 215 245" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: relative;">
          <path d="M210.981 122.838C210.981 188.699 164.248 241.268 107.55 241.268C50.853 241.268 4.12018 188.699 4.12018 122.838C4.12018 56.9763 50.853 4.40771 107.55 4.40771C164.248 4.40771 210.981 56.9763 210.981 122.838Z" stroke="${this.themeColor}" stroke-width="7.13965"/>
        </svg>
        <div id="smile-cta-box">
          <div>
            <svg width="120" height="120" xmlns="http://www.w3.org/2000/svg" viewBox="70 70 360 360" fill="currentColor">
              <path d="M354.02,247.69c4.12-12.26,6.39-24.53,6.39-35.75,0-54.63-50.19-99.08-111.88-99.08s-111.95,44.45-111.95,99.08c0,11.22,2.28,23.49,6.39,35.75-6.6,4.66-10.94,12.33-10.94,21.04,0,13.45,10.36,24.4,23.46,25.51.52,26.93,12.56,53.51,35.04,71.64v.73c.07.03.14.05.21.08,3.66,1.63,6.74,4.28,9.92,6.66.08.06.17.12.25.17,0-.08-.01-.16-.01-.25,15.23,9.12,32.95,13.89,51.85,12.96h0c15.54-.72,30.01-5.37,42.59-12.99,2.91-2.85,7.01-4.93,10.42-6.71.25-.16.51-.28.77-.43v-.76c20.36-16.83,33.62-42.32,34.85-71.11,13.15-1.05,23.57-12.03,23.57-25.53,0-8.7-4.35-16.38-10.94-21.04ZM155.53,283.54c-7.18-1.09-12.71-7.31-12.71-14.85s5.53-13.75,12.71-14.85v29.7ZM330.53,289.9c0,45.26-33.98,83.65-78.48,85.72-47.29,2.31-86.52-35.65-86.52-83.18v-40.7c15.63-4.03,38.45-15.61,65.91-46.31.08.59.13,1.21.11,1.87-.13,4.43-3.09,9.32-8.58,14.14-1.79,1.57-2.32,4.13-1.31,6.28,1.01,2.14,3.29,3.35,5.68,3,2.19-.35,48.6-8.13,71.88-38.36,3.84,13.25,12.48,33.59,31.31,48.79v48.75ZM339.42,234.31c-27.83-21.03-32.1-56.22-32.15-56.57-.26-2.37-2.08-4.28-4.43-4.67-2.33-.39-4.68.83-5.69,2.99-11.08,23.62-39.34,35.42-56.72,40.63,1.35-2.97,2.08-6,2.16-9.06.26-9.11-5.24-14.81-5.88-15.43-1.06-1.05-2.53-1.59-3.99-1.53-1.48.07-2.87.75-3.83,1.88-32.09,37.93-57.18,47.4-69.28,49.67-.68.13-1.29.39-1.84.74-.11,0-.18-.03-.29-.03-1.65,0-3.26.19-4.82.49-3.58-10.9-5.56-21.72-5.56-31.57,0-48.78,45.46-88.46,101.33-88.46s101.26,39.68,101.26,88.46c0,9.84-1.98,20.67-5.56,31.57-.85-.16-1.73-.19-2.61-.27v-4.6c0-1.67-.78-3.25-2.12-4.26ZM341.53,283.54v-29.7c7.18,1.09,12.72,7.3,12.72,14.85s-5.53,13.76-12.72,14.85Z"/>
              <path d="M259.05,305.3c2.08-2.08,2.08-5.46,0-7.55-2.09-2.08-5.47-2.07-7.54,0-1.75,1.75-4.79,1.75-6.54,0-2.08-2.08-5.45-2.09-7.54,0-2.08,2.08-2.08,5.46,0,7.55,5.98,5.98,15.65,5.98,21.63,0h0Z"/>
              <path id="mouth"
                  d="m 213.88314,319.4551 c -1.58,0.97 -0.35309,9.33393 1.50671,9.30586 6.05679,-0.0914 16.11631,0.17227 34.57066,0.13346 18.45435,-0.0388 28.15778,-0.0418 31.09964,-0.79956 1.80122,-0.46394 2.75061,-7.48365 1.16061,-8.45365 -1.6,-1.74874 -2.96432,-0.94348 -6.77747,-1.56441 -12.83012,0.04 -36.52534,0.50197 -41.29469,0.43262 -2.51525,-0.0713 -18.41588,-0.61 -20.01588,0.35 z m 57.29363,1.36599 c -9.24417,-2.23757 -8.08363,-2.42362 -20.78363,-2.42362 -12.7,0 -17.77931,2.69528 -26.84042,5.36549 12.57883,3.28731 33.57775,-4.29887 49.70067,2.24964 z">
                <animate
                  id="mouthAnim"
                  attributeName="d"
                  begin="indefinite"
                  dur="1s"
                  fill="freeze"
                  to="m 211.72,312.36 c -1.58,0.97 -2.56,2.86 -2.56,4.72 0,21.54 17.40021,38.7239 38.94021,38.7239 21.54,0 39.18979,-17.1739 39.18979,-39.0439 0,-1.86 -0.97,-3.59 -2.56,-4.56 -1.6,-0.97 -3.57,-1.03 -5.22,-0.18 -21.07,10.85 -41.53,10.85 -62.58,0 -1.65,-0.85 -3.62,-0.61 -5.22,0.35 z m 63.61,13.22 c -3.62,11.52 -14.4,19.9 -27.1,19.9 -12.7,0 -23.49,-8.38 -27.1,-19.9 18.03,6.94 36.2,6.94 54.2,0 z" />
              </path>
              <circle fill="none" stroke="currentColor" stroke-width="10px" cx="287.3" cy="263.68" r="14"/>
              <circle fill="none" stroke="currentColor" stroke-width="10px" cx="209.16" cy="263.68" r="14"/>
            </svg>
          </div>
          <div>
            <p id='smile-cta'>SMILE</p>
          </div>
        </div>
      </div>

      ${this.allowAgentMode ? `<button data-variant='outline small' id='switch-camera' class='button | center' type='button'>${this.inAgentMode ? "Agent Mode On" : "Agent Mode Off"}</button>` : ""}

      <button data-variant='solid' id='start-image-capture' class='button | center' type='button'>
        Take Selfie
      </button>

      ${this.hideAttribution ? "" : "<powered-by-smile-id></powered-by-smile-id>"}
    </div>
  </div>
  `;
}
async function Lc(e, t = { facingMode: "user" }) {
  try {
    const r = await fe.getMedia({
      audio: !1,
      video: t
    }), n = (await navigator.mediaDevices.enumerateDevices()).find(
      (s) => s.kind === "videoinput" && r.getVideoTracks()[0].getSettings().deviceId === s.deviceId
    );
    document.querySelector("smart-camera-web")?.dispatchEvent(
      new CustomEvent("metadata.camera-name", {
        detail: { cameraName: n?.label }
      })
    ), e?.removeAttribute("data-camera-error"), e?.setAttribute("data-camera-ready", !0);
  } catch (r) {
    e?.removeAttribute("data-camera-ready"), e?.setAttribute(
      "data-camera-error",
      fe.handleCameraError(r)
    );
  }
}
class Yh extends HTMLElement {
  constructor() {
    super(), this.templateString = Zh.bind(this), this.render = () => this.templateString(), this.attachShadow({ mode: "open" }), this.facingMode = "user", this.allowAgentMode && (this.facingMode = "environment");
  }
  connectedCallback() {
    const t = document.createElement("template");
    t.innerHTML = this.render(), this.shadowRoot.innerHTML = "", this.shadowRoot.appendChild(t.content.cloneNode(!0)), this.videoContainer = this.shadowRoot.querySelector(
      ".video-container > .video"
    ), this.init();
  }
  init() {
    this._videoStreamDurationInMS = 7800, this._imageCaptureIntervalInMS = 200, this._data = {
      images: [],
      meta: {
        libraryVersion: Wh
      }
    }, this._rawImages = [], this.setUpEventListeners();
  }
  reset() {
    this.disconnectedCallback(), this.connectedCallback();
  }
  _startImageCapture() {
    this.startImageCapture.disabled = !0, this.switchCamera && (this.switchCamera.disabled = !0);
    const t = document.querySelector("smart-camera-web");
    t?.dispatchEvent(
      new CustomEvent("metadata.selfie-capture-start")
    ), t?.dispatchEvent(
      new CustomEvent("metadata.selfie-origin", {
        detail: {
          imageOrigin: {
            environment: "back_camera",
            user: "front_camera"
          }[this.inAgentMode ? "environment" : "user"]
        }
      })
    );
    const r = this.imageOutline.getTotalLength();
    this.imageOutline.style.transition = "none", this.imageOutline.style.strokeDasharray = `${r} ${r}`, this.imageOutline.style.strokeDashoffset = r, this.imageOutline.getBoundingClientRect(), this.imageOutline.style.transition = `stroke-dashoffset ${this._videoStreamDurationInMS / 1e3}s ease-in-out`, this.imageOutline.style.strokeDashoffset = "0", setTimeout(() => {
      this.smileCTABox.style.opacity = 1, this.mouthAnim.beginElement();
    }, 1500), setTimeout(() => {
      this.smileCTABox.style.opacity = 0;
    }, 3500), setTimeout(() => {
      this.smileCTABox.style.opacity = 1, this.smileCTA.textContent = "WIDER SMILE", this.mouth.setAttribute(
        "d",
        "m 213.88314,319.4551 c -1.58,0.97 -0.35309,9.33393 1.50671,9.30586 6.05679,-0.0914 16.11631,0.17227 34.57066,0.13346 18.45435,-0.0388 28.15778,-0.0418 31.09964,-0.79956 1.80122,-0.46394 2.75061,-7.48365 1.16061,-8.45365 -1.6,-1.74874 -2.96432,-0.94348 -6.77747,-1.56441 -12.83012,0.04 -36.52534,0.50197 -41.29469,0.43262 -2.51525,-0.0713 -18.41588,-0.61 -20.01588,0.35 z m 57.29363,1.36599 c -9.24417,-2.23757 -8.08363,-2.42362 -20.78363,-2.42362 -12.7,0 -17.77931,2.69528 -26.84042,5.36549 12.57883,3.28731 33.57775,-4.29887 49.70067,2.24964 z"
      ), this.mouthAnim.beginElement();
    }, 4e3), this._imageCaptureInterval = setInterval(() => {
      this._capturePOLPhoto();
    }, this._imageCaptureIntervalInMS), this._videoStreamTimeout = setTimeout(() => {
      this._stopVideoStream();
    }, this._videoStreamDurationInMS);
  }
  async _switchCamera() {
    this.facingMode = this.facingMode === "user" ? "environment" : "user", this.facingMode === "user" ? this.shadowRoot.querySelector("video").classList.remove("agent-mode") : this.shadowRoot.querySelector("video").classList.add("agent-mode"), this.startImageCapture.disabled = !0, this.switchCamera.disabled = !0, fe.stopMedia(), await Lc(this, { facingMode: this.facingMode }), this.handleStream(fe.stream);
  }
  _stopVideoStream() {
    try {
      clearTimeout(this._videoStreamTimeout), clearInterval(this._imageCaptureInterval), clearInterval(this._drawingInterval), this._capturePOLPhoto(), this._captureReferencePhoto(), fe.stopMedia();
      const t = this._rawImages.length;
      this._data.referenceImage = this._referenceImage, this._data.previewImage = this._referenceImage;
      const r = Xh(t);
      this._data.images = this._data.images.concat(
        r.map((i) => ({
          image: this._rawImages[i].split(",")[1],
          image_type_id: Ds.LIVENESS_IMAGE_BASE64
        }))
      ), this._publishImages();
    } catch (t) {
      console.error(t);
    }
  }
  _capturePOLPhoto() {
    const t = document.createElement("canvas");
    this._video.videoHeight > this._video.videoWidth ? (t.width = 240, t.height = Math.max(
      320,
      t.width * this._video.videoHeight / this._video.videoWidth
    )) : (t.height = 240, t.width = Math.max(
      320,
      t.height * this._video.videoWidth / this._video.videoHeight
    )), this._drawImage(t, !1), this._rawImages.push(t.toDataURL("image/jpeg"));
  }
  _captureReferencePhoto() {
    const t = document.createElement("canvas");
    this._video.videoHeight > this._video.videoWidth ? (t.width = 480, t.height = Math.max(
      640,
      t.width * this._video.videoHeight / this._video.videoWidth
    )) : (t.height = 480, t.width = Math.max(
      640,
      t.height * this._video.videoWidth / this._video.videoHeight
    )), this._drawImage(t, !this.disableImageTests);
    const i = t.toDataURL("image/jpeg");
    this._referenceImage = i, this._data.images.push({
      image: i.split(",")[1],
      image_type_id: Ds.SELFIE_IMAGE_BASE64
    });
  }
  _publishImages() {
    const t = {
      ...this._data,
      facingMode: this.facingMode
    };
    this.dispatchEvent(
      new CustomEvent("selfie-capture.publish", {
        detail: t
      })
    );
  }
  resetErrorMessage() {
    this.errorMessage.textContent = "";
  }
  _drawImage(t, r = !0, i = this._video) {
    const n = t.getContext("2d");
    if (n.drawImage(
      i,
      0,
      0,
      i.videoWidth,
      i.videoHeight,
      0,
      0,
      t.width,
      t.height
    ), r) {
      const o = n.getImageData(0, 0, t.width, t.height);
      if (qh(o.data))
        return n;
      throw new Error(
        "Unable to capture webcam images - Please try another device"
      );
    } else
      return n;
  }
  handleStream(t) {
    try {
      const r = this.shadowRoot.querySelector(".video");
      if (!r)
        return;
      const i = this.shadowRoot.querySelector("video");
      let n = null;
      i ? n = this.shadowRoot.querySelector("video") : n = document.createElement("video"), n.autoplay = !0, n.playsInline = !0, n.muted = !0, "srcObject" in n ? n.srcObject = t : n.src = window.URL.createObjectURL(t), n.onloadedmetadata = () => {
        n.play();
      }, this._video = n, this._data.permissionGranted = !0, i || r.prepend(n);
    } catch (r) {
      this.setAttribute(
        "data-camera-error",
        fe.handleCameraError(r)
      ), r.name !== "AbortError" && console.error(r), fe.stopMedia();
    }
  }
  setUpEventListeners() {
    this.navigation = this.shadowRoot.querySelector("smileid-navigation"), this.startImageCapture = this.shadowRoot.querySelector(
      "#start-image-capture"
    ), this.switchCamera = this.shadowRoot.querySelector("#switch-camera"), this.imageOutline = this.shadowRoot.querySelector("#image-outline path"), this.smileCTABox = this.shadowRoot.querySelector("#smile-cta-box"), this.smileCTA = this.shadowRoot.querySelector("#smile-cta"), this.mouth = this.shadowRoot.querySelector("#mouth"), this.mouthAnim = this.shadowRoot.querySelector("#mouthAnim"), this.startImageCapture.addEventListener("click", () => {
      this._startImageCapture();
    }), this.switchCamera?.addEventListener("click", () => {
      this._switchCamera();
    }), this.navigation.addEventListener("navigation.back", () => {
      this.handleBackEvents();
    }), this.navigation.addEventListener("navigation.close", () => {
      this.closeWindow();
    }), fe.stream ? this.handleStream(fe.stream) : (this.hasAttribute("data-camera-ready") || !this.hasAttribute("data-camera-error")) && Lc(this, { facingMode: this.facingMode }), this.setupAgentMode();
  }
  disconnectedCallback() {
    fe.stopMedia(), clearTimeout(this._videoStreamTimeout);
  }
  get hideBack() {
    return this.hasAttribute("hide-back");
  }
  get showNavigation() {
    return this.hasAttribute("show-navigation");
  }
  get themeColor() {
    return this.getAttribute("theme-color") || "#001096";
  }
  get hideAttribution() {
    return this.hasAttribute("hide-attribution");
  }
  async setupAgentMode() {
    if (!this.allowAgentMode)
      return;
    await fe.supportsAgentMode() || this.hasAttribute("show-agent-mode-for-tests") ? (this.switchCamera.hidden = !1, this.facingMode === "user" ? this.shadowRoot.querySelector("video")?.classList?.remove("agent-mode") : this.shadowRoot.querySelector("video")?.classList?.add("agent-mode")) : this.switchCamera.hidden = !0;
  }
  get hasAgentSupport() {
    return this.hasAttribute("has-agent-support");
  }
  get title() {
    return this.getAttribute("title") || "Submit Front of ID";
  }
  get hidden() {
    return this.getAttribute("hidden");
  }
  get cameraError() {
    return this.getAttribute("data-camera-error");
  }
  get disableImageTests() {
    return this.hasAttribute("disable-image-tests");
  }
  get allowAgentMode() {
    return this.getAttribute("allow-agent-mode") === "true";
  }
  get inAgentMode() {
    return this.facingMode === "environment";
  }
  static get observedAttributes() {
    return [
      "allow-agent-mode",
      "data-camera-error",
      "data-camera-ready",
      "disable-image-tests",
      "hidden",
      "hide-back-to-host",
      "show-navigation",
      "title"
    ];
  }
  attributeChangedCallback(t) {
    switch (t) {
      case "data-camera-error":
      case "hidden":
      case "title":
        this.shadowRoot.innerHTML = this.render(), this.init();
        break;
      case "allow-agent-mode":
        this.shadowRoot.innerHTML.trim() ? this.setupAgentMode() : (this.shadowRoot.innerHTML = this.render(), this.init());
        break;
      case "show-navigation":
        if (this.shadowRoot.innerHTML.trim()) {
          const r = this.shadowRoot.querySelector("smileid-navigation");
          r && (this.showNavigation ? r.setAttribute("show-navigation", "") : r.removeAttribute("show-navigation"));
        } else
          this.shadowRoot.innerHTML = this.render(), this.init();
        break;
      case "data-camera-ready":
        this.hasAttribute("data-camera-ready") && fe.stream && this.handleStream(fe.stream);
        break;
    }
  }
  handleBackEvents() {
    this.stopMedia(), this.dispatchEvent(new CustomEvent("selfie-capture.cancelled"));
  }
  closeWindow() {
    this.stopMedia(), this.dispatchEvent(new CustomEvent("selfie-capture.close"));
  }
  stopMedia() {
    this.removeAttribute("data-camera-ready"), fe.stopMedia();
  }
}
"customElements" in window && !customElements.get("selfie-capture") && window.customElements.define("selfie-capture", Yh);
const Kh = ({
  timeout: e = 2e4,
  "start-countdown": t = !1,
  hidden: r = !1,
  ...i
}) => {
  const o = (() => {
    try {
      return !!window.parent.Cypress || window.parent.navigator.userAgent.includes("Electron") && window.parent.__Cypress;
    } catch {
      return !1;
    }
  })() || !!window.Cypress || window.navigator.userAgent.includes("Electron") && window.__Cypress, s = Qt(r), a = Qt(t), [c, l] = Bt(!1), [h, u] = Bt(o ? 100 : 0), [d, f] = Bt(!1), [m, y] = Bt(!1), [p, _] = Bt(!1);
  if (Ye(() => {
    if (c || m || o) return;
    (async () => {
      y(!0);
      try {
        await o1(), l(!0);
      } catch (x) {
        console.error("Failed to load Mediapipe:", x);
      }
      y(!1);
    })();
  }, [c, m]), Ye(() => {
    if (s || !a || c) return;
    const g = setInterval(() => {
      u((x) => Math.min(x + 1, 100));
    }, e / 100);
    return () => {
      clearInterval(g);
    };
  }, [s, a, e, c]), Ye(() => {
    if (s || c || h < 100) return;
    const x = setTimeout(() => {
      const T = document.querySelector("selfie-capture");
      if (T && !T.hasAttribute("data-backup-events-setup")) {
        T.setAttribute("data-backup-events-setup", "true");
        const S = (k) => {
          const F = k;
          window.dispatchEvent(
            new CustomEvent(F.type, {
              detail: F.detail,
              bubbles: !0
            })
          );
        };
        return T.addEventListener("selfie-capture.publish", S), T.addEventListener(
          "selfie-capture.cancelled",
          S
        ), T.addEventListener("selfie-capture.close", S), () => {
          T.removeEventListener(
            "selfie-capture.publish",
            S
          ), T.removeEventListener(
            "selfie-capture.cancelled",
            S
          ), T.removeEventListener(
            "selfie-capture.close",
            S
          );
        };
      }
    }, 200);
    return () => {
      clearTimeout(x);
    };
  }, [s, c, h]), Ye(() => {
    if (s || m) return;
    document.querySelector("smart-camera-web")?.dispatchEvent(
      new CustomEvent("metadata.active-liveness-version", {
        detail: {
          version: p ? "0.0.1" : "1.0.0"
        }
      })
    );
  }, [p, s, m]), s)
    return null;
  if (d && c && !p)
    return /* @__PURE__ */ L(Co, { ...i });
  if (!d && c && !p)
    return /* @__PURE__ */ L(Co, { ...i });
  if (h >= 100) {
    p || _(!0);
    const g = { ...i };
    return delete g.hidden, // @ts-ignore
    /* @__PURE__ */ L(
      "selfie-capture",
      {
        ...g,
        ref: (x) => {
          if (x && !x.hasAttribute("data-events-setup")) {
            x.setAttribute("data-events-setup", "true");
            const T = (S) => {
              const k = S;
              (k.type === "selfie-capture.publish" || k.type === "selfie-capture.cancelled" || k.type === "selfie-capture.close") && f(!0), window.dispatchEvent(
                new CustomEvent(k.type, {
                  detail: k.detail,
                  bubbles: !0
                })
              );
            };
            x.addEventListener("selfie-capture.publish", T), x.addEventListener("selfie-capture.cancelled", T), x.addEventListener("selfie-capture.close", T);
          }
        }
      }
    );
  }
  return /* @__PURE__ */ L("div", { style: { textAlign: "center", marginTop: "20%" }, children: [
    /* @__PURE__ */ L(
      "div",
      {
        style: {
          marginBottom: "16px",
          display: "flex",
          justifyContent: "center"
        },
        children: /* @__PURE__ */ L(
          M1,
          {
            size: 48,
            style: { animation: "spin 1s linear infinite" }
          }
        )
      }
    ),
    /* @__PURE__ */ L("p", { children: [
      "Loading... ",
      h,
      "%"
    ] }),
    /* @__PURE__ */ L("style", { children: `
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      ` })
  ] });
};
customElements.get("selfie-capture-wrapper") || Zc(
  Kh,
  "selfie-capture-wrapper",
  [
    "timeout",
    "interval",
    "duration",
    "theme-color",
    "show-navigation",
    "allow-agent-mode",
    "show-agent-mode-for-tests",
    "hide-attribution",
    "disable-image-tests",
    "key",
    "start-countdown",
    "hidden"
  ],
  { shadow: !0 }
);
const Jh = ko.version, pi = document.querySelector("smart-camera-web"), Qh = (e, t = 0, r = 0, i = 0.9) => new Promise((n, o) => {
  if (!e || typeof e != "string") {
    o(new Error("Invalid data URI provided"));
    return;
  }
  if (t < 0 || t >= 99 || r < 0 || r >= 99) {
    o(new Error("Crop percentages must be between 0 and 99"));
    return;
  }
  const s = new Image();
  s.onload = () => {
    try {
      const a = document.createElement("canvas"), c = a.getContext("2d"), l = s.width, h = s.height, u = l * t / 100, d = h * r / 100, f = l - u * 2, m = h - d * 2;
      a.width = f, a.height = m, c.drawImage(
        s,
        u,
        d,
        f,
        m,
        0,
        0,
        f,
        m
      );
      const y = a.toDataURL("image/jpeg", i);
      n(y);
    } catch (a) {
      o(new Error(`Failed to process image: ${a.message}`));
    }
  }, s.onerror = () => {
    o(new Error("Failed to load image from data URI"));
  }, s.src = e;
});
class ed extends HTMLElement {
  constructor() {
    super(), this.activeScreen = null, this._remountKey = 0, pi?.dispatchEvent(new CustomEvent("metadata.initialize"));
  }
  connectedCallback() {
    this.innerHTML = `
            ${Ii(this.themeColor)}
            <div style="height: 100%;">
              <selfie-capture-instructions theme-color='${this.themeColor}' ${this.showNavigation} ${this.hideAttribution} ${this.hideBack} hidden></selfie-capture-instructions>
              <selfie-capture-wrapper theme-color='${this.themeColor}' ${this.showNavigation} ${this.allowAgentMode} ${this.allowAgentModeTests} ${this.hideAttribution} ${this.disableImageTests} key="${this._remountKey}" start-countdown="false" hidden></selfie-capture-wrapper>
              <selfie-capture-review theme-color='${this.themeColor}' ${this.showNavigation} ${this.hideAttribution} hidden></selfie-capture-review>
            </div>
        `, this._data = {
      images: [],
      meta: {
        libraryVersion: Jh
      }
    }, this.selfieInstruction = this.querySelector("selfie-capture-instructions"), this.selfieCapture = this.querySelector("selfie-capture-wrapper"), this.selfieReview = this.querySelector("selfie-capture-review"), this.getAttribute("initial-screen") === "selfie-capture" || this.hideInstructions ? this.setActiveScreen(this.selfieCapture) : this.setActiveScreen(this.selfieInstruction), this.setUpEventListeners();
  }
  getAgentMode() {
    return this.inAgentMode ? "environment" : "user";
  }
  disconnectedCallback() {
    fe.stopMedia(), pi?.dispatchEvent(new CustomEvent("metadata.cleanup")), this._selfieWrapperListeners && (this._selfieWrapperListeners.forEach(({ event: t, handler: r }) => {
      window.removeEventListener(t, r);
    }), this._selfieWrapperListeners = null), this.activeScreen && this.activeScreen.removeAttribute("hidden"), this.activeScreen = null, this.innerHTML = "";
  }
  setUpEventListeners() {
    this.selfieInstruction.addEventListener(
      "selfie-capture-instructions.capture",
      async () => {
        this.setActiveScreen(this.selfieCapture);
      }
    ), this.selfieInstruction.addEventListener(
      "selfie-capture-instructions.cancelled",
      () => {
        this.handleBackEvents();
      }
    ), this.setupSelfieWrapperEventListeners(), this.selfieReview.addEventListener(
      "selfie-capture-review.rejected",
      async () => {
        pi?.dispatchEvent(
          new CustomEvent("metadata.selfie-capture-retry")
        ), this.selfieReview.removeAttribute("data-image"), this.selfieReview.removeAttribute("mirror-image"), this._data.images = [], await this.forceWrapperRemount(), this.setActiveScreen(this.selfieCapture);
      }
    ), this.selfieReview.addEventListener(
      "selfie-capture-review.accepted",
      async () => {
        this._publishSelectedImages();
      }
    ), [this.selfieInstruction, this.selfieCapture, this.selfieReview].forEach(
      (t) => {
        t.addEventListener(
          `${t.nodeName.toLowerCase()}.close`,
          () => {
            this.handleCloseEvent();
          }
        );
      }
    );
  }
  // Force remount of selfie-capture-wrapper component for clean state
  async forceWrapperRemount() {
    fe.stopMedia(), this._remountKey++;
    const t = this.querySelector("div"), r = this.selfieCapture;
    if (r && t) {
      const i = document.createElement("selfie-capture-wrapper");
      Array.from(r.attributes).forEach((s) => {
        i.setAttribute(s.name, s.value);
      }), r.remove(), await new Promise((s) => {
        setTimeout(s, 50);
      }), i.setAttribute("key", this._remountKey.toString()), i.setAttribute("start-countdown", "false"), i.setAttribute("hidden", "");
      const o = t.querySelector("selfie-capture-review");
      o ? t.insertBefore(i, o) : t.appendChild(i), this.selfieCapture = i, this.setupSelfieWrapperEventListeners();
    }
    return new Promise((i) => {
      setTimeout(() => {
        i();
      }, 200);
    });
  }
  // Override setActiveScreen to enable countdown when selfie-capture is active
  setActiveScreen(t) {
    this.activeScreen !== t && (this.activeScreen?.setAttribute("hidden", ""), t.removeAttribute("hidden"), this.activeScreen = t, t === this.selfieCapture ? t.setAttribute("start-countdown", "true") : this.selfieCapture && this.selfieCapture.setAttribute("start-countdown", "false"));
  }
  setupSelfieWrapperEventListeners() {
    this._selfieWrapperListeners && this._selfieWrapperListeners.forEach(({ event: n, handler: o }) => {
      window.removeEventListener(n, o);
    });
    const t = async () => {
      if (fe.stopMedia(), await this.forceWrapperRemount(), this.hideInstructions) {
        this.handleBackEvents();
        return;
      }
      this.setActiveScreen(this.selfieInstruction);
    }, r = async () => {
      fe.stopMedia(), await this.forceWrapperRemount(), this.handleCloseEvent();
    }, i = async (n) => {
      pi?.dispatchEvent(
        new CustomEvent("metadata.selfie-capture-end")
      ), this.selfieReview.setAttribute(
        "data-image",
        await Qh(n.detail.referenceImage, 20, 20)
      );
      const o = n.detail.facingMode === "user";
      this.selfieReview.setAttribute(
        "mirror-image",
        o ? "true" : "false"
      ), this._data.images = n.detail.images, fe.stopMedia(), this.setActiveScreen(this.selfieReview);
    };
    this._selfieWrapperListeners = [
      { event: "selfie-capture.cancelled", handler: t },
      { event: "selfie-capture.close", handler: r },
      { event: "selfie-capture.publish", handler: i }
    ], this._selfieWrapperListeners.forEach(({ event: n, handler: o }) => {
      window.addEventListener(n, o);
    }), this.addEventListener("selfie-capture.publish", i);
  }
  _publishSelectedImages() {
    this.dispatchEvent(
      new CustomEvent("selfie-capture-screens.publish", { detail: this._data })
    );
  }
  get hideInstructions() {
    return this.hasAttribute("hide-instructions");
  }
  get hideAttribution() {
    return this.hasAttribute("hide-attribution") ? 'hide-attribution=""' : "";
  }
  get hideBackOfId() {
    return this.hasAttribute("hide-back-of-id");
  }
  get showNavigation() {
    return this.hasAttribute("show-navigation") ? 'show-navigation=""' : "";
  }
  get inAgentMode() {
    return this.getAttribute("allow-agent-mode") === "true";
  }
  get allowAgentMode() {
    return this.inAgentMode ? 'allow-agent-mode="true"' : "";
  }
  get allowAgentModeTests() {
    return this.hasAttribute("show-agent-mode-for-tests") ? 'show-agent-mode-for-tests=""' : "";
  }
  get hideBack() {
    return this.hasAttribute("hide-back-to-host") || this.hasAttribute("hide-back") ? 'hide-back=""' : "";
  }
  get disableImageTests() {
    return this.hasAttribute("disable-image-tests") ? 'disable-image-tests=""' : "";
  }
  get themeColor() {
    return this.getAttribute("theme-color") || "#001096";
  }
  handleBackEvents() {
    this.dispatchEvent(new CustomEvent("selfie-capture-screens.cancelled"));
  }
  handleCloseEvent() {
    this.dispatchEvent(new CustomEvent("selfie-capture-screens.close"));
  }
  static get observedAttributes() {
    return [
      "title",
      "hidden",
      "show-navigation",
      "hide-back-to-host",
      "initial-screen",
      "allow-agent-mode",
      "show-agent-mode-for-tests",
      "disable-image-tests"
    ];
  }
  attributeChangedCallback(t) {
    switch (t) {
      case "title":
      case "hidden":
      case "initial-screen":
      case "allow-agent-mode":
      case "show-agent-mode-for-tests":
      case "disable-image-tests":
        this.connectedCallback();
        break;
    }
  }
}
"customElements" in window && !customElements.get("selfie-capture-screens") && customElements.define("selfie-capture-screens", ed);
export {
  ed as S
};
//# sourceMappingURL=SelfieCaptureScreens-KoQpCxtc.js.map
